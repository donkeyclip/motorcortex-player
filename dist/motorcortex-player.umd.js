!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("@donkeyclip/motorcortex")):"function"==typeof define&&define.amd?define(["@donkeyclip/motorcortex"],t):(e="undefined"!=typeof globalThis?globalThis:e||self)["@donkeyclip/motorcortex-player"]=t(e.MotorCortex)}(this,(function(e){"use strict";const t="--mc-player";var s={play:'\x3c!-- Generated by IcoMoon.io --\x3e\n<svg id="play-svg" version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">\n<title>play</title>\n<path fill="#999" d="M27.558 13.624l-21.827-13.232c-0.402-0.248-0.89-0.395-1.411-0.395-1.502 0-2.72 1.218-2.72 2.72 0 0.002 0 0.004 0 0.006v-0 26.461c0 0.001 0 0.002 0 0.003 0 1.502 1.218 2.72 2.72 2.72 0.522 0 1.009-0.147 1.423-0.401l-0.012 0.007 21.827-13.232c0.792-0.485 1.313-1.346 1.313-2.328s-0.521-1.843-1.301-2.321l-0.012-0.007z"></path>\n</svg>',pause:'\x3c!-- Generated by IcoMoon.io --\x3e\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">\n<title>pause</title>\n<path d="M6.059 4.639h8.521v22.722h-8.521zM18.84 4.639h8.521v22.722h-8.521z"></path>\n</svg>',"expand-full":'\x3c!-- Generated by IcoMoon.io --\x3e\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">\n<title>expand-full</title>\n<path fill="#999" d="M31.667 3.271c-0.004-1.619-1.315-2.93-2.934-2.934h-7.642c-0.921 0-1.667 0.747-1.667 1.667s0.747 1.667 1.667 1.667h6.909c0.185 0 0.333 0.148 0.333 0.332v4.359c0 0.921 0.747 1.667 1.667 1.667s1.667-0.746 1.667-1.667v0-5.091zM0.333 8.362c0 0.921 0.746 1.667 1.667 1.667s1.667-0.746 1.667-1.667v0-4.362c0-0.001 0-0.001 0-0.002 0-0.184 0.148-0.333 0.332-0.333h6.909c0.898-0.029 1.614-0.764 1.614-1.667s-0.717-1.637-1.612-1.666l-0.003-0h-7.635c-1.619 0.005-2.931 1.315-2.934 2.936l-0.007 5.095zM31.667 28.726v-5.091c0-0.921-0.747-1.667-1.667-1.667s-1.667 0.747-1.667 1.667v0 4.365c0 0.185-0.148 0.333-0.332 0.333h-6.909c-0.921 0-1.667 0.747-1.667 1.667s0.747 1.667 1.667 1.667v0h7.635c1.624-0.002 2.941-1.319 2.941-2.942zM0.333 28.726c0.004 1.621 1.319 2.934 2.941 2.934 0 0 0 0 0 0h7.635c0.016 0.001 0.034 0.001 0.053 0.001 0.921 0 1.667-0.747 1.667-1.667s-0.746-1.667-1.667-1.667c-0.019 0-0.037 0-0.056 0.001l0.003-0h-6.909c-0 0-0 0-0 0-0.182 0-0.33-0.145-0.333-0.326v-4.366c0-0.921-0.747-1.667-1.667-1.667s-1.667 0.747-1.667 1.667v0 5.091z"></path>\n<path fill="#999" d="M10.321 10.848h11.357c1.818 0 3.291 1.473 3.291 3.291v3.72c0 1.818-1.473 3.291-3.291 3.291h-11.357c-1.818 0-3.291-1.473-3.291-3.291v-3.72c0-1.818 1.473-3.291 3.291-3.291z"></path>\n</svg>',"angle-left":'\x3c!-- Generated by IcoMoon.io --\x3e\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="32" viewBox="0 0 16 32">\n<title>angle-left</title>\n<path d="M1.981 14.938l8.5-8.5c0.588-0.588 1.537-0.588 2.119 0l1.412 1.412c0.588 0.588 0.588 1.537 0 2.119l-6.019 6.031 6.025 6.025c0.588 0.587 0.588 1.538 0 2.119l-1.412 1.419c-0.588 0.587-1.537 0.587-2.119 0l-8.5-8.5c-0.594-0.587-0.594-1.537-0.006-2.125z"></path>\n</svg>',"angle-right":'\x3c!-- Generated by IcoMoon.io --\x3e\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="32" viewBox="0 0 16 32">\n<title>angle-right</title>\n<path d="M14.019 17.063l-8.5 8.5c-0.588 0.587-1.538 0.587-2.119 0l-1.413-1.413c-0.587-0.587-0.587-1.538 0-2.119l6.019-6.031-6.025-6.025c-0.587-0.588-0.587-1.537 0-2.119l1.413-1.419c0.587-0.588 1.538-0.588 2.119 0l8.5 8.5c0.594 0.588 0.594 1.538 0.006 2.125z"></path>\n</svg>',settings:'\x3c!-- Generated by IcoMoon.io --\x3e\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">\n<title>settings</title>\n<path fill="#999" d="M29.999 12.665h-2.483c-0.275-0.938-0.621-1.751-1.048-2.512l0.031 0.060 1.757-1.755c0.362-0.362 0.587-0.862 0.587-1.415s-0.224-1.053-0.587-1.415l-1.886-1.883c-0.362-0.362-0.862-0.586-1.415-0.586s-1.053 0.224-1.415 0.586l-1.757 1.755c-0.701-0.397-1.514-0.743-2.366-0.996l-0.084-0.021v-2.483c0.002-1.107-0.894-2.001-1.999-2.001h-2.668c-1.105 0-1.999 0.896-1.999 2.001v2.483c-0.938 0.275-1.751 0.621-2.513 1.048l0.060-0.031-1.757-1.755c-0.362-0.362-0.862-0.587-1.415-0.587s-1.053 0.224-1.415 0.587l-1.886 1.886c-0.362 0.362-0.586 0.862-0.586 1.415s0.224 1.053 0.586 1.415v0l1.758 1.755c-0.431 0.775-0.771 1.598-1.017 2.451h-2.483c-1.107-0.002-2.001 0.894-2.001 1.999v2.668c0 1.105 0.896 1.999 2.001 1.999h2.483c0.246 0.854 0.586 1.676 1.017 2.452l-1.762 1.758c-0.362 0.362-0.586 0.862-0.586 1.415s0.224 1.053 0.586 1.415v0l1.886 1.885c0.368 0.348 0.866 0.563 1.415 0.563s1.047-0.214 1.416-0.564l-0.001 0.001 1.757-1.757c0.778 0.429 1.6 0.771 2.454 1.019v2.479c0 1.105 0.894 2.001 1.999 2.001h2.668c1.105 0 1.999-0.896 1.999-2.001v-2.479c0.852-0.248 1.676-0.589 2.452-1.017l1.757 1.757c0.362 0.362 0.862 0.586 1.415 0.586s1.053-0.224 1.415-0.586v0l1.885-1.886c0.362-0.362 0.586-0.862 0.586-1.414s-0.224-1.052-0.586-1.414l-1.757-1.757c0.431-0.776 0.771-1.6 1.017-2.452h2.483c0 0 0.001 0 0.002 0 1.105 0 2.001-0.896 2.001-2.001 0-0.002 0-0.004 0-0.005v0-2.663c0-1.105-0.896-1.999-2.001-1.999zM16 22.668c-3.682 0-6.666-2.985-6.666-6.666s2.985-6.666 6.666-6.666v0c3.682 0 6.666 2.985 6.666 6.666s-2.985 6.666-6.666 6.666v0z"></path>\n</svg>',loop:'\x3c!-- Generated by IcoMoon.io --\x3e\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">\n<title>loop</title>\n<path fill="#999" d="M22.364 21.968h-0.631c-0.92 0-1.667 0.746-1.667 1.667s0.746 1.667 1.667 1.667h0.637c0.013 0 0.028 0 0.044 0 5.113 0 9.259-4.145 9.259-9.259 0-4.668-3.454-8.529-7.946-9.166l-0.049-0.006c-0.158-0.028-0.276-0.164-0.277-0.328v-2.636c-0-0.92-0.746-1.666-1.667-1.666-0.357 0-0.689 0.112-0.96 0.304l0.005-0.003-6.371 4.455c-0.432 0.305-0.711 0.803-0.711 1.365 0 0.92 0.746 1.667 1.667 1.667 0 0 0 0 0 0h6.352c3.772 0 6.617 2.567 6.617 5.971-0.004 3.295-2.674 5.966-5.969 5.969h-0zM8.329 25.127c0.16 0.027 0.277 0.165 0.277 0.328v2.635c0 0.001 0 0.001 0 0.002 0 0.92 0.746 1.665 1.665 1.665 0.358 0 0.69-0.113 0.961-0.305l-0.005 0.003 6.364-4.453c0.432-0.306 0.71-0.803 0.71-1.365 0-0.92-0.746-1.667-1.666-1.668h-6.352c-3.772 0-6.617-2.567-6.617-5.968 0.002-3.296 2.673-5.968 5.969-5.972h0.638c0.92 0 1.667-0.746 1.667-1.667s-0.746-1.667-1.667-1.667v0h-0.637c-0.010-0-0.022-0-0.034-0-5.114 0-9.26 4.146-9.26 9.26 0 4.665 3.45 8.524 7.937 9.166l0.049 0.006z"></path>\n</svg>',"volume-on":'\x3c!-- Generated by IcoMoon.io --\x3e\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">\n<title>volume-on</title>\n<path d="M26.107 2.991l-3.729 3.185c2.867 2.354 4.694 5.879 4.694 9.824s-1.827 7.47-4.694 9.824l3.729 3.185c3.612-3.226 5.893-7.852 5.893-13.009s-2.281-9.783-5.893-13.009zM19.861 8.326l-3.876 3.312c1.692 0.762 3.038 2.423 3.038 4.362s-1.346 3.6-3.038 4.362l3.876 3.312c2.379-1.756 4.028-4.535 4.028-7.674s-1.649-5.918-4.028-7.674zM12.143 5.399l-7.143 5.601h-3c-1.478 0-2 0.539-2 2v6c0 1.461 0.553 2 2 2h3l7.143 5.595c0.857 0.553 1.85 0.727 1.85-0.823v-19.55c0-1.55-0.993-1.376-1.85-0.823z"></path>\n</svg>',"volume-off":'\x3c!-- Generated by IcoMoon.io --\x3e\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">\n<title>volume-off</title>\n<path d="M27.397 16.001l4.134-4.144c0.625-0.627 0.625-1.641 0-2.267l-1.132-1.134c-0.625-0.626-1.638-0.626-2.263 0l-4.134 4.144-4.133-4.141c-0.625-0.626-1.638-0.626-2.263 0l-1.132 1.134c-0.625 0.626-0.625 1.641 0 2.267l4.134 4.142-4.131 4.142c-0.625 0.626-0.625 1.641 0 2.267l1.132 1.134c0.625 0.626 1.638 0.626 2.263 0l4.131-4.141 4.133 4.14c0.625 0.627 1.638 0.627 2.263 0l1.132-1.134c0.625-0.626 0.625-1.641 0-2.267l-4.134-4.141zM12.148 5.399l-7.146 5.603h-3.001c-1.479 0-2.001 0.539-2.001 2.001l-0 2.951 0 3.051c0 1.461 0.553 2.001 2.001 2.001h3.001l7.146 5.597c0.857 0.553 1.851 0.727 1.851-0.823v-19.556c-0-1.55-0.994-1.376-1.851-0.823z"></path>\n</svg>',"donkeyclip-logo":'\x3c!-- Generated by IcoMoon.io --\x3e\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">\n<title>DonkeyClip</title>\n<path fill="#777" d="M25.811 3.454v11.010h-3.479c-0.696-2.447-2.974-4.246-5.638-4.246-3.238 0-5.877 2.638-5.877 5.877s2.638 5.877 5.877 5.877c2.686 0 4.942-1.799 5.638-4.246h3.334c-0.767 4.246-4.485 7.509-8.972 7.509-5.014 0-9.115-4.078-9.115-9.115 0-5.014 4.078-9.115 9.115-9.115 2.231 0 4.294 0.815 5.877 2.159v-7.652c-1.992-0.912-4.222-1.415-6.572-1.415-8.779 0-15.904 7.125-15.904 15.904s7.125 15.904 15.904 15.904c8.779 0 15.904-7.125 15.904-15.904 0.024-5.109-2.375-9.644-6.093-12.546z"></path>\n</svg>',spinner:'<div class="lds-ring"><div></div><div></div><div></div><div></div></div>',"check-solid":'\x3c!-- Generated by IcoMoon.io --\x3e\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">\n<title>check-solid</title>\n<path d="M10.869 27.463l-10.4-10.4c-0.625-0.625-0.625-1.638 0-2.263l2.263-2.263c0.625-0.625 1.638-0.625 2.263 0l7.006 7.006 15.006-15.006c0.625-0.625 1.638-0.625 2.263 0l2.263 2.263c0.625 0.625 0.625 1.638 0 2.263l-18.4 18.4c-0.625 0.625-1.638 0.625-2.263-0z"></path>\n</svg>'};const o="volume-change",n="mute-change",i="speed-change",l="loop-change",a="scale-change",r="show-volume-change",c="state-change",p="duration-change",d="mouseup",m="mousedown",u="touchstart",h="mousemove",g="touchend",v="touchmove";function f(){try{document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}catch(e){console.error(e)}}function y(e){try{e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}catch(e){console.error(e)}}function b(e){const t=e.clip.props.host.className.includes("full-screen");e.clip.props.host!==e.options.host&&(t?e.options.host.appendChild(e.elements.mcPlayer):e.clip.props.host.appendChild(e.elements.mcPlayer)),t?f():y(e.clip.props.host)}function w(e){V(e,null,"play")}function x(e){e.elements.pointerEventPanel.onclick=()=>function(e){P(e)}(e),e.elements.pointerEventPanel.ondblclick=()=>b(e)}const B=new e.TimeCapsule;let k=setTimeout((()=>{}),0);function M(e,t){return e.getElementsByClassName(t)[0]}function C(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),o=1;o<t;o++)s[o-1]=arguments[o];return e.addEventListener(...s)}document.removeEventListener.bind(document);const P=e=>{clearTimeout(k),e.elements.playPausePanel.classList.remove("hide"),e.elements.playPausePanel.classList.remove("run-animation-play"),e.elements.playPausePanel.classList.remove("run-animation-pause"),e.elements.playPausePanel.classList.remove("run-animation-idle"),"idle"===e.clip.runTimeInfo.state?(e.play(),w(e.elements.playPausePanelContainer),e.elements.playPausePanel.classList.add("run-animation-idle")):"playing"!==e.clip.runTimeInfo.state?(e.play(),w(e.elements.playPausePanelContainer),e.elements.playPausePanel.classList.add("run-animation-play")):(e.pause(),V(e.elements.playPausePanelContainer,null,"pause"),e.elements.playPausePanel.classList.add("run-animation-pause")),k=setTimeout((()=>{e.elements.playPausePanel.classList.add("hide")}),800)};const T=/^[+-]?(\d+([.]\d*)?|[.]\d+)/gi;function L(e){const t=e.match(T)[0],s=e.substring(t.length);if("number"==typeof(o=Number(t))&&isFinite(o)&&("%"!==s||"px"!==s))return{number:Number(t),unit:s};var o}function S(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function E(e,t,s){e.document.addEventListener(d,t,!1),e.document.addEventListener(g,t,!1),e.document.addEventListener(h,s,{passive:!1}),e.document.addEventListener(v,s,{passive:!1})}function I(e,t,s){e.document.removeEventListener(d,t,!1),e.document.removeEventListener(g,t,!1),e.document.removeEventListener(h,s,{passive:!1}),e.document.removeEventListener(v,s,{passive:!1})}function z(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];C(t,m,e,{passive:s}),C(t,u,e,{passive:s})}function V(e,t,o){t&&(e.classList.remove(`icon-${t}`),e.innerHTML=""),o&&(e.classList.add(`icon-${o}`),e.innerHTML=s[o])}function F(e,t){return e-t}function D(e,t){if(e.id??=Date.now(),e.showVolume??=!!Object.keys(e.clip?.audioClip?.children||[]).length,e.showIndicator??=!1,e.theme??="default",e.host??=e.clip.props.host,e.buttons??={},e.buttons.donkeyclip=!("undefined"==typeof window||!window.Donkeyclip?.clipId)&&e.buttons.donkeyclip,e.timeFormat??="ss",e.backgroundColor??="black",e.fullscreen??=!1,e.scaleToFit??=!0,e.sectionsEasing??="easeOutQuart",e.pointerEvents??=!1,e.scrollAnimation??=!1,e.onMillisecondChange??=null,e.speedValues??=[-1,0,.5,1,2],e.speed??=1,e.muted??=!1,e.maxScrollStorage??=50,e.controls??=!0,e.loop??=!1,e.volume??=1,e.currentScript??=null,e.millisecond){const s=t.clip;e.millisecond>s.duration&&(e.millisecond=s.duration),(e.millisecond<0||!isFinite(e.millisecond))&&(e.millisecond=0),t.goToMillisecond(e.millisecond)}for(const t in e.speedValues)isFinite(e.speedValues[t])||e.speedValues.splice(t,1);return e.speedValues.sort(F),e}var H=e=>{A(e);const{mcPlayer:t}=e.elements;var o;e.elements.pointerEventPanel=M(t,"--mcp-pointer-events-panel"),e.elements.playPausePanel=M(t,"--mcp-play-pause-panel"),e.elements.playPausePanelContainer=M(t,"--mcp-play-pause-panel-container"),e.elements.listenerHelper=M(t,"--mcp-listener-helper"),e.elements.loopBar=M(t,"--mcp-loopbar"),e.elements.totalBar=M(t,"--mcp-totalbar"),e.elements.indicator=M(t,"--mcp-indicator"),e.elements.loopButton=M(t,"--mcp-loop-btn"),e.elements.volumeBar=M(t,"--mcp-volumebar"),e.elements.totalTime=M(t,"--mcp-time-total"),e.elements.volumeControl=M(t,"--mcp-volume"),e.elements.volumeBtn=M(t,"--mcp-volume-btn"),e.elements.runningBar=M(t,"--mcp-runningbar"),e.elements.loopBarEnd=M(t,"--mcp-loopbar-end"),e.elements.statusButton=M(t,"--mcp-status-btn"),e.elements.speedBar=M(t,"--mcp-speed-values"),e.elements.currentTime=M(t,"--mcp-time-current"),e.elements.timeDisplay=M(t,"--mcp-time-display"),e.elements.speedButtonShow=M(t,"--mcp-speed-btn-show"),e.elements.speedButtonHide=M(t,"--mcp-speed-btn-hide"),e.elements.speedCurrent=M(t,"--mcp-speed-current"),e.elements.loopBarStart=M(t,"--mcp-loopbar-start"),e.elements.volumeCursor=M(t,"--mcp-volume-cursor"),e.elements.settingsButton=M(t,"--mcp-settings-btn"),e.elements.donkeyclipButton=M(t,"--mcp-dc-btn"),e.elements.timeSeparator=M(t,"--mcp-time-separator"),e.elements.settingsPanel=M(t,"--mcp-settings-panel"),e.elements.background=M(t,"--mcp-background"),e.elements.settingsMainPanel=M(t,"--mcp-main-settings"),e.elements.fullScreenButton=M(t,"--mcp-full-screen-btn"),e.elements.context=M(t,"--mcp-context"),e.elements.volumeBarHelper=M(t,"--mcp-volumebar"),e.elements.volumeBarActive=M(t,"--mcp-volumebar-color-active"),e.elements.settingsSpeedPanel=M(t,"--mcp-speed-settings"),e.elements.settingsShowVolume=M(t,"--mcp-settings-volume"),e.elements.settingsPointerEvents=M(t,"--mcp-settings-pointer-events"),e.elements.settingsSpeedButtonShow=M(t,"--mcp-settings-speed-show"),e.elements.settingsSpeedButtonHide=M(t,"--mcp-settings-speed-hide"),e.elements.controls=M(t,"--mcp-controls"),e.elements.volumeCheckbox=M(t,"--mcp-show-volume-checkbox"),e.elements.showVolumeCheckbox=M(t,"--mcp-show-volume-checkbox"),e.elements.showPointerEventsCheckbox=M(t,"--mcp-show-pointer-events-checkbox"),e.elements.leftButtons=M(t,"--mcp-left-buttons"),(o=e.elements).loopButton.innerHTML=s.loop,o.volumeBtn.innerHTML=s["volume-on"],o.statusButton.innerHTML=s.play,o.settingsButton.innerHTML=s.settings,o.donkeyclipButton.innerHTML=s["donkeyclip-logo"],o.fullScreenButton.innerHTML=s["expand-full"],o.speedButtonShow.innerHTML=s["angle-right"],o.speedButtonHide.innerHTML=s["angle-left"],W(e),j(e),q(e)};const A=e=>{const t=e.clip.props.host;if(t.offsetWidth||(t.style.width=e.clip.props.containerParams.width),t.offsetHeight||(t.style.height=e.clip.props.containerParams.height),t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.overflow="hidden",e.clip.props.host.style.position="relative",e.clip.props.host.style.zIndex=0,e.elements.mcPlayer=e.document.createElement("div"),e.elements.mcPlayer.id=`${e.name}`,e.elements.mcPlayer.className=`${e.className}`,e.elements.mcPlayer.innerHTML='<div class="--mcp-background"></div> <div class="--mcp-context" tabindex="0"> <div class="--mcp-pointer-events-panel"></div> <div class="--mcp-play-pause-panel"> <div class="--mcp-play-pause-panel-container"></div> </div> <div class="--mcp-listener-helper"></div> <div class="--mcp-controls"> <div class="--mcp-grad"></div> <div class="--mcp-progressbar"> <div class="--mcp-totalbar"> <div class="--mcp-loopbar"> <div class="--mcp-loopbar-color"></div> <div class="--mcp-loop-boundaries --mcp-loopbar-start"> <span></span> </div> <div class="--mcp-loop-boundaries --mcp-loopbar-end"> <span></span> </div> <div class="--mcp-runningbar"> <div class="--mcp-cursor"></div> </div> </div> </div> </div> <div class="--mcp-buttons"> <div class="--mcp-left-buttons"> <div class="--mcp-status"> <span class="--mcp-btn --mcp-status-btn icon-play"></span> <span class="--mcp-indicator">i</span> </div> <div class="--mcp-volume"> <div class="--mcp-btn --mcp-volume-btn icon-volume-on"></div> <div class="--mcp-volumebar"> <div class="--mcp-volumebar-color"> <div class="--mcp-volumebar-color-active"> <div class="--mcp-volume-cursor"></div> </div> </div> </div> </div> <div class="--mcp-time-display"> <span class="--mcp-time-current">00:00</span> <span class="--mcp-time-separator">/</span> <span class="--mcp-time-total">00:00</span> </div> </div> <div class="--mcp-right-buttons"> <div class="--mcp-loop-btn-container"> <div class="--mcp-btn --mcp-loop-btn icon-loop"></div> </div> <div class="--mcp-btn --mcp-settings-btn icon-settings"></div> <div class="--mcp-btn --mcp-dc-btn icon-donkeyclip-logo"></div> <div class="--mcp-btn --mcp-full-screen-btn icon-expand-full"></div> </div> </div> </div> <div class="--mcp-settings-panel" tabindex="0"> <ul class="--mcp-main-settings"> <li class="--mcp-settings-pointer-events"> <p>Pointer events</p> <div> <div class="switch settings-switch"> <input class="--mcp-show-pointer-events-checkbox" type="checkbox"> <span class="slider round"></span> </div> </div> </li> <li class="--mcp-settings-volume"> <p>Show volume</p> <div> <div class="switch settings-switch"> <input class="--mcp-show-volume-checkbox" type="checkbox"> <span class="slider round"></span> </div> </div> </li> <li class="--mcp-settings-speed-show"> <p>Playback speed</p> <div> <span class="--mcp-speed-current"></span> <div class="--mcp-btn --mcp-speed-btn --mcp-speed-btn-show icon-angle-right"></div> </div> </li> </ul> <ul class="--mcp-speed-settings"> <li class="--mcp-settings-speed-hide"> <div class="--mcp-btn --mcp-speed-btn --mcp-speed-btn-hide icon-angle-left"></div> <p class="--mcp-speed-runtime">Playback speed</p> </li> <li class="--mcp-no-hover"> <ul class="--mcp-speed-values"></ul> </li> </ul> </div> </div> ',"string"==typeof e.options.host){const t=e.document.querySelectorAll(e.options.host);for(const s in t)isNaN(s)||t[s].appendChild(e.elements.mcPlayer)}else e.options.host.appendChild(e.elements.mcPlayer)},W=e=>{e.elements.volumeBarActive.style.width=100*e.settings.volume+"%",e.elements.currentTime.innerHTML=e.timeFormat(0),e.elements.totalTime.innerHTML=e.timeFormat(e.clip.duration),e.elements.timeSeparator.innerHTML="/",e.elements.settingsPanel.classList.add("m-fadeOut",`${e.name}-hide`),e.options.backgroundColor&&(e.elements.background.style.background=e.options.backgroundColor),"scroller"===e.options.type&&(window.document.body.style.overscrollBehaviorY="contain"),e.options.showIndicator?(e.elements.indicator.style.display=void 0,e.elements.statusButton.style.width="35px",e.elements.statusButton.style.height="20px",e.elements.statusButton.style.bottom="5px"):e.elements.indicator.style.display="none",e.elements.indicator.innerHTML=e.clip.runTimeInfo.state,e.elements.settingsSpeedPanel.style.display="none",e.elements.loopBarStart.classList.add("m-fadeOut",`${e.name}-hide`),e.elements.loopBarEnd.classList.add("m-fadeOut",`${e.name}-hide`),e.elements.volumeCheckbox.checked=e.options.showVolume,e.elements.showPointerEventsCheckbox.checked=e.options.pointerEvents,e.options.pointerEvents?e.elements.pointerEventPanel.style.pointerEvents="none":e.elements.pointerEventPanel.style.pointerEvents="auto",e.options.showVolume||e.elements.volumeControl.classList.toggle("m-fadeOut")},j=e=>{for(const t in e.options.speedValues){if(0==e.options.speedValues[t])continue;const s="check-solid",o="--mcp-selected",n=e.document.createElement("li");n.className="--mcp-speed-value",n.dataset.speedValue=e.options.speedValues[t];const i=e.document.createElement("span");n.append(i);const l=e.document.createElement("p"),a=1==e.options.speedValues[t];l.innerHTML=a?"Normal":e.options.speedValues[t],l.dataset.zone=t,l.classList.add("--mcp-speed-value-item"),(e.options.speedValues[t]==e.options.speed??e.clip.speed)&&(V(i,null,s),l.classList.add(o)),n.append(l),e.elements.speedBar.append(n),n.onclick=function(){e.options.speed=e.options.speedValues[t],e.clip.speed=e.options.speedValues[t],e.elements.speedCurrent.innerHTML=1==e.clip.speed?"Normal":e.clip.speed;V(M(e.elements.mcPlayer,"icon-check-solid"),s),V(i,null,s),M(e.elements.mcPlayer,o).classList.remove(o),l.classList.add(o)}}},q=e=>{!1===e.options.buttons.fullScreen&&e.elements.fullScreenButton.remove(),!1===e.options.buttons.settings&&e.elements.settingsButton.remove(),e.options.buttons.donkeyclip||e.elements.donkeyclipButton.remove(),!1===e.options.buttons.loop&&e.elements.loopButton.remove()};const N="--mcp-force-show-controls",U="playing",$="volume-off",R="volume-on";var O='.--mc-player.theme-default{--activeColor:136,136,136;--defaultColor:255,255,255;--backgroundColor:29,31,37,1;--backgroundSettingsColor:rgba(29,31,37,0.9);--loopBarColor:rgba(var(--activeColor),0.2);--grad-display:none;--grad-color:0,0,0}.--mc-player.theme-yellow{--activeColor:255,235,59;--defaultColor:255,255,255;--backgroundColor:29,31,37,1;--backgroundSettingsColor:rgba(29,31,37,0.9);--loopBarColor:rgba(var(--activeColor),0.2);--grad-display:none;--grad-color:0,0,0}.--mc-player.theme-dark{--activeColor:136,136,136;--defaultColor:136,136,136;--backgroundColor:0,0,0,1;--backgroundSettingsColor:rgba(0,0,0,0.9);--loopBarColor:rgba(var(--activeColor),0.2);--grad-display:none;--grad-color:0,0,0}.--mc-player.theme-whiteGold{--activeColor:161,127,26;--defaultColor:136,136,136;--backgroundColor:245,245,245,1;--backgroundSettingsColor:hsla(0,0%,96%,0.9);--loopBarColor:rgba(var(--activeColor),0.2);--grad-display:none;--grad-color:0,0,0}.--mc-player.theme-darkGold{--activeColor:161,127,26;--defaultColor:136,136,136;--backgroundColor:0,0,0,1;--backgroundSettingsColor:rgba(0,0,0,0.9);--loopBarColor:rgba(var(--activeColor),0.2);--grad-display:none;--grad-color:0,0,0}.--mc-player.theme-transparent{--activeColor:255,0,0;--defaultColor:239,238,236;--backgroundColor:0,0,0,0;--backgroundSettingsColor:rgba(0,0,0,0.9);--loopBarColor:rgba(var(--defaultColor),0.2);--grad-display:block;--grad-color:0,0,0}.--mc-player.theme-green{--activeColor:0,184,139;--defaultColor:255,255,255;--backgroundColor:29,31,37,1;--backgroundSettingsColor:rgba(29,31,37,0.9);--loopBarColor:rgba(var(--activeColor),0.2);--grad-display:none;--grad-color:0,0,0}.--mc-player.theme-blue{--activeColor:0,153,225;--defaultColor:255,255,255;--backgroundColor:29,31,37,1;--backgroundSettingsColor:rgba(29,31,37,0.9);--loopBarColor:rgba(var(--activeColor),0.2);--grad-display:none;--grad-color:0,0,0}.--mc-player.theme-donkeyclip{--activeColor:0,153,225;--defaultColor:255,255,255;--backgroundColor:0,0,0,0;--backgroundSettingsColor:rgba(29,31,37,0.9);--loopBarColor:rgba(var(--activeColor),0.2);--grad-display:block;--grad-color:24,25,29}.--mc-player.theme-donkeyclipDark{--activeColor:0,153,225;--defaultColor:255,255,255;--backgroundColor:0,0,0,0;--backgroundSettingsColor:rgba(29,31,37,0.9);--loopBarColor:rgba(var(--activeColor),0.2);--grad-display:block;--grad-color:22,22,26}.--mc-player,.--mc-player *{user-select:none!important;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.--mc-player *{box-sizing:border-box;color:rgb(var(--defaultColor));cursor:default;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:13px}.--mc-player svg{width:22px}.--mcp-settings-panel:focus{outline:none}.--mc-player *{outline:none!important}.--mcp-settings-panel svg{width:10px}.--mc-player svg,.--mc-player svg *{fill:rgb(var(--defaultColor))!important}.--mc-player{left:0;overscroll-behavior:none;top:0}.--mc-player,.--mcp-background,.--mcp-context{height:100%;pointer-events:none;position:absolute;width:100%}.--mcp-background,.--mcp-context{display:flex;flex-direction:column}.--mcp-background{background:#000;z-index:-1000}.--mcp-pointer-events-panel.initial{min-height:100%;width:100%;z-index:100}.--mcp-pointer-events-panel{min-height:calc(100% - 50px);width:100%}.--mcp-pointer-events-panel.loading{align-items:center;background:rgba(0,0,0,.8);display:flex;justify-content:center}.--mcp-grad{background-image:linear-gradient(rgba(var(--grad-color),.001),rgba(var(--grad-color),.004),rgba(var(--grad-color),.007),rgba(var(--grad-color),.01),rgba(var(--grad-color),.04),rgba(var(--grad-color),.07),rgba(var(--grad-color),.1),rgba(var(--grad-color),.15),rgba(var(--grad-color),.2),rgba(var(--grad-color),.25),rgba(var(--grad-color),.3),rgba(var(--grad-color),.35),rgba(var(--grad-color),.4),rgba(var(--grad-color),.45),rgba(var(--grad-color),.5),rgba(var(--grad-color),.55),rgba(var(--grad-color),.6),rgba(var(--grad-color),.65),rgba(var(--grad-color),.7),rgba(var(--grad-color),.75),rgba(var(--grad-color),.8),rgba(var(--grad-color),.88));bottom:0;display:var(--grad-display);height:200px;left:0;pointer-events:none!important;position:absolute;width:100%;z-index:0}.--mc-player:hover .--mcp-controls,.--mcp-controls:active{opacity:1!important}.--mcp-controls{background:rgba(var(--backgroundColor));display:flex;flex-direction:column;height:50px;opacity:0;padding:0 15px;pointer-events:auto;position:relative;transition:all .2s ease;z-index:0}.--mcp-controls *{-webkit-user-select:none!important;-moz-user-select:none!important;user-select:none!important}.--mcp-play-pause-panel #play-svg{margin-left:4px}.--mcp-always-show-controls,.--mcp-force-show-controls{opacity:1!important}.--mcp-progressbar{align-items:center;display:flex;justify-content:center;position:relative}.--mcp-loopbar,.--mcp-runningbar,.--mcp-totalbar{height:5px;position:relative}.--mcp-cursor{background-color:rgb(var(--activeColor));border-radius:100%;height:14px;position:absolute;right:-8px;top:-5px;width:14px;z-index:10}.--mcp-totalbar{background-color:rgba(var(--defaultColor),.3);min-width:100%}.--mcp-loopbar{padding:10px 0;position:relative;top:-10px;width:100%}.--mcp-loopbar-color{background-color:var(--loopBarColor);bottom:5px;height:5px;left:0;position:absolute;width:100%}.--mcp-runningbar{background-color:rgb(var(--activeColor));width:0}.--mcp-buttons,.--mcp-left-buttons,.--mcp-left-buttons>div,.--mcp-right-buttons,.--mcp-right-buttons>div{align-items:center;display:flex;gap:5px;z-index:1}.--mcp-left-buttons{flex:1}.--mcp-buttons,.--mcp-left-buttons,.--mcp-right-buttons{gap:20px;height:100%}.--mcp-left-buttons{justify-content:flex-start}.--mcp-right-buttons{justify-content:flex-end}.--mcp-prevent-point-events{z-index:100}.--mcp-play-pause-panel,.--mcp-prevent-point-events{height:100%;left:0;position:absolute;top:0;width:100%}.--mcp-play-pause-panel{align-items:center;background-position:50%!important;background-repeat:no-repeat!important;background-size:contain!important;display:flex;justify-content:center;pointer-events:none;z-index:2}.--mcp-play-pause-panel.initial{background-color:#000}.--mcp-play-pause-panel.initial svg{height:32px;width:32px}.--mcp-play-pause-panel.initial .--mcp-play-pause-panel-container{height:80px;width:80px}.--mcp-play-pause-panel.hide{opacity:0}.run-animation-play{animation:scale-and-opaque .8s 1}.run-animation-pause{animation:scale-and-opaque1 .8s 1}.run-animation-idle{animation:scale-and-opaque2 .8s 1}.--mcp-play-pause-panel-container{align-items:center;background-color:#000000c7;border-radius:100%;display:flex;height:60px;justify-content:center;width:60px}.--mcp-play-pause-panel .--mcp-play-pause-panel-container{animation-duration:.8s;transform-origin:center center}@keyframes scale-and-opaque{0%{opacity:.5;transform:scale(1)}to{opacity:0;transform:scale(2)}}@keyframes scale-and-opaque1{0%{opacity:.5;transform:scale(1)}to{opacity:0;transform:scale(2)}}@keyframes scale-and-opaque2{0%{opacity:.5;transform:scale(1)}to{opacity:0;transform:scale(2)}}.--mcp-loop-boundaries{display:flex!important;position:relative}.--mcp-loop-boundaries span{background-color:#aeaeae;border-radius:100%;height:13px;left:-6px;position:absolute;top:-4px;width:13px;z-index:100}.--mcp-loopbar-start{left:0}.--mcp-loopbar-end{left:100%}.--mc-player svg,.--mc-player svg *,.--mcp-btn,.--mcp-cursor,.--mcp-loop-boundaries,.--mcp-loopbar,.--mcp-loopbar-color,.--mcp-runningbar,.--mcp-status-btn,.--mcp-volume *{cursor:pointer}.--mcp-btn{font-size:20px}.--mcp-btn,.--mcp-status-btn{align-items:center;display:flex;justify-content:center}.--mcp-status-btn{gap:3px}.--mcp-indicator{font-size:12px}.--mcp-listener-helper{pointer-events:none}.--mcp-volume-btn{font-size:15px}.--mcp-volumebar{align-items:center;display:flex;height:100%;justify-content:center;padding-left:0;padding-right:0;transition:all .2s ease;width:0}.--mcp-volume{height:100%}.--mcp-volume:hover{padding-right:10px}.--mcp-volume:active .--mcp-volumebar,.--mcp-volume:hover .--mcp-volumebar{padding-left:5px;width:52px}.--mcp-volume:active .--mcp-volume-cursor,.--mcp-volume:hover .--mcp-volume-cursor{display:block}.--mcp-btn:before{color:var(--defaultColor)!important}.--mcp-btn:before:hover{filter:brightness(40)}.--mcp-settings-speed-hide{border-bottom:1px solid hsla(0,0%,100%,.2)}ul.--mcp-speed-values{align-items:center;display:flex;justify-content:center;padding:0}ul.--mcp-speed-values li,ul.--mcp-speed-values li p{width:100%}.--mcp-settings-panel ul{display:flex;flex:1;flex-direction:column;list-style-type:none;margin:0;padding:5px 0}.--mcp-settings-panel ul li{align-items:center;cursor:pointer;display:flex;flex:1;min-height:40px;padding:0 21px}.--mcp-settings-panel ul li *{cursor:pointer}.--mcp-settings-panel ul li:not(.--mcp-no-hover):hover{background-color:rgba(var(--activeColor),.2)}.--mcp-settings-panel ul li>div{align-items:center;display:flex;flex:1;gap:10px;justify-content:flex-end;width:48px}.--mcp-settings-panel{background-color:var(--backgroundSettingsColor);bottom:60px;pointer-events:auto;position:absolute;right:15px;transition:all .2s ease;width:251px;z-index:1000}.--mcp-speed-values{padding:0}.--mcp-no-hover{padding:0!important}.--mcp-speed-value-item:not(.--mcp-selected){padding-left:15px}.--mcp-speed-value-item.--mcp-selected{padding-left:10px}.--mcp-speed-value .icon-check-solid{margin-left:-5px}.--mcp-settings-panel ul.--mcp-speed-settings li>div{flex:unset;justify-content:flex-start;width:20px}.--mcp-main-settings ul li>p{align-items:center;display:flex;flex:1;padding-left:10px}.--mc-player .switch{display:inline-block;height:14px;position:relative;width:36px}.--mc-player .switch input{display:none}.--mc-player .settings-switch:after{clear:both}.--mc-player .slider{background-color:#999;bottom:0;cursor:pointer;left:0;position:absolute;right:0;top:0;transition:.4s}.--mc-player .slider:before{background-color:#cfcfcf;bottom:-3px;content:"";height:20px;left:0;position:absolute;transition:.4s;width:20px}.--mc-player input:checked+.slider{background-color:rgb(var(--activeColor))}.--mc-player input:focus+.slider{box-shadow:0 0 1px rgb(var(--activeColor))}.--mc-player input:checked+.slider:before{background-color:#fff;transform:translateX(16px)}.--mc-player .slider.round{border-radius:34px}.--mc-player .slider.round:before{border-radius:50%}.--mc-player .m-fadeOut{display:none!important;opacity:0!important;visibility:hidden!important}.--mc-player .m-fadeIn{display:unset;opacity:1!important;visibility:visible!important}.--mcp-volume-cursor{background-color:rgb(var(--defaultColor));border-radius:100%;display:none;height:14px;position:absolute;right:-8px;width:14px}.--mcp-volumebar-color{background-color:rgba(var(--defaultColor),.3);height:3px;width:100%}.--mcp-volumebar-color-active{align-items:center;background-color:rgb(var(--defaultColor));display:flex;height:100%;justify-content:center;position:relative;width:100%}.lds-ring{aspect-ratio:1/1;display:inline-block;max-width:64px;position:relative;width:18%}.lds-ring div{animation:lds-ring 1.5s cubic-bezier(.5,.5,.5,.8) infinite;aspect-ratio:1/1;border:3px solid transparent;border-radius:50%;border-top-color:#fff;box-sizing:border-box;display:block;margin:3px;position:absolute;width:100%}.lds-ring div:first-child{animation-delay:-.3s}.lds-ring div:nth-child(2){animation-delay:-.2s}.lds-ring div:nth-child(3){animation-delay:-.1s}@keyframes lds-ring{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}';function G(e){e.settings.loopActivated=!e.settings.loopActivated,e.eventBroadcast(l,e.settings.loopActivated),e.elements.loopButton.classList.toggle("svg-selected"),e.elements.loopBarStart.classList.toggle("m-fadeOut"),e.elements.loopBarEnd.classList.toggle("m-fadeOut"),e.elements.loopBarStart.classList.toggle("m-fadeIn"),e.elements.loopBarStart.classList.toggle(`${e.name}-hide`),e.elements.loopBarEnd.classList.toggle("m-fadeIn"),e.elements.loopBarEnd.classList.toggle(`${e.name}-hide`),e.settings.needsUpdate=!0,e.settings.loopActivated||(e.elements.loopBar.style.left="0%",e.elements.loopBar.style.width="100%",e.settings.loopStartMillisecond=0,e.settings.loopEndMillisecond=e.clip.duration,e.settings.loopLastPositionXPxls=0,e.settings.loopLastPositionXPercentage=0,e.elements.runningBar.style.width=e.clip.runTimeInfo.currentMillisecond/e.clip.duration*100+"%")}const X=e=>{e.elements.showPointerEventsCheckbox.checked?(e.elements.showPointerEventsCheckbox.checked=!1,e.elements.mcPlayer.style.pointerEvents="none",e.elements.pointerEventPanel.style.pointerEvents="auto",e.elements.controls.style.pointerEvents="auto",e.elements.settingsPanel.style.pointerEvents="auto"):(e.elements.showPointerEventsCheckbox.checked=!0,e.options.pointerEvents=!1,e.elements.mcPlayer.style.pointerEvents="none",e.elements.pointerEventPanel.style.pointerEvents="none",e.elements.controls.style.pointerEvents="auto",e.elements.settingsPanel.style.pointerEvents="auto"),e.eventBroadcast("show-pointer-events-change",e.elements.showPointerEventsCheckbox.checked)},J=e=>{e.elements.volumeControl.classList.toggle("m-fadeOut"),e.elements.showVolumeCheckbox.checked?e.elements.showVolumeCheckbox.checked=!1:e.elements.showVolumeCheckbox.checked=!0,e.eventBroadcast(r,e.elements.showVolumeCheckbox.checked)};function Y(e,t,s){const i=e.elements;void 0!==s&&(!1===s?(i.volumeBarActive.style.width=100*e.settings.volume+"%",e.clip.setVolume(e.settings.previousVolume),e.settings.volumeMute=!1,V(i.volumeBtn,$,R)):!0===s&&(e.settings.volumeMute=!0,i.volumeBarActive.style.width="0%",e.clip.setVolume(0),V(i.volumeBtn,R,$)),e.options.muted=e.settings.volumeMute,e.eventBroadcast(n,e.settings.volumeMute)),void 0!==t&&(e.settings.volume=t,e.settings.volume>0&&(e.settings.previousVolume=t),i.volumeBarActive.style.width=100*e.settings.volume+"%",e.clip.setVolume(e.settings.volume),e.settings.volume>0?(e.settings.volumeMute=!1,V(i.volumeBtn,$,R)):0===e.settings.volume&&(e.settings.volumeMute=!0,V(i.volumeBtn,R,$)),e.options.volume=e.settings.volume,e.eventBroadcast(o,e.settings.volume),e.eventBroadcast(n,e.settings.volumeMute))}const Q={passive:!0};var K=e=>{C(window,"wheel",(t=>{e.stepper(t.deltaY)})),C(window,"touchmove",(t=>{const s=t.touches[0].clientY;e.lastY??=s;const o=-(s-e.lastY);e.stepper(o),e.lastY=s}),Q),C(window,"touchend",(()=>{e.lastY=null}),Q),C(window,"touchstart",(()=>{e.cancelAnimation(),e.lastY=null}),Q)};const Z={default:"theme-default",transparent:"theme-transparent",whiteGold:"theme-whiteGold",darkGold:"theme-darkGold",green:"theme-green",blue:"theme-blue",dark:"theme-dark",yellow:"theme-yellow",donkeyclip:"theme-donkeyclip",donkeyclipDark:"theme-donkeyclipDark"};function _(e){V(e,"spinner",null),e.classList.remove("loading")}const ee=[];return class{constructor(e){this.elements={},this.clip=e.clip,this.options=D(e,this),this.document=this.options.host.ownerDocument,this.className=t,this.id=this.options.id,this.name=t,this.clipClass=e.clipClass,this.state=this.clip.runTimeInfo.state,this.listeners={},this.settings={volume:1,journey:null,previousVolume:1,volumeMute:!1,needsUpdate:!0,resizeLoop:!1,loopJourney:!1,loopActivated:!1,requestingLoop:!1,playAfterResize:!1,loopStartMillisecond:0,loopLastPositionXPxls:0,loopLastPositionXPercentage:0,loopEndMillisecond:this.clip.duration,controls:!0},H(this),this.setTheme(),this.setSpeed(),this.subscribeToTimer(),this.subscribeToDurationChange(),this.addEventListeners(),this.scaleClipHost(),this.eventBroadcast(c,this.state),"scroller"===this.options.type&&(this.timeBucket=0,this.timeProgress=0,this.options.sections?.sort(F));const s=new ResizeObserver((()=>{window.innerWidth<450?this.elements.timeDisplay.style.display="none":this.elements.timeDisplay.style.display="block",this.options.scaleToFit&&this.scaleClipHost()}));this.changeSettings(e,!0),s.observe(this.options.host),this.options.autoPlay&&this.play(),window.clip=this.clip}play(){this.clip.play()}pause(){this.clip.pause()}enterFullScreen(){y(this.clip.props.host)}exitFullScreen(){f()}changeSettings(e,t){(e=D(Object.assign({},this.options,e),this)).clip!==this.options.clip&&(t=!0,this.clip=e.clip,this.options.clip=e.clip),!1===e.controls?this.elements.mcPlayer.style.display="none":!0===e.controls&&(this.elements.mcPlayer.style.display="block");const s={loop:()=>G(this),fullscreen:()=>b(this),muted:()=>Y(this,void 0,e.mute),volume:()=>Y(this,e.volume),speed:()=>function(e,t){t=parseFloat(t)||1,e.eventBroadcast(i,t);const s=1==t?"Normal":t;e.clip.executionSpeed=t,e.elements.speedCurrent.innerHTML=s}(this,e.speed),scaleToFit:()=>{this.options.scaleToFit=e.scaleToFit,this.scaleClipHost()},showVolume:()=>{return e=this,void("showPointerEvents"===(t="showVolume")?X(e):"showVolume"===t&&J(e));var e,t},type:()=>{"scroller"===e.type&&K(this)},theme:()=>{this.options.theme=e.theme,this.setTheme()},overflow:()=>{this.clip.props.host.shadowRoot.children[0].style.overflow=e.overflow},outline:()=>{this.clip.props.host.shadowRoot.children[0].style.outline=e.outline},visible:()=>{"always"==e.visible?this.elements.controls.classList.add("--mcp-always-show-controls"):"normal"==e.visible&&this.elements.controls.classList.remove("--mcp-always-show-controls")}},o=["fullscreen","muted","volume","speed","scaleToFit","loop","overflow","outline","visible"];for(const n in s)void 0!==e[n]&&(this.options[n]!==e[n]||t&&!1!==this.options[n]&&o.includes(n))&&s[n]();this.options=Object.assign({},this.options,e)}scaleClipHost(){if(this.options.scaleToFit){const e=this.clip.props,t=function(e,t){let s,o,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return{scale:1,position:{}};e.width&&(s=L(e.width)),e.height&&(o=L(e.height));let i=1,l=1;"px"===s?.unit&&s.number!==t.width&&(i=t.width/s.number),"px"===o?.unit&&o.number!==t.height&&(l=t.height/o.number);const a=(n?l>i:l<=i)?l:i,r={};if(null!=s){let e=s.number*a;"px"!==s.unit&&(e*=t.width/100);const o=t.width-e;r.left=o/2}if(null!=o){let e=o.number*a;"px"!==o.unit&&(e*=t.height/100);const s=t.height-e;r.top=s/2}return{scale:a,position:r}}(e.containerParams,{width:e.host.offsetWidth,height:e.host.offsetHeight-("always"==this.options.visible?50:0)},"cover"===this.options.scaleToFit);this.clip.realClip.rootElement.style.transform=`scale(${t.scale}`,this.clip.realClip.rootElement.style.left=`${t.position.left}px`,this.clip.realClip.rootElement.style.top=`${t.position.top}px`}else this.clip.realClip.rootElement.style.transform="scale(1)",this.clip.realClip.rootElement.style.left="0px",this.clip.realClip.rootElement.style.top="0px";this.eventBroadcast(a,this.options.scaleToFit)}goToMillisecond(e){let{before:t,after:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e>this.clip.duration?e=this.clip.duration:e<0&&(e=0),setTimeout((()=>{const o=this.clip;o.id&&(t&&o[t](),this.settings.journey=B.startJourney(o),this.settings.journey.station(e),this.settings.journey.destination(),s&&o[s]())}),0)}createLoop(e,t){this.settings.loopStartMillisecond=e,this.settings.loopEndMillisecond=t,this.elements.loopBar.style.left=e/this.clip.duration*100+"%",this.elements.loopBar.style.width=(t-e)/this.clip.duration*100+"%",this.goToMillisecond(e),this.elements.runningBar.style.width="0%",!this.settings.loopActivated&&G(this)}calculateMinMaxOfTimeProgress(){this.timeProgress>=this.clip.duration&&(this.timeProgress=this.clip.duration),this.timeProgress<=0&&(this.timeProgress=0)}requestAnimation(){this.requestAnimationID=window.requestAnimationFrame(this.animateTimeBucket.bind(this))}cancelAnimation(){window.cancelAnimationFrame(this.requestAnimationID),this.requestAnimationID=null}removeTimeFromBucket(){const e=Math.log(this.timeBucket),t=Math.pow(e,2);return this.timeBucket-=this.options.scrollAnimation?e:t,t}addTimeToProgress(e){this.timeProgress+=e*this.multiplier*this.clip.speed}checkIfBucketHasTime(){return!(this.timeBucket<=0)||(this.requestAnimationID=null,!1)}calculateJourneyPosition(t){const s=e.utils.easings[this.options.sectionsEasing](t);return this.startPosition+s*this.options.speed*this.multiplier*this.endAnimationTime}animateTimeBucket(){if(this.checkIfBucketHasTime){if(this.addTimeToProgress(this.removeTimeFromBucket()),this.calculateMinMaxOfTimeProgress(),this.options.sections){const e=(Date.now()-this.startAnimationTime)/this.endAnimationTime;if(e>=1||0===this.endAnimationTime)return this.cancelAnimation();const t=this.calculateJourneyPosition(e);this.goToMillisecond(Math.ceil(t))}else this.goToMillisecond(this.timeProgress);this.requestAnimation()}}setUpTimeBucket(e){const t=e>0?1:-1;e=Math.ceil(Math.abs(e))*t,this.timeBucket+=Math.abs(e),t!=this.multiplier&&(this.timeBucket=Math.abs(e)),this.timeBucket>this.options.maxScrollStorage&&(this.timeBucket=this.options.maxScrollStorage),this.multiplier=t}getSectionTime(e){let t;const s=this.options.sections;if(e>0){const e=this.startPosition+this.timeBucket;for(let o=0;o<s.length;o++)if(e<s[o]){t=o;break}t??=s.length-1}else{const e=this.startPosition-this.timeBucket;for(let o=s.length-1;o>=0;o--)if(e>s[o]){t=o;break}t??=0}return t}initializeSections(){this.startAnimationTime=Date.now(),this.startPosition=this.clip.runTimeInfo.currentMillisecond,this.currentSectionIndex=this.getSectionTime(this.multiplier),this.endAnimationTime=Math.abs(this.startPosition-this.options.sections[this.currentSectionIndex])}stepper(e){this.setUpTimeBucket(e),this.options.sections&&this.initializeSections(),this.requestAnimationID||this.animateTimeBucket()}millisecondChange(e,t,s,o){let n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const{totalBar:i,loopBar:l}=this.elements;if(this.state!==t&&(this.state=t,this.eventBroadcast(c,t)),!this.settings.needsUpdate)return this.clip.pause(),1;this.settings.loopActivated&&this.clip.speed&&this.calculateJourney(e);const a=this.clip.duration,r=e-a*l.offsetLeft/i.offsetWidth,p=a/i.offsetWidth*l.offsetWidth;o&&this.goToMillisecond(e,{after:this.settings.playAfterResize?"play":null}),this.elements.runningBar.style.width=r/p*100+"%";const d=this.timeFormat(e);this.elements.currentTime.innerHTML!==d&&(this.elements.currentTime.innerHTML=d),this.options.onMillisecondChange&&n&&this.options.onMillisecondChange(e)}calculateJourney(e){const{loopEndMillisecond:t,loopStartMillisecond:s}=this.settings,o=e>t||e===this.clip.duration,n=e<s||0===e,i=this.clip.speed>0;if(this.clip.runTimeInfo.state===U){if(i)return!!o&&(this.goToMillisecond(s+1,{after:"play"}),!0);if(n)return this.goToMillisecond(t-1,{after:"play"}),!0}return!1}broadcastNotPlaying(e){var t;this.elements.controls.classList.value.includes(N)||this.elements.controls.classList.toggle(N),V(this.elements.statusButton,"pause","play"),this.elements.indicator.innerHTML=`${e.charAt(0).toUpperCase()+e.slice(1)}`,"blocked"==e?(V(t=this.elements.pointerEventPanel,null,"spinner"),t.classList.add("loading")):"idle"!==e&&_(this.elements.pointerEventPanel)}changeInitParams(t){const s={result:!0};this.clip.pause();const o=this.clip?.exportLiveDefinition();o.props.host=this.clip.props.host;let n=this.clip.runTimeInfo.currentMillisecond;const i=this.clip.runTimeInfo.state===U,l=JSON.parse(JSON.stringify(o.props.initParams||{}));o.props.initParams=t,this.clip.realClip.context.unmount();for(const e in this.clip)delete this.clip[e];let a;try{if(a=e.utils.clipFromDefinition(o),a.nonBlockingErrorClip||a?.errors?.length)throw"Error: Params Error: Clip cannot be created!"}catch(t){s.result=!1,s.clip=a,console.error(t),o.props.initParams=l,a=e.utils.clipFromDefinition(o)}return this.clip=a,this.options.clip=this.clip,this.elements.totalTime.innerHTML=this.timeFormat(this.clip.duration),this.changeSettings(this.options,!0),this.subscribeToTimer(),this.subscribeToDurationChange(),n>this.clip.duration&&(n=this.clip.duration),this.goToMillisecond(n),i&&this.clip.play(),s}broadcastPlaying(e){_(this.elements.pointerEventPanel),this.elements.controls.classList.value.includes(N)&&this.elements.controls.classList.toggle(N),this.elements.indicator.innerHTML="Playing",V(this.elements.statusButton,"play","pause"),e===U&&(this.clip.runTimeInfo.currentMillisecond===this.clip.duration&&this.clip.speed>=0?this.goToMillisecond(1,{after:"play"}):(this.clip.runTimeInfo.currentMillisecond===this.clip.duration||0===this.clip.runTimeInfo.currentMillisecond)&&this.clip.speed<0&&this.goToMillisecond(this.clip.duration-1,{after:"play"}))}broadcastDurationChange(){this.elements.totalTime.innerHTML=this.timeFormat(this.clip.duration),this.settings.loopEndMillisecond=this.clip.duration,this.elements.pointerEventPanel.innerHTML="",this.millisecondChange(this.clip.runTimeInfo.currentMillisecond)}broadcastVolumeChange(e){this.options.volume=e,this.options.currentScript.dataset.volume=e}broadcastSpeedChange(e){this.options.speed=e,this.options.currentScript.dataset.speed=e}broadcastMuteChange(e){if(e)return this.options.muted=!0,void(this.options.currentScript.dataset.muted="");this.options.muted=!1,delete this.options.currentScript.dataset.muted}broadcastLoopChange(e){if(e)return this.options.loop=!0,void(this.options.currentScript.dataset.loop="");this.options.loop=!1,delete this.options.currentScript.dataset.loop}broadcastScaleChange(e){if(e)return this.options.scaleToFit=e,void(this.options.currentScript.dataset.scaleToFit=e);this.options.scaleToFit=!1,delete this.options.currentScript.dataset.scaleToFit}broadcastShowVolumeChange(e){if(e)return this.options.showVolume=!0,void(this.options.currentScript.dataset.showVolume="");this.options.showVolume=!1,delete this.options.currentScript.dataset.showVolume}broadcastToScript(e,t){e===o?this.broadcastVolumeChange(t):e===i?this.broadcastSpeedChange(t):e===n?this.broadcastMuteChange(t):e===l?this.broadcastLoopChange(t):e===a?this.broadcastScaleChange(t):e===r&&this.broadcastShowVolumeChange(t)}calculateThumbnail(e){const t=this.options.thumbnail||this.options.thumbnailColor,s=0===this.clip.runTimeInfo.currentMillisecond&&this.clip.speed>0,o=this.options.autoPlay;if("idle"===e){if(o)return void this.elements.playPausePanel.classList.add("hide");if(s)return t?(w(this.elements.playPausePanelContainer),this.elements.playPausePanel.style.backgroundColor=this.options.thumbnailColor||"black",this.elements.playPausePanel.style.backgroundImage=this.options.thumbnail&&`url(${this.options.thumbnail})`,this.elements.playPausePanel.classList.add("initial"),void this.elements.pointerEventPanel.classList.add("initial")):void this.elements.playPausePanel.classList.add("hide")}this.elements.playPausePanel.style.backgroundColor="transparent",this.elements.playPausePanel.style.backgroundImage="none",this.elements.pointerEventPanel.classList.remove("initial"),this.elements.playPausePanel.classList.remove("initial")}eventBroadcast(e,t){if(e===c){this.options.currentScript&&(this.options.currentScript.dataset.status=t),this.calculateThumbnail(t);["paused","idle","transitional","armed","blocked"].includes(t)?this.broadcastNotPlaying(t):this.broadcastPlaying(t)}else e===p?this.broadcastDurationChange():this.options.currentScript&&this.broadcastToScript(e,t)}subscribeToDurationChange(){this.clip.subscribeToDurationChange(this.subscribeToDurationChangeCallback.bind(this))}subscribeToDurationChangeCallback(){this.eventBroadcast(p)}subscribeToTimer(){this.clip.subscribe(this.id,this.millisecondChange.bind(this))}handleDragStart(){this.settings.needsUpdate=!0,this.settings.journey=B.startJourney(this.clip)}timeFormat(e){if("ss"!==this.options.timeFormat)return e;const t=e-ee[0];if(0<t&&t<1e3)return ee[1];const s=e/1e3/60/60,o=s%1*60,n=o%1*60,i=("0"+parseInt(s.toFixed(5))).slice(-2),l=`${"00"===i?"":i+":"}${("0"+parseInt(o.toFixed(5))).slice(-2)}:${("0"+parseInt(n.toFixed(5))).slice(-2)}`;return(null==ee[0]||e-ee[0]<2e3)&&(ee[0]=1e3*Math.floor(e/1e3),ee[1]=l),l}handleDrag(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];isFinite(e)||(e=0);const{loopBar:s,totalBar:o,runningBar:n,currentTime:i}=this.elements,l=e+s.offsetLeft,a=Math.round(this.clip.duration*l/o.offsetWidth);i.innerHTML=this.timeFormat(a),n.style.width=e/s.offsetWidth*100+"%",this.settings.journey.station(a),this.options.onMillisecondChange&&t&&this.options.onMillisecondChange(a)}handleDragEnd(){this.settings.journey.destination()}createProgressDrag(e){this.handleDragStart(),this.handleDrag(e),this.handleDragEnd()}addEventListeners(){var e;(e=this).listeners.onCursorMoveLoopEnd=t=>{t.stopPropagation(),S()&&t.preventDefault();let s=(t.clientX||((t.touches||[])[0]||{}).clientX)-e.elements.totalBar.getBoundingClientRect().left;s<0?s=0:s>e.elements.totalBar.offsetWidth&&(s=e.elements.totalBar.offsetWidth),e.elements.runningBar.offsetWidth>=e.elements.loopBar.offsetWidth&&(e.elements.runningBar.style.width=e.elements.loopBar.offsetWidth+"px"),e.settings.loopLastPositionXPxls-s<0?e.elements.loopBar.style.width=Math.abs(e.settings.loopLastPositionXPxls-s)+"px":(e.elements.loopBar.style.left=s+"px",e.settings.loopLastPositionXPxls=s),e.settings.loopEndMillisecond=Math.round(e.clip.duration*((parseFloat(e.elements.loopBar.style.left)||0)+parseFloat(e.elements.loopBar.style.width))/e.elements.totalBar.offsetWidth),e.settings.loopEndMillisecond<e.clip.runTimeInfo.currentMillisecond&&(e.settings.loopJourney=!0),e.settings.loopStartMillisecond>e.settings.loopEndMillisecond&&(e.settings.loopStartMillisecond=e.settings.loopEndMillisecond,e.settings.loopJourney=!0)},e.listeners.onMouseUpLoopEnd=()=>{e.elements.listenerHelper.style.pointerEvents="none",e.settings.resizeLoop=!1;const{loopBar:t,totalBar:s,runningBar:o}=e.elements;if(o.style.width=o.offsetWidth/t.offsetWidth*100+"%",t.style.left=t.offsetLeft/s.offsetWidth*100+"%",t.style.width=t.offsetWidth/s.offsetWidth*100+"%",e.settings.loopJourney&&(e.createProgressDrag(o.offsetWidth),e.settings.loopJourney=!1),I(e,e.listeners.onMouseUpLoopEnd,e.listeners.onCursorMoveLoopEnd),z(e.listeners.onMouseDown,t,!0),e.settings.playAfterResize){if("idle"===e.clip.runTimeInfo.state||"completed"===e.clip.runTimeInfo.state){let t;t=e.clip.speed>=0?e.settings.loopStartMillisecond+1:e.settings.loopEndMillisecond-1,e.settings.needsUpdate=!0,e.goToMillisecond(t,{before:"pause",after:"play"})}else e.clip.play();e.settings.playAfterResize=!1}},e.listeners.onMouseDownLoopEnd=t=>{t.stopPropagation(),e.elements.listenerHelper.style.pointerEvents="auto",e.settings.resizeLoop=!0,e.settings.needsUpdate=!0,"playing"===e.clip.runTimeInfo.state&&(e.clip.pause(),e.settings.playAfterResize=!0),e.elements.runningBar.style.width=`${e.elements.runningBar.offsetWidth}px`;const s=e.elements.loopBar;s.style.left=`${s.offsetLeft}px`,s.style.width=`${s.offsetWidth}px`,e.listeners.onCursorMoveLoopEnd(t),E(e,e.listeners.onMouseUpLoopEnd,e.listeners.onCursorMoveLoopEnd)},z(e.listeners.onMouseDownLoopEnd,e.elements.loopBarEnd,!1),(e=>{e.listeners.onCursorMove=t=>{t.stopPropagation(),S()&&t.preventDefault();let s=(t.clientX||((t.touches||[])[0]||{}).clientX)-e.elements.loopBar.getBoundingClientRect().left;s<0?s=0:s>e.elements.loopBar.offsetWidth&&(s=e.elements.loopBar.offsetWidth),e.handleDrag(s)},e.listeners.onMouseUp=()=>{e.elements.listenerHelper.style.pointerEvents="none",I(e,e.listeners.onMouseUp,e.listeners.onCursorMove),e.handleDragEnd(e.settings)},e.listeners.onMouseDown=t=>{e.elements.listenerHelper.style.pointerEvents="auto","playing"===e.clip.runTimeInfo.state&&(e.settings.playAfterResize=!0),e.handleDragStart(e.clip),e.listeners.onCursorMove(t),E(e,e.listeners.onMouseUp,e.listeners.onCursorMove)},z(e.listeners.onMouseDown,e.elements.loopBar)})(this),(e=>{e.listeners.onCursorMoveLoopStart=t=>{t.stopPropagation(),S()&&t.preventDefault();const s=t.clientX||((t.touches||[])[0]||{}).clientX,o=e.elements.totalBar.getBoundingClientRect();let n=Math.round(s-o.left);const i=Math.round(e.settings.loopEndMillisecond/e.clip.duration*e.elements.totalBar.offsetWidth);n<0?n=0:n>e.elements.totalBar.offsetWidth&&(n=e.elements.totalBar.offsetWidth);const l=e.clip.runTimeInfo.currentMillisecond/e.clip.duration*e.elements.totalBar.offsetWidth-n;e.elements.loopBar.style.left=n+"px",e.elements.loopBar.style.width=i-n+"px",e.elements.runningBar.style.width=l+"px",e.settings.loopLastPositionXPxls=n,e.settings.loopStartMillisecond=Math.round(e.clip.duration*e.elements.loopBar.offsetLeft/e.elements.totalBar.offsetWidth),e.settings.loopEndMillisecond<e.settings.loopStartMillisecond&&(e.settings.loopEndMillisecond=e.settings.loopStartMillisecond,e.elements.loopBar.style.width="0px",e.elements.runningBar.style.width="0px"),e.settings.loopStartMillisecond>e.clip.runTimeInfo.currentMillisecond&&(e.settings.loopJourney=!0)},e.listeners.onMouseUpLoopStart=()=>{if(e.elements.listenerHelper.style.pointerEvents="none",e.settings.resizeLoop=!1,e.settings.loopJourney&&(e.createProgressDrag(e.elements.runningBar.offsetWidth),e.settings.loopJourney=!1),e.elements.loopBar.style.left=e.elements.loopBar.offsetLeft/e.elements.totalBar.offsetWidth*100+"%",e.elements.loopBar.style.width=e.elements.loopBar.offsetWidth/e.elements.totalBar.offsetWidth*100+"%",e.settings.loopStartMillisecond=Math.round(e.clip.duration*e.elements.loopBar.offsetLeft/e.elements.totalBar.offsetWidth),e.elements.runningBar.style.width=e.elements.runningBar.offsetWidth/e.elements.loopBar.offsetWidth*100+"%",I(e,e.listeners.onMouseUpLoopStart,e.listeners.onCursorMoveLoopStart),z(e.listeners.onMouseDown,e.elements.loopBar,!0),e.settings.playAfterResize){if("idle"===e.clip.runTimeInfo.state){let t;t=e.clip.speed>=0?e.settings.loopStartMillisecond+1:e.settings.loopEndMillisecond-1,e.settings.needsUpdate=!0,e.goToMillisecond(t,{before:"pause",after:"play"})}else e.clip.play();e.settings.playAfterResize=!1}},e.listeners.onMouseDownLoopStart=t=>{t.stopPropagation(),e.elements.listenerHelper.style.pointerEvents="auto",e.settings.resizeLoop=!0,e.settings.needsUpdate=!0,"playing"===e.clip.runTimeInfo.state&&(e.clip.pause(),e.settings.playAfterResize=!0),e.listeners.onCursorMoveLoopStart(t),E(e,e.listeners.onMouseUpLoopStart,e.listeners.onCursorMoveLoopStart)},z(e.listeners.onMouseDownLoopStart,e.elements.loopBarStart)})(this),function(e){e.elements.context.onkeydown=t=>{switch(t.code){case"Space":P(e);break;case"ArrowRight":e.goToMillisecond(e.clip.runTimeInfo.currentMillisecond+5e3);break;case"ArrowLeft":e.goToMillisecond(e.clip.runTimeInfo.currentMillisecond-5e3)}}}(this),function(e){const t=e.elements;let s=!1;t.volumeBtn.onclick=()=>{e.settings.volumeMute?(t.volumeBarActive.style.width=100*e.settings.volume+"%",e.clip.setVolume(e.settings.previousVolume),t.volumeBarActive.style.width=100*e.settings.previousVolume+"%",e.settings.volumeMute=!1,V(t.volumeBtn,$,R)):(e.settings.volumeMute=!0,V(t.volumeBtn,R,$),t.volumeBarActive.style.width="0%",e.clip.setVolume(0)),e.eventBroadcast(o,e.settings.previousVolume),e.eventBroadcast(n,e.settings.volumeMute)};let i=!1;t.volumeBtn.onmouseover=()=>{i=!0},e.elements.leftButtons.onmouseout=()=>{if(!i||s)return;const t=event.toElement||event.relatedTarget||event.target;t===e.elements.leftButtons||function(e,t){let s=t.parentNode;for(;null!=s;){if(s==e)return!0;s=s.parentNode}return!1}(e.elements.leftButtons,t)||(i=!1)};const l=e.listeners;l.onCursorMoveVolumeBar=s=>{let i=(s.clientX||((s.touches||[])[0]||{}).clientX)-t.volumeBarHelper.getBoundingClientRect().left;if(i<0?i=0:i>t.volumeBarHelper.offsetWidth&&(i=t.volumeBarHelper.offsetWidth),e.settings.volume=Number((i/t.volumeBarHelper.offsetWidth).toFixed(2)),t.volumeBarActive.style.width=100*e.settings.volume+"%",e.clip.setVolume(e.settings.volume),e.settings.volume>=0){const s=0===e.settings.volume;e.settings.volumeMute=s,s?V(t.volumeBtn,R,$):V(t.volumeBtn,$,R)}e.eventBroadcast(o,e.settings.volume),e.eventBroadcast(n,e.settings.volumeMute)},l.onMouseUpVolumeBar=()=>{s=!1,t.listenerHelper.style.pointerEvents="none",e.settings.volume>0&&(e.settings.previousVolume=e.settings.volume),I(e,l.onMouseUpVolumeBar,l.onCursorMoveVolumeBar)},l.onMouseDownVolumeBar=o=>{s=!0,t.listenerHelper.style.pointerEvents="auto",l.onCursorMoveVolumeBar(o),E(e,l.onMouseUpVolumeBar,l.onCursorMoveVolumeBar)},z(l.onMouseDownVolumeBar,t.volumeBarHelper),z(l.onMouseDownVolumeBar,t.volumeCursor)}(this),(e=>{e.elements.statusButton.onclick=()=>{switch(e.clip.runTimeInfo.state){case"playing":e.clip.pause();break;case"paused":case"idle":case"transitional":case"armed":e.clip.play()}return!1}})(this),function(e){e.elements.settingsPanel.onblur=()=>{e.elements.settingsButton.click()},e.elements.settingsPointerEvents.onclick=()=>X(e),e.elements.settingsShowVolume.onclick=()=>J(e),e.elements.settingsButton.onclick=()=>{const t=s=>{if(e.elements.settingsPanel.contains(s.target))return!0;e.elements.settingsPanel.classList.toggle(`${e.name}-hide`),e.elements.settingsPanel.classList.toggle("m-fadeOut"),e.elements.settingsPanel.classList.toggle("m-fadeIn"),e.elements.settingsPanel.className.includes("m-fadeOut")?(e.document.removeEventListener("click",t,!1),e.eventBroadcast(c,e.state)):e.elements.settingsPanel.focus()};e.elements.settingsPanel.className.includes("m-fadeOut")?(e.elements.controls.classList.value.includes("--mcp-force-show-controls")||e.elements.controls.classList.toggle("--mcp-force-show-controls"),e.document.addEventListener("click",t,!1)):e.document.removeEventListener("click",t,!1)}}(this),function(e){e.elements.settingsSpeedButtonShow.onclick=e.elements.settingsSpeedButtonHide.onclick=()=>{e.elements.settingsPanel.classList.toggle(`${e.name}-settings-speed-panel`),e.elements.settingsPanel.className.includes(`${e.name}-settings-speed-panel`)?(e.elements.settingsMainPanel.style.display="none",e.elements.settingsSpeedPanel.style.display="block"):(e.elements.settingsSpeedPanel.style.display="none",e.elements.settingsMainPanel.style.display="block")}}(this),function(e){e.elements.loopButton.onclick=()=>G(e)}(this),function(e){e.elements.fullScreenButton.onclick=()=>b(e)}(this),x(this),(e=>{e.elements.donkeyclipButton.addEventListener("click",(()=>{const e=window.DonkeyClip?.clipId,t=window.location.host.includes("staging")?"staging.":"";window.open(`https://${t}donkeyclip.com/${e?`explore/donkeyclips/${e}`:""}`)}))})(this),(e=>{function t(){e.elements.mcPlayer.classList.toggle("full-screen"),e.clip.props.host.classList.toggle("full-screen")}e.document.addEventListener("fullscreenchange",t),e.document.addEventListener("webkitfullscreenchange",t),e.document.addEventListener("mozfullscreenchange",t),e.document.addEventListener("MSFullscreenChange",t)})(this),"scroller"===this.options.type&&K(this)}setTheme(){this.options.theme.replace(/\s\s+/g," "),this.options.theme.trim();const e=Z[this.options.theme];if(e)this.elements.mcPlayer.classList.add(e);else if(this.options.themeCSS&&!this.document.getElementById("--mc-player-style-custom")){this.options.themeCSS=this.options.themeCSS.replace(/(behaviour|javascript|expression)/gm,"");const e=this.document.createElement("style");e.id="--mc-player-style-custom",e.styleSheet?e.styleSheet.cssText=this.options.themeCSS:e.appendChild(document.createTextNode(this.options.themeCSS)),this.document.querySelector("head").appendChild(e),this.elements.mcPlayer.classList.add(this.options.theme)}if(!this.document.getElementById("--mc-player-style")){const e=this.document.createElement("style");e.id="--mc-player-style",e.styleSheet?e.styleSheet.cssText=O:e.appendChild(document.createTextNode(O)),this.document.querySelector("head").appendChild(e)}this.eventBroadcast("theme-change",this.options.theme)}setSpeed(){const e=1==this.clip.speed?"Normal":this.clip.speed;this.elements.speedCurrent.innerHTML=e}}}));

(()=>{var e,t={2473:function(e,t){!function(e){"use strict";function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function n(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach((function(t){o(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var r=l(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return d(this,n)}}function m(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}function f(e,t,n){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=m(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}},f(e,t,n||e)}function v(e,t,n,i){return v="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,i){var r,s=m(e,t);if(s){if((r=Object.getOwnPropertyDescriptor(s,t)).set)return r.set.call(i,n),!0;if(!r.writable)return!1}if(r=Object.getOwnPropertyDescriptor(i,t)){if(!r.writable)return!1;r.value=n,Object.defineProperty(i,t,r)}else o(i,t,n);return!0},v(e,t,n,i)}function g(e,t,n,i,r){if(!v(e,t,n,i||e)&&r)throw new Error("failed to set property");return n}function y(e,t){return x(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,s=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(s.push(i.value),!t||s.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw r}}return s}}(e,t)||w(e,t)||I()}function b(e){return function(e){if(Array.isArray(e))return C(e)}(e)||k(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e){if(Array.isArray(e))return e}function k(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function w(e,t){if(e){if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function I(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=w(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}function S(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function P(e,t,n,i){var r=M();if(i)for(var s=0;s<i.length;s++)r=i[s](r);var a=t((function(e){r.initializeInstanceElements(e,o.elements)}),n),o=r.decorateClass(function(e){for(var t=[],n=function(e){return"method"===e.kind&&e.key===s.key&&e.placement===s.placement},i=0;i<e.length;i++){var r,s=e[i];if("method"===s.kind&&(r=t.find(n)))if(D(s.descriptor)||D(r.descriptor)){if(T(s)||T(r))throw new ReferenceError("Duplicated methods ("+s.key+") can't be decorated.");r.descriptor=s.descriptor}else{if(T(s)){if(T(r))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+s.key+").");r.decorators=s.decorators}O(s,r)}else t.push(s)}return t}(a.d.map(A)),e);return r.initializeClassElements(a.F,o.elements),r.runClassFinishers(a.F,o.finishers)}function M(){M=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){["method","field"].forEach((function(n){t.forEach((function(t){t.kind===n&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var n=e.prototype;["method","field"].forEach((function(i){t.forEach((function(t){var r=t.placement;if(t.kind===i&&("static"===r||"prototype"===r)){var s="static"===r?e:n;this.defineClassElement(s,t)}}),this)}),this)},defineClassElement:function(e,t){var n=t.descriptor;if("field"===t.kind){var i=t.initializer;n={enumerable:n.enumerable,writable:n.writable,configurable:n.configurable,value:void 0===i?void 0:i.call(e)}}Object.defineProperty(e,t.key,n)},decorateClass:function(e,t){var n=[],i=[],r={static:[],prototype:[],own:[]};if(e.forEach((function(e){this.addElementPlacement(e,r)}),this),e.forEach((function(e){if(!T(e))return n.push(e);var t=this.decorateElement(e,r);n.push(t.element),n.push.apply(n,t.extras),i.push.apply(i,t.finishers)}),this),!t)return{elements:n,finishers:i};var s=this.decorateConstructor(n,t);return i.push.apply(i,s.finishers),s.finishers=i,s},addElementPlacement:function(e,t,n){var i=t[e.placement];if(!n&&-1!==i.indexOf(e.key))throw new TypeError("Duplicated element ("+e.key+")");i.push(e.key)},decorateElement:function(e,t){for(var n=[],i=[],r=e.decorators,s=r.length-1;s>=0;s--){var a=t[e.placement];a.splice(a.indexOf(e.key),1);var o=this.fromElementDescriptor(e),u=this.toElementFinisherExtras((0,r[s])(o)||o);e=u.element,this.addElementPlacement(e,t),u.finisher&&i.push(u.finisher);var l=u.extras;if(l){for(var c=0;c<l.length;c++)this.addElementPlacement(l[c],t);n.push.apply(n,l)}}return{element:e,finishers:i,extras:n}},decorateConstructor:function(e,t){for(var n=[],i=t.length-1;i>=0;i--){var r=this.fromClassDescriptor(e),s=this.toClassDescriptor((0,t[i])(r)||r);if(void 0!==s.finisher&&n.push(s.finisher),void 0!==s.elements){e=s.elements;for(var a=0;a<e.length-1;a++)for(var o=a+1;o<e.length;o++)if(e[a].key===e[o].key&&e[a].placement===e[o].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:n}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return(t=e,x(t)||k(t)||w(t)||I()).map((function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var n=S(e.key),i=String(e.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var r=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var s={kind:t,key:n,placement:i,descriptor:Object.assign({},r)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(r,"get","The property descriptor of a field descriptor"),this.disallowProperty(r,"set","The property descriptor of a field descriptor"),this.disallowProperty(r,"value","The property descriptor of a field descriptor"),s.initializer=e.initializer),s},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:_(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:e.map(this.fromElementDescriptor,this)};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var n=_(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:n}},runClassFinishers:function(e,t){for(var n=0;n<t.length;n++){var i=(0,t[n])(e);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");e=i}}return e},disallowProperty:function(e,t,n){if(void 0!==e[t])throw new TypeError(n+" can't have a ."+t+" property.")}};return e}function A(e){var t,n=S(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===e.kind?"field":"method",key:n,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(i.decorators=e.decorators),"field"===e.kind&&(i.initializer=e.value),i}function O(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function T(e){return e.decorators&&e.decorators.length}function D(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function _(e,t){var n=e[t];if(void 0!==n&&"function"!=typeof n)throw new TypeError("Expected '"+t+"' to be a function");return n}var B=[{key:"info",style:"color: #666;",level:5,consoleMethod:"log"},{key:"notice",style:"background: rgba(0, 0, 0, 0.8); color:white; padding:8px;",level:4,consoleMethod:"log"},{key:"warning",style:"color: black; background: orange;",level:2,consoleMethod:"warn"},{key:"error",style:"color: black; background: red;",level:1,consoleMethod:"error"}],q="data-motorcortex2-id",V="closed",j="MotorCortex",L={staggerPreface:"@stagger",mathExpPreface:"@expression",attributeValue:"@attribute",patternValue:"@pattern",initParamsPreface:"@initParams",dynamicDuration:"dynamic",totalElements:"total",elementIndex:"index",initParams:"initParams"};function N(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var R={required:"The '{field}' field is required.",string:"The '{field}' field must be a string.",stringEmpty:"The '{field}' field must not be empty.",stringMin:"The '{field}' field length must be greater than or equal to {expected} characters long.",stringMax:"The '{field}' field length must be less than or equal to {expected} characters long.",stringLength:"The '{field}' field length must be {expected} characters long.",stringPattern:"The '{field}' field fails to match the required pattern.",stringContains:"The '{field}' field must contain the '{expected}' text.",stringEnum:"The '{field}' field does not match any of the allowed values.",stringNumeric:"The '{field}' field must be a numeric string.",stringAlpha:"The '{field}' field must be an alphabetic string.",stringAlphanum:"The '{field}' field must be an alphanumeric string.",stringAlphadash:"The '{field}' field must be an alphadash string.",stringHex:"The '{field}' field must be a hex string.",stringSingleLine:"The '{field}' field must be a single line string.",stringBase64:"The '{field}' field must be a base64 string.",number:"The '{field}' field must be a number.",numberMin:"The '{field}' field must be greater than or equal to {expected}.",numberMax:"The '{field}' field must be less than or equal to {expected}.",numberEqual:"The '{field}' field must be equal to {expected}.",numberNotEqual:"The '{field}' field can't be equal to {expected}.",numberInteger:"The '{field}' field must be an integer.",numberPositive:"The '{field}' field must be a positive number.",numberNegative:"The '{field}' field must be a negative number.",array:"The '{field}' field must be an array.",arrayEmpty:"The '{field}' field must not be an empty array.",arrayMin:"The '{field}' field must contain at least {expected} items.",arrayMax:"The '{field}' field must contain less than or equal to {expected} items.",arrayLength:"The '{field}' field must contain {expected} items.",arrayContains:"The '{field}' field must contain the '{expected}' item.",arrayUnique:"The '{actual}' value in '{field}' field does not unique the '{expected}' values.",arrayEnum:"The '{actual}' value in '{field}' field does not match any of the '{expected}' values.",tuple:"The '{field}' field must be an array.",tupleEmpty:"The '{field}' field must not be an empty array.",tupleLength:"The '{field}' field must contain {expected} items.",boolean:"The '{field}' field must be a boolean.",currency:"The '{field}' must be a valid currency format",date:"The '{field}' field must be a Date.",dateMin:"The '{field}' field must be greater than or equal to {expected}.",dateMax:"The '{field}' field must be less than or equal to {expected}.",enumValue:"The '{field}' field value '{expected}' does not match any of the allowed values.",equalValue:"The '{field}' field value must be equal to '{expected}'.",equalField:"The '{field}' field value must be equal to '{expected}' field value.",forbidden:"The '{field}' field is forbidden.",function:"The '{field}' field must be a function.",email:"The '{field}' field must be a valid e-mail.",emailEmpty:"The '{field}' field must not be empty.",emailMin:"The '{field}' field length must be greater than or equal to {expected} characters long.",emailMax:"The '{field}' field length must be less than or equal to {expected} characters long.",luhn:"The '{field}' field must be a valid checksum luhn.",mac:"The '{field}' field must be a valid MAC address.",object:"The '{field}' must be an Object.",objectStrict:"The object '{field}' contains forbidden keys: '{actual}'.",objectMinProps:"The object '{field}' must contain at least {expected} properties.",objectMaxProps:"The object '{field}' must contain {expected} properties at most.",url:"The '{field}' field must be a valid URL.",urlEmpty:"The '{field}' field must not be empty.",uuid:"The '{field}' field must be a valid UUID.",uuidVersion:"The '{field}' field must be a valid UUID version provided.",classInstanceOf:"The '{field}' field must be an instance of the '{expected}' class.",objectID:"The '{field}' field must be an valid ObjectID"},F=function(){const e=[];return e.push("\n\t\treturn value;\n\t"),{source:e.join("\n")}},$=function({schema:e,messages:t},n,i){const r=[];if(r.push(`\n\t\tif (!Array.isArray(value)) {\n\t\t\t${this.makeError({type:"array",actual:"value",messages:t})}\n\t\t\treturn value;\n\t\t}\n\n\t\tvar len = value.length;\n\t`),!1===e.empty&&r.push(`\n\t\t\tif (len === 0) {\n\t\t\t\t${this.makeError({type:"arrayEmpty",actual:"value",messages:t})}\n\t\t\t}\n\t\t`),null!=e.min&&r.push(`\n\t\t\tif (len < ${e.min}) {\n\t\t\t\t${this.makeError({type:"arrayMin",expected:e.min,actual:"len",messages:t})}\n\t\t\t}\n\t\t`),null!=e.max&&r.push(`\n\t\t\tif (len > ${e.max}) {\n\t\t\t\t${this.makeError({type:"arrayMax",expected:e.max,actual:"len",messages:t})}\n\t\t\t}\n\t\t`),null!=e.length&&r.push(`\n\t\t\tif (len !== ${e.length}) {\n\t\t\t\t${this.makeError({type:"arrayLength",expected:e.length,actual:"len",messages:t})}\n\t\t\t}\n\t\t`),null!=e.contains&&r.push(`\n\t\t\tif (value.indexOf(${JSON.stringify(e.contains)}) === -1) {\n\t\t\t\t${this.makeError({type:"arrayContains",expected:JSON.stringify(e.contains),actual:"value",messages:t})}\n\t\t\t}\n\t\t`),!0===e.unique&&r.push(`\n\t\t\tif(len > (new Set(value)).size) {\n\t\t\t\t${this.makeError({type:"arrayUnique",expected:"Array.from(new Set(value.filter((item, index) => value.indexOf(item) !== index)))",actual:"value",messages:t})}\n\t\t\t}\n\t\t`),null!=e.enum){const n=JSON.stringify(e.enum);r.push(`\n\t\t\tfor (var i = 0; i < value.length; i++) {\n\t\t\t\tif (${n}.indexOf(value[i]) === -1) {\n\t\t\t\t\t${this.makeError({type:"arrayEnum",expected:'"'+e.enum.join(", ")+'"',actual:"value[i]",messages:t})}\n\t\t\t\t}\n\t\t\t}\n\t\t`)}if(null!=e.items){r.push("\n\t\t\tvar arr = value;\n\t\t\tvar parentField = field;\n\t\t\tfor (var i = 0; i < arr.length; i++) {\n\t\t\t\tvalue = arr[i];\n\t\t");const t=n+"[]",s=this.getRuleFromSchema(e.items),a=`arr[i] = ${i.async?"await ":""}context.fn[%%INDEX%%](arr[i], (parentField ? parentField : "") + "[" + i + "]", parent, errors, context)`;r.push(this.compileRule(s,i,t,a,"arr[i]")),r.push("\n\t\t\t}\n\t\t"),r.push("\n\t\treturn arr;\n\t")}else r.push("\n\t\treturn value;\n\t");return{source:r.join("\n")}},z=function({schema:e,messages:t},n,i){const r=[];let s=!1;return r.push("\n\t\tvar origValue = value;\n\t"),!0===e.convert&&(s=!0,r.push('\n\t\t\tif (typeof value !== "boolean") {\n\t\t\t\tif (\n\t\t\t\tvalue === 1\n\t\t\t\t|| value === "true"\n\t\t\t\t|| value === "1"\n\t\t\t\t|| value === "on"\n\t\t\t\t) {\n\t\t\t\t\tvalue = true;\n\t\t\t\t} else if (\n\t\t\t\tvalue === 0\n\t\t\t\t|| value === "false"\n\t\t\t\t|| value === "0"\n\t\t\t\t|| value === "off"\n\t\t\t\t) {\n\t\t\t\t\tvalue = false;\n\t\t\t\t}\n\t\t\t}\n\t\t')),r.push(`\n\t\tif (typeof value !== "boolean") {\n\t\t\t${this.makeError({type:"boolean",actual:"origValue",messages:t})}\n\t\t}\n\t\t\n\t\treturn value;\n\t`),{sanitized:s,source:r.join("\n")}},H=function({schema:e,messages:t,index:n},i,r){const s=[],a=e.instanceOf.name?e.instanceOf.name:"<UnknowClass>";return r.customs[n]?r.customs[n].schema=e:r.customs[n]={schema:e},s.push(`\n\t\tif (!(value instanceof context.customs[${n}].schema.instanceOf))\n\t\t\t${this.makeError({type:"classInstanceOf",actual:"value",expected:"'"+a+"'",messages:t})}\n\t`),s.push("\n\t\treturn value;\n\t"),{source:s.join("\n")}},W=function({schema:e,messages:t,index:n},i,r){const s=[];return s.push(`\n\t\t${this.makeCustomValidator({fnName:"check",path:i,schema:e,messages:t,context:r,ruleIndex:n})}\n\t\treturn value;\n\t`),{source:s.join("\n")}},G=function({schema:e,messages:t},n,i){const r=e.currencySymbol||null,s=e.thousandSeparator||",",a=e.decimalSeparator||".",o=e.customRegex;let u=!e.symbolOptional,l="(?=.*\\d)^(-?~1|~1-?)(([0-9]\\d{0,2}(~2\\d{3})*)|0)?(\\~3\\d{1,2})?$".replace(/~1/g,r?`\\${r}${u?"":"?"}`:"").replace("~2",s).replace("~3",a);const c=[];return c.push(`\n\t\tif (!value.match(${o||new RegExp(l)})) {\n\t\t\t${this.makeError({type:"currency",actual:"value",messages:t})}\n\t\t\treturn value;\n\t\t}\n\n\t\treturn value;\n\t`),{source:c.join("\n")}},U=function({schema:e,messages:t},n,i){const r=[];let s=!1;return r.push("\n\t\tvar origValue = value;\n\t"),!0===e.convert&&(s=!0,r.push("\n\t\t\tif (!(value instanceof Date)) {\n\t\t\t\tvalue = new Date(value);\n\t\t\t}\n\t\t")),r.push(`\n\t\tif (!(value instanceof Date) || isNaN(value.getTime()))\n\t\t\t${this.makeError({type:"date",actual:"origValue",messages:t})}\n\n\t\treturn value;\n\t`),{sanitized:s,source:r.join("\n")}};const J=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,K=/^\S+@\S+\.\S+$/;var X=function({schema:e,messages:t},n,i){const r=[],s="precise"==e.mode?J:K;let a=!1;return r.push(`\n\t\tif (typeof value !== "string") {\n\t\t\t${this.makeError({type:"string",actual:"value",messages:t})}\n\t\t\treturn value;\n\t\t}\n\t`),e.empty?r.push("\n\t\t\tif (value.length === 0) return value;\n\t\t"):r.push(`\n\t\t\tif (value.length === 0) {\n\t\t\t\t${this.makeError({type:"emailEmpty",actual:"value",messages:t})}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t`),e.normalize&&(a=!0,r.push("\n\t\t\tvalue = value.trim().toLowerCase();\n\t\t")),null!=e.min&&r.push(`\n\t\t\tif (value.length < ${e.min}) {\n\t\t\t\t${this.makeError({type:"emailMin",expected:e.min,actual:"value.length",messages:t})}\n\t\t\t}\n\t\t`),null!=e.max&&r.push(`\n\t\t\tif (value.length > ${e.max}) {\n\t\t\t\t${this.makeError({type:"emailMax",expected:e.max,actual:"value.length",messages:t})}\n\t\t\t}\n\t\t`),r.push(`\n\t\tif (!${s.toString()}.test(value)) {\n\t\t\t${this.makeError({type:"email",actual:"value",messages:t})}\n\t\t}\n\n\t\treturn value;\n\t`),{sanitized:a,source:r.join("\n")}},Q=function({schema:e,messages:t},n,i){return{source:`\n\t\t\tif (${JSON.stringify(e.values||[])}.indexOf(value) === -1)\n\t\t\t\t${this.makeError({type:"enumValue",expected:'"'+e.values.join(", ")+'"',actual:"value",messages:t})}\n\t\t\t\n\t\t\treturn value;\n\t\t`}},Y=function({schema:e,messages:t},n,i){const r=[];return e.field?(e.strict?r.push(`\n\t\t\t\tif (value !== parent["${e.field}"])\n\t\t\t`):r.push(`\n\t\t\t\tif (value != parent["${e.field}"])\n\t\t\t`),r.push(`\n\t\t\t\t${this.makeError({type:"equalField",actual:"value",expected:JSON.stringify(e.field),messages:t})}\n\t\t`)):(e.strict?r.push(`\n\t\t\t\tif (value !== ${JSON.stringify(e.value)})\n\t\t\t`):r.push(`\n\t\t\t\tif (value != ${JSON.stringify(e.value)})\n\t\t\t`),r.push(`\n\t\t\t\t${this.makeError({type:"equalValue",actual:"value",expected:JSON.stringify(e.value),messages:t})}\n\t\t`)),r.push("\n\t\treturn value;\n\t"),{source:r.join("\n")}},Z=function({schema:e,messages:t},n,i){const r=[];return r.push("\n\t\tif (value !== null && value !== undefined) {\n\t"),e.remove?r.push("\n\t\t\treturn undefined;\n\t\t"):r.push(`\n\t\t\t${this.makeError({type:"forbidden",actual:"value",messages:t})}\n\t\t`),r.push("\n\t\t}\n\n\t\treturn value;\n\t"),{source:r.join("\n")}},ee=function({schema:e,messages:t},n,i){return{source:`\n\t\t\tif (typeof value !== "function")\n\t\t\t\t${this.makeError({type:"function",actual:"value",messages:t})}\n\n\t\t\treturn value;\n\t\t`}},te=function({schema:e,messages:t},n,i){const r=[];r.push("\n\t\tvar hasValid = false;\n\t\tvar newVal = value;\n\t\tvar checkErrors = [];\n\t");for(let t=0;t<e.rules.length;t++){r.push("\n\t\t\tif (!hasValid) {\n\t\t\t\tvar _errors = [];\n\t\t");const s=this.getRuleFromSchema(e.rules[t]);r.push(this.compileRule(s,i,n,`var tmpVal = ${i.async?"await ":""}context.fn[%%INDEX%%](value, field, parent, _errors, context);`,"tmpVal")),r.push("\n\t\t\t\tif (_errors.length == 0) {\n\t\t\t\t\thasValid = true;\n\t\t\t\t\tnewVal = tmpVal;\n\t\t\t\t} else {\n\t\t\t\t\tArray.prototype.push.apply(checkErrors, _errors);\n\t\t\t\t}\n\t\t\t}\n\t\t")}return r.push("\n\t\tif (!hasValid) {\n\t\t\tArray.prototype.push.apply(errors, checkErrors);\n\t\t}\n\n\t\treturn newVal;\n\t"),{source:r.join("\n")}},ne=function({schema:e,messages:t},n,i){const r=[];r.push("\n\t\tvar origValue = value;\n\t");let s=!1;return!0===e.convert&&(s=!0,r.push('\n\t\t\tif (typeof value !== "number") {\n\t\t\t\tvalue = Number(value);\n\t\t\t}\n\t\t')),r.push(`\n\t\tif (typeof value !== "number" || isNaN(value) || !isFinite(value)) {\n\t\t\t${this.makeError({type:"number",actual:"origValue",messages:t})}\n\t\t\treturn value;\n\t\t}\n\t`),null!=e.min&&r.push(`\n\t\t\tif (value < ${e.min}) {\n\t\t\t\t${this.makeError({type:"numberMin",expected:e.min,actual:"origValue",messages:t})}\n\t\t\t}\n\t\t`),null!=e.max&&r.push(`\n\t\t\tif (value > ${e.max}) {\n\t\t\t\t${this.makeError({type:"numberMax",expected:e.max,actual:"origValue",messages:t})}\n\t\t\t}\n\t\t`),null!=e.equal&&r.push(`\n\t\t\tif (value !== ${e.equal}) {\n\t\t\t\t${this.makeError({type:"numberEqual",expected:e.equal,actual:"origValue",messages:t})}\n\t\t\t}\n\t\t`),null!=e.notEqual&&r.push(`\n\t\t\tif (value === ${e.notEqual}) {\n\t\t\t\t${this.makeError({type:"numberNotEqual",expected:e.notEqual,actual:"origValue",messages:t})}\n\t\t\t}\n\t\t`),!0===e.integer&&r.push(`\n\t\t\tif (value % 1 !== 0) {\n\t\t\t\t${this.makeError({type:"numberInteger",actual:"origValue",messages:t})}\n\t\t\t}\n\t\t`),!0===e.positive&&r.push(`\n\t\t\tif (value <= 0) {\n\t\t\t\t${this.makeError({type:"numberPositive",actual:"origValue",messages:t})}\n\t\t\t}\n\t\t`),!0===e.negative&&r.push(`\n\t\t\tif (value >= 0) {\n\t\t\t\t${this.makeError({type:"numberNegative",actual:"origValue",messages:t})}\n\t\t\t}\n\t\t`),r.push("\n\t\treturn value;\n\t"),{sanitized:s,source:r.join("\n")}};const ie=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/,re=/["'\\\n\r\u2028\u2029]/g;function se(e){return e.replace(re,(function(e){switch(e){case'"':case"'":case"\\":return"\\"+e;case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}}))}var ae=function({schema:e,messages:t},n,i){const r=[];r.push(`\n\t\tif (typeof value !== "object" || value === null || Array.isArray(value)) {\n\t\t\t${this.makeError({type:"object",actual:"value",messages:t})}\n\t\t\treturn value;\n\t\t}\n\t`);const s=e.properties||e.props;if(s){r.push("var parentObj = value;"),r.push("var parentField = field;");const a=Object.keys(s);for(let e=0;e<a.length;e++){const t=a[e],o=se(t),u=ie.test(o)?`.${o}`:`['${o}']`,l=`parentObj${u}`,c=(n?n+".":"")+t;r.push(`\n// Field: ${se(c)}`),r.push(`field = parentField ? parentField + "${u}" : "${o}";`),r.push(`value = ${l};`);const p=this.getRuleFromSchema(s[t]),d=`\n\t\t\t\t${l} = ${i.async?"await ":""}context.fn[%%INDEX%%](value, field, parentObj, errors, context);\n\t\t\t`;r.push(this.compileRule(p,i,c,d,l))}if(e.strict){r.push("\n\t\t\t\tif (errors.length === 0) {\n\t\t\t");const n=Object.keys(s);r.push(`\n\t\t\t\t\tfield = parentField;\n\t\t\t\t\tvar invalidProps = [];\n\t\t\t\t\tvar props = Object.keys(parentObj);\n\n\t\t\t\t\tfor (let i = 0; i < props.length; i++) {\n\t\t\t\t\t\tif (${JSON.stringify(n)}.indexOf(props[i]) === -1) {\n\t\t\t\t\t\t\tinvalidProps.push(props[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (invalidProps.length) {\n\t\t\t`),"remove"==e.strict?r.push("\n\t\t\t\t\t\tinvalidProps.forEach(function(field) {\n\t\t\t\t\t\t\tdelete parentObj[field];\n\t\t\t\t\t\t});\n\t\t\t\t"):r.push(`\n\t\t\t\t\t${this.makeError({type:"objectStrict",expected:'"'+n.join(", ")+'"',actual:"invalidProps.join(', ')",messages:t})}\n\t\t\t\t`),r.push("\n\t\t\t\t\t}\n\t\t\t"),r.push("\n\t\t\t\t}\n\t\t\t")}}return null==e.minProps&&null==e.maxProps||(e.strict?r.push(`\n\t\t\t\tprops = Object.keys(${s?"parentObj":"value"});\n\t\t\t`):r.push(`\n\t\t\t\tvar props = Object.keys(${s?"parentObj":"value"});\n\t\t\t\t${s?"field = parentField;":""}\n\t\t\t`)),null!=e.minProps&&r.push(`\n\t\t\tif (props.length < ${e.minProps}) {\n\t\t\t\t${this.makeError({type:"objectMinProps",expected:e.minProps,actual:"props.length",messages:t})}\n\t\t\t}\n\t\t`),null!=e.maxProps&&r.push(`\n\t\t\tif (props.length > ${e.maxProps}) {\n\t\t\t\t${this.makeError({type:"objectMaxProps",expected:e.maxProps,actual:"props.length",messages:t})}\n\t\t\t}\n\t\t`),s?r.push("\n\t\t\treturn parentObj;\n\t\t"):r.push("\n\t\t\treturn value;\n\t\t"),{source:r.join("\n")}},oe=function({schema:e,messages:t,index:n},i,r){const s=[];return r.customs[n]?r.customs[n].schema=e:r.customs[n]={schema:e},s.push(`\n\t\tconst ObjectID = context.customs[${n}].schema.ObjectID;\n\t\tif (!ObjectID.isValid(value)) {\n\t\t\t${this.makeError({type:"objectID",actual:"value",messages:t})}\n\t\t\treturn;\n\t\t}\n\t`),!0===e.convert?s.push("return new ObjectID(value)"):"hexString"===e.convert?s.push("return value.toString()"):s.push("return value"),{source:s.join("\n")}};const ue=/^-?[0-9]\d*(\.\d+)?$/,le=/^[a-zA-Z]+$/,ce=/^[a-zA-Z0-9]+$/,pe=/^[a-zA-Z0-9_-]+$/,de=/^[0-9a-fA-F]+$/,he=/^(?:[A-Za-z0-9+\\/]{4})*(?:[A-Za-z0-9+\\/]{2}==|[A-Za-z0-9+/]{3}=)?$/;var me=function({schema:e,messages:t},n,i){const r=[];let s=!1;if(!0===e.convert&&(s=!0,r.push('\n\t\t\tif (typeof value !== "string") {\n\t\t\t\tvalue = String(value);\n\t\t\t}\n\t\t')),r.push(`\n\t\tif (typeof value !== "string") {\n\t\t\t${this.makeError({type:"string",actual:"value",messages:t})}\n\t\t\treturn value;\n\t\t}\n\n\t\tvar origValue = value;\n\t`),e.trim&&(s=!0,r.push("\n\t\t\tvalue = value.trim();\n\t\t")),e.trimLeft&&(s=!0,r.push("\n\t\t\tvalue = value.trimLeft();\n\t\t")),e.trimRight&&(s=!0,r.push("\n\t\t\tvalue = value.trimRight();\n\t\t")),e.padStart){s=!0;const t=null!=e.padChar?e.padChar:" ";r.push(`\n\t\t\tvalue = value.padStart(${e.padStart}, ${JSON.stringify(t)});\n\t\t`)}if(e.padEnd){s=!0;const t=null!=e.padChar?e.padChar:" ";r.push(`\n\t\t\tvalue = value.padEnd(${e.padEnd}, ${JSON.stringify(t)});\n\t\t`)}if(e.lowercase&&(s=!0,r.push("\n\t\t\tvalue = value.toLowerCase();\n\t\t")),e.uppercase&&(s=!0,r.push("\n\t\t\tvalue = value.toUpperCase();\n\t\t")),e.localeLowercase&&(s=!0,r.push("\n\t\t\tvalue = value.toLocaleLowerCase();\n\t\t")),e.localeUppercase&&(s=!0,r.push("\n\t\t\tvalue = value.toLocaleUpperCase();\n\t\t")),r.push("\n\t\t\tvar len = value.length;\n\t"),!1===e.empty&&r.push(`\n\t\t\tif (len === 0) {\n\t\t\t\t${this.makeError({type:"stringEmpty",actual:"value",messages:t})}\n\t\t\t}\n\t\t`),null!=e.min&&r.push(`\n\t\t\tif (len < ${e.min}) {\n\t\t\t\t${this.makeError({type:"stringMin",expected:e.min,actual:"len",messages:t})}\n\t\t\t}\n\t\t`),null!=e.max&&r.push(`\n\t\t\tif (len > ${e.max}) {\n\t\t\t\t${this.makeError({type:"stringMax",expected:e.max,actual:"len",messages:t})}\n\t\t\t}\n\t\t`),null!=e.length&&r.push(`\n\t\t\tif (len !== ${e.length}) {\n\t\t\t\t${this.makeError({type:"stringLength",expected:e.length,actual:"len",messages:t})}\n\t\t\t}\n\t\t`),null!=e.pattern){let n=e.pattern;"string"==typeof e.pattern&&(n=new RegExp(e.pattern,e.patternFlags));const i=`\n\t\t\tif (!${n.toString()}.test(value))\n\t\t\t\t${this.makeError({type:"stringPattern",expected:`"${n.toString().replace(/"/g,"\\$&")}"`,actual:"origValue",messages:t})}\n\t\t`;r.push(`\n\t\t\tif (${e.empty} === true && len === 0) {\n\t\t\t\t// Do nothing\n\t\t\t} else {\n\t\t\t\t${i}\n\t\t\t}\n\t\t`)}if(null!=e.contains&&r.push(`\n\t\t\tif (value.indexOf("${e.contains}") === -1) {\n\t\t\t\t${this.makeError({type:"stringContains",expected:'"'+e.contains+'"',actual:"origValue",messages:t})}\n\t\t\t}\n\t\t`),null!=e.enum){const n=JSON.stringify(e.enum);r.push(`\n\t\t\tif (${n}.indexOf(value) === -1) {\n\t\t\t\t${this.makeError({type:"stringEnum",expected:'"'+e.enum.join(", ")+'"',actual:"origValue",messages:t})}\n\t\t\t}\n\t\t`)}return!0===e.numeric&&r.push(`\n\t\t\tif (!${ue.toString()}.test(value) ) {\n\t\t\t\t${this.makeError({type:"stringNumeric",actual:"origValue",messages:t})}\n\t\t\t}\n\t\t`),!0===e.alpha&&r.push(`\n\t\t\tif(!${le.toString()}.test(value)) {\n\t\t\t\t${this.makeError({type:"stringAlpha",actual:"origValue",messages:t})}\n\t\t\t}\n\t\t`),!0===e.alphanum&&r.push(`\n\t\t\tif(!${ce.toString()}.test(value)) {\n\t\t\t\t${this.makeError({type:"stringAlphanum",actual:"origValue",messages:t})}\n\t\t\t}\n\t\t`),!0===e.alphadash&&r.push(`\n\t\t\tif(!${pe.toString()}.test(value)) {\n\t\t\t\t${this.makeError({type:"stringAlphadash",actual:"origValue",messages:t})}\n\t\t\t}\n\t\t`),!0===e.hex&&r.push(`\n\t\t\tif(value.length % 2 !== 0 || !${de.toString()}.test(value)) {\n\t\t\t\t${this.makeError({type:"stringHex",actual:"origValue",messages:t})}\n\t\t\t}\n\t\t`),!0===e.singleLine&&r.push(`\n\t\t\tif(value.includes("\\n")) {\n\t\t\t\t${this.makeError({type:"stringSingleLine",messages:t})}\n\t\t\t}\n\t\t`),!0===e.base64&&r.push(`\n\t\t\tif(!${he.toString()}.test(value)) {\n\t\t\t\t${this.makeError({type:"stringBase64",actual:"origValue",messages:t})}\n\t\t\t}\n\t\t`),r.push("\n\t\treturn value;\n\t"),{sanitized:s,source:r.join("\n")}},fe=function({schema:e,messages:t},n,i){const r=[];if(null!=e.items){if(!Array.isArray(e.items))throw new Error(`Invalid '${e.type}' schema. The 'items' field must be an array.`);if(0===e.items.length)throw new Error(`Invalid '${e.type}' schema. The 'items' field must not be an empty array.`)}if(r.push(`\n\t\tif (!Array.isArray(value)) {\n\t\t\t${this.makeError({type:"tuple",actual:"value",messages:t})}\n\t\t\treturn value;\n\t\t}\n\n\t\tvar len = value.length;\n\t`),!1===e.empty&&r.push(`\n\t\t\tif (len === 0) {\n\t\t\t\t${this.makeError({type:"tupleEmpty",actual:"value",messages:t})}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t`),null!=e.items){r.push(`\n\t\t\tif (${e.empty} !== false && len === 0) {\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tif (len !== ${e.items.length}) {\n\t\t\t\t${this.makeError({type:"tupleLength",expected:e.items.length,actual:"len",messages:t})}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t`),r.push("\n\t\t\tvar arr = value;\n\t\t\tvar parentField = field;\n\t\t");for(let t=0;t<e.items.length;t++){r.push(`\n\t\t\tvalue = arr[${t}];\n\t\t`);const s=`${n}[${t}]`,a=this.getRuleFromSchema(e.items[t]),o=`\n\t\t\tarr[${t}] = ${i.async?"await ":""}context.fn[%%INDEX%%](arr[${t}], (parentField ? parentField : "") + "[" + ${t} + "]", parent, errors, context);\n\t\t`;r.push(this.compileRule(a,i,s,o,`arr[${t}]`))}r.push("\n\t\treturn arr;\n\t")}else r.push("\n\t\treturn value;\n\t");return{source:r.join("\n")}};const ve=/^https?:\/\/\S+/;var ge=function({schema:e,messages:t},n,i){const r=[];return r.push(`\n\t\tif (typeof value !== "string") {\n\t\t\t${this.makeError({type:"string",actual:"value",messages:t})}\n\t\t\treturn value;\n\t\t}\n\t`),e.empty?r.push("\n\t\t\tif (value.length === 0) return value;\n\t\t"):r.push(`\n\t\t\tif (value.length === 0) {\n\t\t\t\t${this.makeError({type:"urlEmpty",actual:"value",messages:t})}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t`),r.push(`\n\t\tif (!${ve.toString()}.test(value)) {\n\t\t\t${this.makeError({type:"url",actual:"value",messages:t})}\n\t\t}\n\n\t\treturn value;\n\t`),{source:r.join("\n")}};const ye=/^([0-9a-f]{8}-[0-9a-f]{4}-[1-6][0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12}|[0]{8}-[0]{4}-[0]{4}-[0]{4}-[0]{12})$/i;var be=function({schema:e,messages:t},n){const i=[];return i.push(`\n\t\tif (typeof value !== "string") {\n\t\t\t${this.makeError({type:"string",actual:"value",messages:t})}\n\t\t\treturn value;\n\t\t}\n\n\t\tvar val = value.toLowerCase();\n\t\tif (!${ye.toString()}.test(val)) {\n\t\t\t${this.makeError({type:"uuid",actual:"value",messages:t})}\n\t\t\treturn value;\n\t\t}\n\n\t\tconst version = val.charAt(14) | 0;\n\t`),parseInt(e.version)<7&&i.push(`\n\t\t\tif (${e.version} !== version) {\n\t\t\t\t${this.makeError({type:"uuidVersion",expected:e.version,actual:"version",messages:t})}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t`),i.push(`\n\t\tswitch (version) {\n\t\tcase 0:\n\t\tcase 1:\n\t\tcase 2:\n\t\tcase 6:\n\t\t\tbreak;\n\t\tcase 3:\n\t\tcase 4:\n\t\tcase 5:\n\t\t\tif (["8", "9", "a", "b"].indexOf(val.charAt(19)) === -1) {\n\t\t\t\t${this.makeError({type:"uuid",actual:"value",messages:t})}\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t`),{source:i.join("\n")}};const xe=/^((([a-f0-9][a-f0-9]+[-]){5}|([a-f0-9][a-f0-9]+[:]){5})([a-f0-9][a-f0-9])$)|(^([a-f0-9][a-f0-9][a-f0-9][a-f0-9]+[.]){2}([a-f0-9][a-f0-9][a-f0-9][a-f0-9]))$/i;var ke=function({schema:e,messages:t},n,i){return{source:`\n\t\t\tif (typeof value !== "string") {\n\t\t\t\t${this.makeError({type:"string",actual:"value",messages:t})}\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tvar v = value.toLowerCase();\n\t\t\tif (!${xe.toString()}.test(v)) {\n\t\t\t\t${this.makeError({type:"mac",actual:"value",messages:t})}\n\t\t\t}\n\t\t\t\n\t\t\treturn value;\n\t\t`}},we=function({schema:e,messages:t},n,i){return{source:`\n\t\t\tif (typeof value !== "string") {\n\t\t\t\t${this.makeError({type:"string",actual:"value",messages:t})}\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tif (typeof value !== "string")\n\t\t\t\tvalue = String(value);\n\n\t\t\tval = value.replace(/\\D+/g, "");\n\n\t\t\tvar array = [0, 2, 4, 6, 8, 1, 3, 5, 7, 9];\n\t\t\tvar len = val ? val.length : 0,\n\t\t\t\tbit = 1,\n\t\t\t\tsum = 0;\n\t\t\twhile (len--) {\n\t\t\t\tsum += !(bit ^= 1) ? parseInt(val[len], 10) : array[val[len]];\n\t\t\t}\n\n\t\t\tif (!(sum % 10 === 0 && sum > 0)) {\n\t\t\t\t${this.makeError({type:"luhn",actual:"value",messages:t})}\n\t\t\t}\n\n\t\t\treturn value;\n\t\t`}};let Ce,Ie,Ee,Se;var Pe=function(e){Ce||(Ce=N("prettier"),Ie={parser:"babel",useTabs:!1,printWidth:120,trailingComma:"none",tabWidth:4,singleQuote:!1,semi:!0,bracketSpacing:!0},Ee=N("cli-highlight"),Se={language:"js",theme:Ee.fromJson({keyword:["white","bold"],built_in:"magenta",literal:"cyan",number:"magenta",regexp:"red",string:["yellow","bold"],symbol:"plain",class:"blue",attr:"plain",function:["white","bold"],title:"plain",params:"green",comment:"grey"})});const t=Ce.format(e,Ie);return Ee.highlight(t,Se)};let Me;try{Me=new Function("return Object.getPrototypeOf(async function(){}).constructor")()}catch(e){}const Ae=function e(t,n,i={}){for(let s in n)if("object"==typeof(r=n[s])&&!Array.isArray(r)&&null!=r&&Object.keys(r).length>0)t[s]=t[s]||{},e(t[s],n[s],i);else{if(!0===i.skipIfExist&&void 0!==t[s])continue;t[s]=n[s]}var r;return t},Oe=(e,t,n)=>{return e.replace(t,null==(i=n)?"":"function"==typeof i.toString?i:typeof i);var i};var Te=class{constructor(e){if(this.opts={},this.defaults={},this.messages=Object.assign({},R),this.rules={any:F,array:$,boolean:z,class:H,custom:W,currency:G,date:U,email:X,enum:Q,equal:Y,forbidden:Z,function:ee,multi:te,number:ne,object:ae,objectID:oe,string:me,tuple:fe,url:ge,uuid:be,mac:ke,luhn:we},this.aliases={},this.cache=new Map,e){if(Ae(this.opts,e),e.defaults&&Ae(this.defaults,e.defaults),e.messages)for(const t in e.messages)this.addMessage(t,e.messages[t]);if(e.aliases)for(const t in e.aliases)this.alias(t,e.aliases[t]);if(e.customRules)for(const t in e.customRules)this.add(t,e.customRules[t]);if(e.plugins){const t=e.plugins;if(!Array.isArray(t))throw new Error("Plugins type must be array");t.forEach(this.plugin.bind(this))}if(this.opts.debug){let e=function(e){return e};"undefined"==typeof window&&(e=Pe),this._formatter=e}}}validate(e,t){return this.compile(t)(e)}wrapRequiredCheckSourceCode(e,t,n,i){const r=[];let s,a=!0===e.schema.optional||"forbidden"===e.schema.type,o=!0===e.schema.optional||!0===e.schema.nullable||"forbidden"===e.schema.type;if(null!=e.schema.default){let t;a=!1,!0!==e.schema.nullable&&(o=!1),"function"==typeof e.schema.default?(n.customs[e.index]||(n.customs[e.index]={}),n.customs[e.index].defaultFn=e.schema.default,t=`context.customs[${e.index}].defaultFn.call(this, context.rules[${e.index}].schema, field, parent, context)`):t=JSON.stringify(e.schema.default),s=`\n\t\t\t\tvalue = ${t};\n\t\t\t\t${i} = value;\n\t\t\t`}else s=this.makeError({type:"required",actual:"value",messages:e.messages});return r.push(`\n\t\t\tif (value === undefined) { ${a?"\n// allow undefined\n":s} }\n\t\t\telse if (value === null) { ${o?"\n// allow null\n":s} }\n\t\t\t${t?`else { ${t} }`:""}\n\t\t`),r.join("\n")}compile(e){if(null===e||"object"!=typeof e)throw new Error("Invalid schema.");const t=this,n={index:0,async:!0===e.$$async,rules:[],fn:[],customs:{},utils:{replace:Oe}};if(this.cache.clear(),delete e.$$async,n.async&&!Me)throw new Error("Asynchronous mode is not supported.");if(!0!==e.$$root)if(Array.isArray(e))e=this.getRuleFromSchema(e).schema;else{const t=Object.assign({},e);e={type:"object",strict:t.$$strict,properties:t},delete t.$$strict}const i=["var errors = [];","var field;","var parent = null;"],r=this.getRuleFromSchema(e);i.push(this.compileRule(r,n,null,(n.async?"await ":"")+"context.fn[%%INDEX%%](value, field, null, errors, context);","value")),i.push("if (errors.length) {"),i.push("\n\t\t\treturn errors.map(err => {\n\t\t\t\tif (err.message) {\n\t\t\t\t\terr.message = context.utils.replace(err.message, /\\{field\\}/g, err.field);\n\t\t\t\t\terr.message = context.utils.replace(err.message, /\\{expected\\}/g, err.expected);\n\t\t\t\t\terr.message = context.utils.replace(err.message, /\\{actual\\}/g, err.actual);\n\t\t\t\t}\n\n\t\t\t\treturn err;\n\t\t\t});\n\t\t"),i.push("}"),i.push("return true;");const s=i.join("\n"),a=new(n.async?Me:Function)("value","context",s);this.opts.debug&&console.log(this._formatter("// Main check function\n"+a.toString())),this.cache.clear();const o=function(e,i){return n.data=e,i&&i.meta&&(n.meta=i.meta),a.call(t,e,n)};return o.async=n.async,o}compileRule(e,t,n,i,r){const s=[],a=this.cache.get(e.schema);if(a)(e=a).cycle=!0,e.cycleStack=[],s.push(this.wrapRequiredCheckSourceCode(e,`\n\t\t\t\tvar rule = context.rules[${e.index}];\n\t\t\t\tif (rule.cycleStack.indexOf(value) === -1) {\n\t\t\t\t\trule.cycleStack.push(value);\n\t\t\t\t\t${i.replace(/%%INDEX%%/g,e.index)}\n\t\t\t\t\trule.cycleStack.pop(value);\n\t\t\t\t}\n\t\t\t`,t,r));else{this.cache.set(e.schema,e),e.index=t.index,t.rules[t.index]=e;const a=null!=n?n:"$$root";t.index++;const o=e.ruleFunction.call(this,e,n,t);o.source=o.source.replace(/%%INDEX%%/g,e.index);const u=new(t.async?Me:Function)("value","field","parent","errors","context",o.source);t.fn[e.index]=u.bind(this),s.push(this.wrapRequiredCheckSourceCode(e,i.replace(/%%INDEX%%/g,e.index),t,r)),s.push(this.makeCustomValidator({vName:r,path:a,schema:e.schema,context:t,messages:e.messages,ruleIndex:e.index})),this.opts.debug&&console.log(this._formatter(`// Context.fn[${e.index}]\n`+u.toString()))}return s.join("\n")}getRuleFromSchema(e){e=this.resolveType(e);const t=this.aliases[e.type];t&&(delete e.type,e=Ae(e,t,{skipIfExist:!0}));const n=this.rules[e.type];if(!n)throw new Error("Invalid '"+e.type+"' type in validator schema.");return{messages:Object.assign({},this.messages,e.messages),schema:Ae(e,this.defaults[e.type],{skipIfExist:!0}),ruleFunction:n}}parseShortHand(e){const t=e.split("|").map((e=>e.trim()));let n,i=t[0];return n=i.endsWith("[]")?this.getRuleFromSchema({type:"array",items:i.slice(0,-2)}).schema:{type:t[0]},t.slice(1).map((e=>{const t=e.indexOf(":");if(-1!==t){const i=e.substr(0,t).trim();let r=e.substr(t+1).trim();"true"===r||"false"===r?r="true"===r:Number.isNaN(Number(r))||(r=Number(r)),n[i]=r}else e.startsWith("no-")?n[e.slice(3)]=!1:n[e]=!0})),n}makeError({type:e,field:t,expected:n,actual:i,messages:r}){const s={type:`"${e}"`,message:`"${r[e]}"`};return s.field=t?`"${t}"`:"field",null!=n&&(s.expected=n),null!=i&&(s.actual=i),`errors.push({ ${Object.keys(s).map((e=>`${e}: ${s[e]}`)).join(", ")} });`}makeCustomValidator({vName:e="value",fnName:t="custom",ruleIndex:n,path:i,schema:r,context:s,messages:a}){const o="rule"+n,u="fnCustomErrors"+n;if("function"==typeof r[t]){if(s.customs[n]?(s.customs[n].messages=a,s.customs[n].schema=r):s.customs[n]={messages:a,schema:r},this.opts.useNewCustomCheckerFunction)return`\n               \t\tconst ${o} = context.customs[${n}];\n\t\t\t\t\tconst ${u} = [];\n\t\t\t\t\t${e} = ${s.async?"await ":""}${o}.schema.${t}.call(this, ${e}, ${u} , ${o}.schema, "${i}", parent, context);\n\t\t\t\t\tif (Array.isArray(${u} )) {\n                  \t\t${u} .forEach(err => errors.push(Object.assign({ message: ${o}.messages[err.type], field }, err)));\n\t\t\t\t\t}\n\t\t\t\t`;const l="res_"+o;return`\n\t\t\t\tconst ${o} = context.customs[${n}];\n\t\t\t\tconst ${l} = ${s.async?"await ":""}${o}.schema.${t}.call(this, ${e}, ${o}.schema, "${i}", parent, context);\n\t\t\t\tif (Array.isArray(${l})) {\n\t\t\t\t\t${l}.forEach(err => errors.push(Object.assign({ message: ${o}.messages[err.type], field }, err)));\n\t\t\t\t}\n\t\t`}return""}add(e,t){this.rules[e]=t}addMessage(e,t){this.messages[e]=t}alias(e,t){if(this.rules[e])throw new Error("Alias name must not be a rule name");this.aliases[e]=t}plugin(e){if("function"!=typeof e)throw new Error("Plugin fn type must be function");return e(this)}resolveType(e){if("string"==typeof e)e=this.parseShortHand(e);else if(Array.isArray(e)){if(0===e.length)throw new Error("Invalid schema.");(e={type:"multi",rules:e}).rules.map((e=>this.getRuleFromSchema(e))).every((e=>!0===e.schema.optional))&&(e.optional=!0)}if(e.$$type){const t=e.$$type,n=this.getRuleFromSchema(t).schema;delete e.$$type;const i=Object.assign({},e);for(const t in e)delete e[t];Ae(e,n,{skipIfExist:!0}),e.props=i}return e}normalize(e){let t=this.resolveType(e);if(this.aliases[t.type]&&(t=Ae(t,this.normalize(this.aliases[t.type]),{skipIfExists:!0})),t=Ae(t,this.defaults[t.type],{skipIfExist:!0}),"multi"===t.type)return t.rules=t.rules.map((e=>this.normalize(e))),t.optional=t.rules.every((e=>!0===e.optional)),t;if("array"===t.type)return t.items=this.normalize(t.items),t;if("object"===t.type&&t.props&&Object.entries(t.props).forEach((([e,n])=>t.props[e]=this.normalize(n))),"object"==typeof e)if(e.type){const n=this.normalize(e.type);Ae(t,n,{skipIfExists:!0})}else Object.entries(e).forEach((([e,n])=>t[e]=this.normalize(n)));return t}},De=/({{ *| *}})/g;function _e(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object.keys(e).join("|");if(""===n)return!1;var i="(\\b(".concat(n,")\\b)(((\\.[a-zA-Z_][a-zA-Z0-9_]*)|(\\[[0-9]*\\]))*)(?![a-z,A-Z_0-9])");return t?i:new RegExp(i,"g")}var Be=/{{((?!}}).)*}}/g,qe=/( *mc-if *= *" *)[^"]*(?=")/g,Ve=/'.*'/g,je=/^ *([0-9.]+|('([^']|\\')*([^\\]')))( *\+ *([0-9.]+|('([^']|\\')*([^\\]'))))* *$/g,Le=/^( *([0-9.]+|('([^']|\\')*([^\\]')))( *\+ *([0-9.]+|('([^']|\\')*([^\\]'))))* *)(==|===)( *([0-9.]+|('([^']|\\')*([^\\]')))( *\+ *([0-9.]+|('([^']|\\')*([^\\]'))))* *)$/g,Ne=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:j,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window;mi(r,i)||(r[i]={});for(var s=r[i],a=e.split("."),o=0;o<a.length-1;o++)mi(s,a[o])||(s[a[o]]={}),s=s[a[o]];return!(mi(s,a[a.length-1])&&!n||(s[a[a.length-1]]=t,0))},Re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j;""!==t&&(e=t+"."+e);for(var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,r=e.replaceAll(/\]/g,"").replaceAll(/\[/g,".").split("."),s=0;s<r.length;s++){if(!mi(i,r[s]))return;n=i[r[s]],i=i[r[s]]}return n},Fe="INUMBER",$e="IOP1",ze="IOP2",He="IOP3",We="IVAR",Ge="IVARNAME",Ue="IFUNCALL",Je="IFUNDEF",Ke="IEXPR",Xe="IEXPREVAL",Qe="IMEMBER",Ye="IENDSTATEMENT",Ze="IARRAY";function et(e,t){this.type=e,this.value=null!=t?t:0}function tt(e){return new et($e,e)}function nt(e){return new et(ze,e)}function it(e){return new et(He,e)}function rt(e,t,n,i,r){for(var s,a,o,u,l=[],c=[],p=0;p<e.length;p++){var d=e[p],h=d.type;if(h===Fe||h===Ge)Array.isArray(d.value)?l.push.apply(l,rt(d.value.map((function(e){return new et(Fe,e)})).concat(new et(Ze,d.value.length)),t,n,i,r)):l.push(d);else if(h===We&&r.hasOwnProperty(d.value))d=new et(Fe,r[d.value]),l.push(d);else if(h===ze&&l.length>1)a=l.pop(),s=l.pop(),u=n[d.value],d=new et(Fe,u(s.value,a.value)),l.push(d);else if(h===He&&l.length>2)o=l.pop(),a=l.pop(),s=l.pop(),"?"===d.value?l.push(s.value?a.value:o.value):(u=i[d.value],d=new et(Fe,u(s.value,a.value,o.value)),l.push(d));else if(h===$e&&l.length>0)s=l.pop(),u=t[d.value],d=new et(Fe,u(s.value)),l.push(d);else if(h===Ke){for(;l.length>0;)c.push(l.shift());c.push(new et(Ke,rt(d.value,t,n,i,r)))}else if(h===Qe&&l.length>0)s=l.pop(),l.push(new et(Fe,s.value[d.value]));else{for(;l.length>0;)c.push(l.shift());c.push(d)}}for(;l.length>0;)c.push(l.shift());return c}function st(e,t,n){for(var i=[],r=0;r<e.length;r++){var s=e[r],a=s.type;if(a===We&&s.value===t)for(var o=0;o<n.tokens.length;o++){var u,l=n.tokens[o];u=l.type===$e?tt(l.value):l.type===ze?nt(l.value):l.type===He?it(l.value):new et(l.type,l.value),i.push(u)}else a===Ke?i.push(new et(Ke,st(s.value,t,n))):i.push(s)}return i}function at(e,t,n){var i,r,s,a,o,u,l=[];if(ut(e))return lt(e,n);for(var c=e.length,p=0;p<c;p++){var d=e[p],h=d.type;if(h===Fe||h===Ge)l.push(d.value);else if(h===ze)r=l.pop(),i=l.pop(),"and"===d.value?l.push(!!i&&!!at(r,t,n)):"or"===d.value?l.push(!!i||!!at(r,t,n)):"="===d.value?(a=t.binaryOps[d.value],l.push(a(i,at(r,t,n),n))):(a=t.binaryOps[d.value],l.push(a(lt(i,n),lt(r,n))));else if(h===He)s=l.pop(),r=l.pop(),i=l.pop(),"?"===d.value?l.push(at(i?r:s,t,n)):(a=t.ternaryOps[d.value],l.push(a(lt(i,n),lt(r,n),lt(s,n))));else if(h===We)if(d.value in t.functions)l.push(t.functions[d.value]);else if(d.value in t.unaryOps&&t.parser.isOperatorEnabled(d.value))l.push(t.unaryOps[d.value]);else{var m=n[d.value];if(void 0===m)throw new Error("undefined variable: "+d.value);l.push(m)}else if(h===$e)i=l.pop(),a=t.unaryOps[d.value],l.push(a(lt(i,n)));else if(h===Ue){for(u=d.value,o=[];u-- >0;)o.unshift(lt(l.pop(),n));if(!(a=l.pop()).apply||!a.call)throw new Error(a+" is not a function");l.push(a.apply(void 0,o))}else if(h===Je)l.push(function(){for(var e=l.pop(),i=[],r=d.value;r-- >0;)i.unshift(l.pop());var s=l.pop(),a=function(){for(var r=Object.assign({},n),s=0,a=i.length;s<a;s++)r[i[s]]=arguments[s];return at(e,t,r)};return Object.defineProperty(a,"name",{value:s,writable:!1}),n[s]=a,a}());else if(h===Ke)l.push(ot(d,t));else if(h===Xe)l.push(d);else if(h===Qe)i=l.pop(),l.push(i[d.value]);else if(h===Ye)l.pop();else{if(h!==Ze)throw new Error("invalid Expression");for(u=d.value,o=[];u-- >0;)o.unshift(l.pop());l.push(o)}}if(l.length>1)throw new Error("invalid Expression (parity)");return 0===l[0]?0:lt(l[0],n)}function ot(e,t,n){return ut(e)?e:{type:Xe,value:function(n){return at(e.value,t,n)}}}function ut(e){return e&&e.type===Xe}function lt(e,t){return ut(e)?e.value(t):e}function ct(e,t){for(var n,i,r,s,a,o,u=[],l=0;l<e.length;l++){var c=e[l],p=c.type;if(p===Fe)"number"==typeof c.value&&c.value<0?u.push("("+c.value+")"):Array.isArray(c.value)?u.push("["+c.value.map(pt).join(", ")+"]"):u.push(pt(c.value));else if(p===ze)i=u.pop(),n=u.pop(),s=c.value,t?"^"===s?u.push("Math.pow("+n+", "+i+")"):"and"===s?u.push("(!!"+n+" && !!"+i+")"):"or"===s?u.push("(!!"+n+" || !!"+i+")"):"||"===s?u.push("(function(a,b){ return Array.isArray(a) && Array.isArray(b) ? a.concat(b) : String(a) + String(b); }(("+n+"),("+i+")))"):"=="===s?u.push("("+n+" === "+i+")"):"!="===s?u.push("("+n+" !== "+i+")"):"["===s?u.push(n+"[("+i+") | 0]"):u.push("("+n+" "+s+" "+i+")"):"["===s?u.push(n+"["+i+"]"):u.push("("+n+" "+s+" "+i+")");else if(p===He){if(r=u.pop(),i=u.pop(),n=u.pop(),"?"!==(s=c.value))throw new Error("invalid Expression");u.push("("+n+" ? "+i+" : "+r+")")}else if(p===We||p===Ge)u.push(c.value);else if(p===$e)n=u.pop(),"-"===(s=c.value)||"+"===s?u.push("("+s+n+")"):t?"not"===s?u.push("(!"+n+")"):"!"===s?u.push("fac("+n+")"):u.push(s+"("+n+")"):"!"===s?u.push("("+n+"!)"):u.push("("+s+" "+n+")");else if(p===Ue){for(o=c.value,a=[];o-- >0;)a.unshift(u.pop());s=u.pop(),u.push(s+"("+a.join(", ")+")")}else if(p===Je){for(i=u.pop(),o=c.value,a=[];o-- >0;)a.unshift(u.pop());n=u.pop(),t?u.push("("+n+" = function("+a.join(", ")+") { return "+i+" })"):u.push("("+n+"("+a.join(", ")+") = "+i+")")}else if(p===Qe)n=u.pop(),u.push(n+"."+c.value);else if(p===Ze){for(o=c.value,a=[];o-- >0;)a.unshift(u.pop());u.push("["+a.join(", ")+"]")}else if(p===Ke)u.push("("+ct(c.value,t)+")");else if(p!==Ye)throw new Error("invalid Expression")}return u.length>1&&(u=t?[u.join(",")]:[u.join(";")]),String(u[0])}function pt(e){return"string"==typeof e?JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):e}function dt(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}function ht(e,t,n){for(var i=!!(n=n||{}).withMembers,r=null,s=0;s<e.length;s++){var a=e[s];a.type===We||a.type===Ge?i||dt(t,a.value)?null!==r?(dt(t,r)||t.push(r),r=a.value):r=a.value:t.push(a.value):a.type===Qe&&i&&null!==r?r+="."+a.value:a.type===Ke?ht(a.value,t,n):null!==r&&(dt(t,r)||t.push(r),r=null)}null===r||dt(t,r)||t.push(r)}function mt(e,t){this.tokens=e,this.parser=t,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.functions=t.functions}et.prototype.toString=function(){switch(this.type){case Fe:case $e:case ze:case He:case We:case Ge:case Ye:return this.value;case Ue:return"CALL "+this.value;case Je:return"DEF "+this.value;case Ze:return"ARRAY "+this.value;case Qe:return"."+this.value;default:return"Invalid Instruction"}},mt.prototype.simplify=function(e){return e=e||{},new mt(rt(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,e),this.parser)},mt.prototype.substitute=function(e,t){return t instanceof mt||(t=this.parser.parse(String(t))),new mt(st(this.tokens,e,t),this.parser)},mt.prototype.evaluate=function(e){return e=e||{},at(this.tokens,this,e)},mt.prototype.toString=function(){return ct(this.tokens,!1)},mt.prototype.symbols=function(e){e=e||{};var t=[];return ht(this.tokens,t,e),t},mt.prototype.variables=function(e){e=e||{};var t=[];ht(this.tokens,t,e);var n=this.functions;return t.filter((function(e){return!(e in n)}))},mt.prototype.toJSFunction=function(e,t){var n=this,i=new Function(e,"with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return "+ct(this.simplify(t).tokens,!0)+"; }");return function(){return i.apply(n,arguments)}};var ft="TEOF",vt="TOP",gt="TNUMBER",yt="TSTRING",bt="TPAREN",xt="TBRACKET",kt="TCOMMA",wt="TNAME",Ct="TSEMICOLON";function It(e,t,n){this.type=e,this.value=t,this.index=n}function Et(e,t){this.pos=0,this.current=null,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.consts=e.consts,this.expression=t,this.savedPosition=0,this.savedCurrent=null,this.options=e.options,this.parser=e}It.prototype.toString=function(){return this.type+": "+this.value},Et.prototype.newToken=function(e,t,n){return new It(e,t,null!=n?n:this.pos)},Et.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current},Et.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent},Et.prototype.next=function(){return this.pos>=this.expression.length?this.newToken(ft,"EOF"):this.isWhitespace()||this.isComment()?this.next():this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName()?this.current:void this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')},Et.prototype.isString=function(){var e=!1,t=this.pos,n=this.expression.charAt(t);if("'"===n||'"'===n)for(var i=this.expression.indexOf(n,t+1);i>=0&&this.pos<this.expression.length;){if(this.pos=i+1,"\\"!==this.expression.charAt(i-1)){var r=this.expression.substring(t+1,i);this.current=this.newToken(yt,this.unescape(r),t),e=!0;break}i=this.expression.indexOf(n,i+1)}return e},Et.prototype.isParen=function(){var e=this.expression.charAt(this.pos);return("("===e||")"===e)&&(this.current=this.newToken(bt,e),this.pos++,!0)},Et.prototype.isBracket=function(){var e=this.expression.charAt(this.pos);return!("["!==e&&"]"!==e||!this.isOperatorEnabled("[")||(this.current=this.newToken(xt,e),this.pos++,0))},Et.prototype.isComma=function(){return","===this.expression.charAt(this.pos)&&(this.current=this.newToken(kt,","),this.pos++,!0)},Et.prototype.isSemicolon=function(){return";"===this.expression.charAt(this.pos)&&(this.current=this.newToken(Ct,";"),this.pos++,!0)},Et.prototype.isConst=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var n=this.expression.charAt(t);if(n.toUpperCase()===n.toLowerCase()&&(t===this.pos||"_"!==n&&"."!==n&&(n<"0"||n>"9")))break}if(t>e){var i=this.expression.substring(e,t);if(i in this.consts)return this.current=this.newToken(gt,this.consts[i]),this.pos+=i.length,!0}return!1},Et.prototype.isNamedOp=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var n=this.expression.charAt(t);if(n.toUpperCase()===n.toLowerCase()&&(t===this.pos||"_"!==n&&(n<"0"||n>"9")))break}if(t>e){var i=this.expression.substring(e,t);if(this.isOperatorEnabled(i)&&(i in this.binaryOps||i in this.unaryOps||i in this.ternaryOps))return this.current=this.newToken(vt,i),this.pos+=i.length,!0}return!1},Et.prototype.isName=function(){for(var e=this.pos,t=e,n=!1;t<this.expression.length;t++){var i=this.expression.charAt(t);if(i.toUpperCase()===i.toLowerCase()){if(t===this.pos&&("$"===i||"_"===i)){"_"===i&&(n=!0);continue}if(t===this.pos||!n||"_"!==i&&(i<"0"||i>"9"))break}else n=!0}if(n){var r=this.expression.substring(e,t);return this.current=this.newToken(wt,r),this.pos+=r.length,!0}return!1},Et.prototype.isWhitespace=function(){for(var e=!1,t=this.expression.charAt(this.pos);!(" "!==t&&"\t"!==t&&"\n"!==t&&"\r"!==t||(e=!0,this.pos++,this.pos>=this.expression.length));)t=this.expression.charAt(this.pos);return e};var St=/^[0-9a-f]{4}$/i;function Pt(e,t,n){this.parser=e,this.tokens=t,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=!1!==n.allowMemberAccess}Et.prototype.unescape=function(e){var t=e.indexOf("\\");if(t<0)return e;for(var n=e.substring(0,t);t>=0;){var i=e.charAt(++t);switch(i){case"'":n+="'";break;case'"':n+='"';break;case"\\":n+="\\";break;case"/":n+="/";break;case"b":n+="\b";break;case"f":n+="\f";break;case"n":n+="\n";break;case"r":n+="\r";break;case"t":n+="\t";break;case"u":var r=e.substring(t+1,t+5);St.test(r)||this.parseError("Illegal escape sequence: \\u"+r),n+=String.fromCharCode(parseInt(r,16)),t+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+i+'"')}++t;var s=e.indexOf("\\",t);n+=e.substring(t,s<0?e.length:s),t=s}return n},Et.prototype.isComment=function(){return"/"===this.expression.charAt(this.pos)&&"*"===this.expression.charAt(this.pos+1)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)},Et.prototype.isRadixInteger=function(){var e,t,n=this.pos;if(n>=this.expression.length-2||"0"!==this.expression.charAt(n))return!1;if(++n,"x"===this.expression.charAt(n))e=16,t=/^[0-9a-f]$/i,++n;else{if("b"!==this.expression.charAt(n))return!1;e=2,t=/^[01]$/i,++n}for(var i=!1,r=n;n<this.expression.length;){var s=this.expression.charAt(n);if(!t.test(s))break;n++,i=!0}return i&&(this.current=this.newToken(gt,parseInt(this.expression.substring(r,n),e)),this.pos=n),i},Et.prototype.isNumber=function(){for(var e,t=!1,n=this.pos,i=n,r=n,s=!1,a=!1;n<this.expression.length&&((e=this.expression.charAt(n))>="0"&&e<="9"||!s&&"."===e);)"."===e?s=!0:a=!0,n++,t=a;if(t&&(r=n),"e"===e||"E"===e){n++;for(var o=!0,u=!1;n<this.expression.length;){if(e=this.expression.charAt(n),!o||"+"!==e&&"-"!==e){if(!(e>="0"&&e<="9"))break;u=!0,o=!1}else o=!1;n++}u||(n=r)}return t?(this.current=this.newToken(gt,parseFloat(this.expression.substring(i,n))),this.pos=n):this.pos=r,t},Et.prototype.isOperator=function(){var e=this.pos,t=this.expression.charAt(this.pos);if("+"===t||"-"===t||"*"===t||"/"===t||"%"===t||"^"===t||"?"===t||":"===t||"."===t)this.current=this.newToken(vt,t);else if(""===t||""===t)this.current=this.newToken(vt,"*");else if(">"===t)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(vt,">="),this.pos++):this.current=this.newToken(vt,">");else if("<"===t)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(vt,"<="),this.pos++):this.current=this.newToken(vt,"<");else if("|"===t){if("|"!==this.expression.charAt(this.pos+1))return!1;this.current=this.newToken(vt,"||"),this.pos++}else if("="===t)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(vt,"=="),this.pos++):this.current=this.newToken(vt,t);else{if("!"!==t)return!1;"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(vt,"!="),this.pos++):this.current=this.newToken(vt,t)}return this.pos++,!!this.isOperatorEnabled(this.current.value)||(this.pos=e,!1)},Et.prototype.isOperatorEnabled=function(e){return this.parser.isOperatorEnabled(e)},Et.prototype.getCoordinates=function(){var e,t=0,n=-1;do{t++,e=this.pos-n,n=this.expression.indexOf("\n",n+1)}while(n>=0&&n<this.pos);return{line:t,column:e}},Et.prototype.parseError=function(e){var t=this.getCoordinates();throw new Error("parse error ["+t.line+":"+t.column+"]: "+e)},Pt.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()},Pt.prototype.tokenMatches=function(e,t){return void 0===t||(Array.isArray(t)?dt(t,e.value):"function"==typeof t?t(e):e.value===t)},Pt.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()},Pt.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken},Pt.prototype.accept=function(e,t){return!(this.nextToken.type!==e||!this.tokenMatches(this.nextToken,t)||(this.next(),0))},Pt.prototype.expect=function(e,t){if(!this.accept(e,t)){var n=this.tokens.getCoordinates();throw new Error("parse error ["+n.line+":"+n.column+"]: Expected "+(t||e))}},Pt.prototype.parseAtom=function(e){var t=this.tokens.unaryOps;if(this.accept(wt)||this.accept(vt,(function(e){return e.value in t})))e.push(new et(We,this.current.value));else if(this.accept(gt))e.push(new et(Fe,this.current.value));else if(this.accept(yt))e.push(new et(Fe,this.current.value));else if(this.accept(bt,"("))this.parseExpression(e),this.expect(bt,")");else{if(!this.accept(xt,"["))throw new Error("unexpected "+this.nextToken);if(this.accept(xt,"]"))e.push(new et(Ze,0));else{var n=this.parseArrayList(e);e.push(new et(Ze,n))}}},Pt.prototype.parseExpression=function(e){var t=[];this.parseUntilEndStatement(e,t)||(this.parseVariableAssignmentExpression(t),this.parseUntilEndStatement(e,t)||this.pushExpression(e,t))},Pt.prototype.pushExpression=function(e,t){for(var n=0,i=t.length;n<i;n++)e.push(t[n])},Pt.prototype.parseUntilEndStatement=function(e,t){return!!this.accept(Ct)&&(!this.nextToken||this.nextToken.type===ft||this.nextToken.type===bt&&")"===this.nextToken.value||t.push(new et(Ye)),this.nextToken.type!==ft&&this.parseExpression(t),e.push(new et(Ke,t)),!0)},Pt.prototype.parseArrayList=function(e){for(var t=0;!this.accept(xt,"]");)for(this.parseExpression(e),++t;this.accept(kt);)this.parseExpression(e),++t;return t},Pt.prototype.parseVariableAssignmentExpression=function(e){for(this.parseConditionalExpression(e);this.accept(vt,"=");){var t=e.pop(),n=[],i=e.length-1;if(t.type!==Ue){if(t.type!==We&&t.type!==Qe)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(n),e.push(new et(Ge,t.value)),e.push(new et(Ke,n)),e.push(nt("="))}else{if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var r=0,s=t.value+1;r<s;r++){var a=i-r;e[a].type===We&&(e[a]=new et(Ge,e[a].value))}this.parseVariableAssignmentExpression(n),e.push(new et(Ke,n)),e.push(new et(Je,t.value))}}},Pt.prototype.parseConditionalExpression=function(e){for(this.parseOrExpression(e);this.accept(vt,"?");){var t=[],n=[];this.parseConditionalExpression(t),this.expect(vt,":"),this.parseConditionalExpression(n),e.push(new et(Ke,t)),e.push(new et(Ke,n)),e.push(it("?"))}},Pt.prototype.parseOrExpression=function(e){for(this.parseAndExpression(e);this.accept(vt,"or");){var t=[];this.parseAndExpression(t),e.push(new et(Ke,t)),e.push(nt("or"))}},Pt.prototype.parseAndExpression=function(e){for(this.parseComparison(e);this.accept(vt,"and");){var t=[];this.parseComparison(t),e.push(new et(Ke,t)),e.push(nt("and"))}};var Mt=["==","!=","<","<=",">=",">","in"];Pt.prototype.parseComparison=function(e){for(this.parseAddSub(e);this.accept(vt,Mt);){var t=this.current;this.parseAddSub(e),e.push(nt(t.value))}};var At=["+","-","||"];Pt.prototype.parseAddSub=function(e){for(this.parseTerm(e);this.accept(vt,At);){var t=this.current;this.parseTerm(e),e.push(nt(t.value))}};var Ot=["*","/","%"];function Tt(e,t){return Number(e)+Number(t)}function Dt(e,t){return e-t}function _t(e,t){return e*t}function Bt(e,t){return e/t}function qt(e,t){return e%t}function Vt(e,t){return Array.isArray(e)&&Array.isArray(t)?e.concat(t):""+e+t}function jt(e,t){return e===t}function Lt(e,t){return e!==t}function Nt(e,t){return e>t}function Rt(e,t){return e<t}function Ft(e,t){return e>=t}function $t(e,t){return e<=t}function zt(e,t){return Boolean(e&&t)}function Ht(e,t){return Boolean(e||t)}function Wt(e,t){return dt(t,e)}function Gt(e){return(Math.exp(e)-Math.exp(-e))/2}function Ut(e){return(Math.exp(e)+Math.exp(-e))/2}function Jt(e){return e===1/0?1:e===-1/0?-1:(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}function Kt(e){return e===-1/0?e:Math.log(e+Math.sqrt(e*e+1))}function Xt(e){return Math.log(e+Math.sqrt(e*e-1))}function Qt(e){return Math.log((1+e)/(1-e))/2}function Yt(e){return Math.log(e)*Math.LOG10E}function Zt(e){return-e}function en(e){return!e}function tn(e){return e<0?Math.ceil(e):Math.floor(e)}function nn(e){return Math.random()*(e||1)}function rn(e){return an(e+1)}Pt.prototype.parseTerm=function(e){for(this.parseFactor(e);this.accept(vt,Ot);){var t=this.current;this.parseFactor(e),e.push(nt(t.value))}},Pt.prototype.parseFactor=function(e){var t=this.tokens.unaryOps;if(this.save(),this.accept(vt,(function(e){return e.value in t}))){if("-"!==this.current.value&&"+"!==this.current.value){if(this.nextToken.type===bt&&"("===this.nextToken.value)return this.restore(),void this.parseExponential(e);if(this.nextToken.type===Ct||this.nextToken.type===kt||this.nextToken.type===ft||this.nextToken.type===bt&&")"===this.nextToken.value)return this.restore(),void this.parseAtom(e)}var n=this.current;this.parseFactor(e),e.push(tt(n.value))}else this.parseExponential(e)},Pt.prototype.parseExponential=function(e){for(this.parsePostfixExpression(e);this.accept(vt,"^");)this.parseFactor(e),e.push(nt("^"))},Pt.prototype.parsePostfixExpression=function(e){for(this.parseFunctionCall(e);this.accept(vt,"!");)e.push(tt("!"))},Pt.prototype.parseFunctionCall=function(e){var t=this.tokens.unaryOps;if(this.accept(vt,(function(e){return e.value in t}))){var n=this.current;this.parseAtom(e),e.push(tt(n.value))}else for(this.parseMemberExpression(e);this.accept(bt,"(");)if(this.accept(bt,")"))e.push(new et(Ue,0));else{var i=this.parseArgumentList(e);e.push(new et(Ue,i))}},Pt.prototype.parseArgumentList=function(e){for(var t=0;!this.accept(bt,")");)for(this.parseExpression(e),++t;this.accept(kt);)this.parseExpression(e),++t;return t},Pt.prototype.parseMemberExpression=function(e){for(this.parseAtom(e);this.accept(vt,".")||this.accept(xt,"[");){var t=this.current;if("."===t.value){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');this.expect(wt),e.push(new et(Qe,this.current.value))}else{if("["!==t.value)throw new Error("unexpected symbol: "+t.value);if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(e),this.expect(xt,"]"),e.push(nt("["))}}};var sn=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function an(e){var t,n;if(function(e){return isFinite(e)&&e===Math.round(e)}(e)){if(e<=0)return isFinite(e)?1/0:NaN;if(e>171)return 1/0;for(var i=e-2,r=e-1;i>1;)r*=i,i--;return 0===r&&(r=1),r}if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*an(1-e));if(e>=171.35)return 1/0;if(e>85){var s=e*e,a=s*e,o=a*e,u=o*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*s)-139/(51840*a)-571/(2488320*o)+163879/(209018880*u)+5246819/(75246796800*u*e))}--e,n=sn[0];for(var l=1;l<sn.length;++l)n+=sn[l]/(e+l);return t=e+4.7421875+.5,Math.sqrt(2*Math.PI)*Math.pow(t,e+.5)*Math.exp(-t)*n}function on(e){return Array.isArray(e)?e.length:String(e).length}function un(){for(var e=0,t=0,n=0;n<arguments.length;n++){var i,r=Math.abs(arguments[n]);t<r?(e=e*(i=t/r)*i+1,t=r):e+=r>0?(i=r/t)*i:r}return t===1/0?1/0:t*Math.sqrt(e)}function ln(e,t,n){return e?t:n}function cn(e,t){return void 0===t||0==+t?Math.round(e):(e=+e,t=-+t,isNaN(e)||"number"!=typeof t||t%1!=0?NaN:(e=e.toString().split("e"),+((e=(e=Math.round(+(e[0]+"e"+(e[1]?+e[1]-t:-t)))).toString().split("e"))[0]+"e"+(e[1]?+e[1]+t:t))))}function pn(e,t,n){return n&&(n[e]=t),t}function dn(e,t){return e[0|t]}function hn(e){return 1===arguments.length&&Array.isArray(e)?Math.max.apply(Math,e):Math.max.apply(Math,arguments)}function mn(e){return 1===arguments.length&&Array.isArray(e)?Math.min.apply(Math,e):Math.min.apply(Math,arguments)}function fn(e,t){if("function"!=typeof e)throw new Error("First argument to map is not a function");if(!Array.isArray(t))throw new Error("Second argument to map is not an array");return t.map((function(t,n){return e(t,n)}))}function vn(e,t,n){if("function"!=typeof e)throw new Error("First argument to fold is not a function");if(!Array.isArray(n))throw new Error("Second argument to fold is not an array");return n.reduce((function(t,n,i){return e(t,n,i)}),t)}function gn(e,t){if("function"!=typeof e)throw new Error("First argument to filter is not a function");if(!Array.isArray(t))throw new Error("Second argument to filter is not an array");return t.filter((function(t,n){return e(t,n)}))}function yn(e,t){if(!Array.isArray(t)&&"string"!=typeof t)throw new Error("Second argument to indexOf is not a string or array");return t.indexOf(e)}function bn(e,t){if(!Array.isArray(t))throw new Error("Second argument to join is not an array");return t.join(e)}function xn(e){return(e>0)-(e<0)||+e}var kn=1/3;function wn(e){return e<0?-Math.pow(-e,kn):Math.pow(e,kn)}function Cn(e){return Math.exp(e)-1}function In(e){return Math.log(1+e)}function En(e){return Math.log(e)/Math.LN2}function Sn(e){this.options=e||{},this.unaryOps={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:Math.sinh||Gt,cosh:Math.cosh||Ut,tanh:Math.tanh||Jt,asinh:Math.asinh||Kt,acosh:Math.acosh||Xt,atanh:Math.atanh||Qt,sqrt:Math.sqrt,cbrt:Math.cbrt||wn,log:Math.log,log2:Math.log2||En,ln:Math.log,lg:Math.log10||Yt,log10:Math.log10||Yt,expm1:Math.expm1||Cn,log1p:Math.log1p||In,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:Math.trunc||tn,"-":Zt,"+":Number,exp:Math.exp,not:en,length:on,"!":rn,sign:Math.sign||xn},this.binaryOps={"+":Tt,"-":Dt,"*":_t,"/":Bt,"%":qt,"^":Math.pow,"||":Vt,"==":jt,"!=":Lt,">":Nt,"<":Rt,">=":Ft,"<=":$t,and:zt,or:Ht,in:Wt,"=":pn,"[":dn},this.ternaryOps={"?":ln},this.functions={random:nn,fac:rn,min:mn,max:hn,hypot:Math.hypot||un,pyt:Math.hypot||un,pow:Math.pow,atan2:Math.atan2,if:ln,gamma:an,roundTo:cn,map:fn,fold:vn,filter:gn,indexOf:yn,join:bn},this.consts={E:Math.E,PI:Math.PI,true:!0,false:!1}}Sn.prototype.parse=function(e){var t=[],n=new Pt(this,new Et(this,e),{allowMemberAccess:this.options.allowMemberAccess});return n.parseExpression(t),n.expect(ft,"EOF"),new mt(t,this)},Sn.prototype.evaluate=function(e,t){return this.parse(e).evaluate(t)};var Pn=new Sn;Sn.parse=function(e){return Pn.parse(e)},Sn.evaluate=function(e,t){return Pn.parse(e).evaluate(t)};var Mn={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",and:"logical",or:"logical",not:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};Sn.prototype.isOperatorEnabled=function(e){var t=function(e){return Mn.hasOwnProperty(e)?Mn[e]:e}(e),n=this.options.operators||{};return!(t in n)||!!n[t]};var An=new Set(["getValue","setValue","_getFromProxy","__createPathProxies","hasOwnProperty","pushValue","removePathKey","removeKey","restoreKey","getKeys","exportFlattened","isArray","push","sortBy","findIndex"]);function On(e){var t={},n=new Set,i=Array.isArray(e),r=i?e.length:0,s=null;return new Proxy(e,{get:function(a,o){return"length"===o&&i?r:An.has(o)?this[o]:n.has(o)?void 0:(i&&null!==s&&(o=s[o]),mi(t,o)?t[o]:e[o])},isArray:function(){return i},_getFromProxy:function(e){return mi(t,e)?t[e]:void 0},set:Pi,sortBy:function(e){if(s=null,!i)return!1;s=function(e,t){for(var n=[],i=0;i<e.length;i++)n.push([e[i],i]);n.sort((function(e,n){return e[0][t]<n[0][t]?-1:1}));var r=[];for(var s in n)r.push(n[s][1]);return r}(this,e)},__createPathProxies:function(n){for(var r=t,a=e,o=0;o<n.length-1;o++){var u=i&&null!==s?s[n[o]]:n[o];if(0===o?void 0===r[u]:void 0===r._getFromProxy(u)){var l=On(void 0!==a&&a[u]||{});0===o?r[u]=l:r.setValue(u,l)}r=r[u],a=void 0!==a?a[u]:{}}return{currentObject:r,currentRealObect:a}},findIndex:function(e){if(!i)return null;for(var t=0;t<r;t++)if(e(this[t]))return t;return null},setValue:function(e,t){var i=e.split("."),r=this.__createPathProxies(i).currentObject,s=t;return di(t)&&(s=On(t)),1===i.length?(r[i[i.length-1]]=s,n.delete(s)):(r.setValue(i[i.length-1],s),r.restoreKey(i[i.length-1])),!0},pushValue:function(t,n){var i=t.split("."),r=this.__createPathProxies(i),s=r.currentObject;if(void 0===r.currentRealObect)return!1;var a=i[i.length-1],o=s[a],u=e[a];if(""===t&&(o=this,u=e),1!==i.length)return s.pushValue(a,n);var l=!1;if(void 0!==o){if(l=!0,!o.isArray())return!1}else if(!Array.isArray(u))return!1;if(!l){var c=On(u);s[a]=c,o=s[a]}return o.push(n),!0},push:function(e){return!!this.isArray()&&(t[r]=di(e)?On(e):e,r+=1,!0)},removePathKey:function(e){var t=e.split(".");return this.__createPathProxies(t).currentObject.removeKey(t[t.length-1]),!0},removeKey:function(e){n.add(e)},restoreKey:function(e){n.delete(e)},hasOwnProperty:function(e){return!(n.has(e)||void 0===this[e])},getKeys:function(){var r;if(i)return[];var s=Object.keys(e);return(r=s).push.apply(r,b(Object.keys(t))),s.filter((function(e){return!n.has(e)}))},exportFlattened:function(){var n;if(i)if(n=[],null!==s)for(var r=0;r<s.length;r++){var a=s[r];if(mi(t,a)){var o=t[a];if(di(o))try{n[r]=t[a].exportFlattened()}catch(e){n[r]=o}else n[r]=o}else n[r]=e[a]}else{n=b(e);for(var u=0,l=Object.entries(t);u<l.length;u++){var c=y(l[u],2),p=c[0],d=c[1];if(di(d))try{n[p]=t[p].exportFlattened()}catch(e){n[p]=d}else n[p]=d}}else{n={};for(var h=this.getKeys(),m=0;m<h.length;m++){var f=h[m];void 0!==t[f]?n[f]=di(t[f])?t[f].exportFlattened():t[f]:n[f]=e[f]}}return n}})}var Tn=new Sn,Dn=/ *mc-if *= *" */g;function _n(e){for(var t=e.split(/ *\+ */),n=0;n<t.length;n++)t[n]=t[n].trim(),t[n].match(Ve)&&(t[n]=t[n].substring(1,t[n].length-1));return t.join("")}function Bn(e,t,n){function i(e){var i=e.match(Dn),r=Array.isArray(i);function s(e){return r&&(e=' mc-if="'.concat(e)),e}var a=(e=(e=e.replaceAll(/ *mc-if *= *" */g,"")).replaceAll(/ *mc-if *= *" */g,"")).match(De),o=e.replaceAll(De,""),u=_e(t.items),l=function(e){if(!di(e))return!1;var t=Object.keys(e).join("|");if(""===t)return!1;var n="(\\b(".concat(t,"\\b))(?![a-z,A-Z_0-9.\\[])");return new RegExp(n,"g")}(t.keys);if(!1!==u&&(o=o.replaceAll(u,(function(e){if("initParams"===e||"attrs"===e)return s("undefined");var i=Re(e,"",t.items);return pi(i)&&(i="'".concat(n?Di(i):i,"'")),i}))),!1!==l&&(o=o.replaceAll(l,(function(e){var i=t.keys[e];return pi(i)&&(i="'".concat(n?Di(i):i,"'")),i}))),o.match(Le)){var c=o.split(/===|==/);return c[0]=_n(c[0]),c[1]=_n(c[1]),s((c[0]===c[1]).toString())}try{var p=Tn.parse(o),d=Object.assign({},t.keys,t.items),h=p.evaluate(d);if(void 0!==h&&!isNaN(h))return s(h)}catch(e){}if(o.match(je))return s(_n(o));var m=/===|==|>=|>|<=|<|!==|!=/g,f=o.split(m);if(2===f.length){var v=o.match(m)[0];try{var g=Tn.parse(f[0]),y=Tn.parse(f[1]),b=Object.assign({},t.keys,t.items);return s(function(e,t,n){switch(n){case"==":case"===":return e===t;case"!=":case"!==":return e!==t;case">":return e>t;case">=":return e>=t;case"<":return e<t;case"<=":return e<=t;default:return Ai.error("Not supported operator "+n),!1}}(g.evaluate(b),y.evaluate(b),v).toString())}catch(e){}}return s(null!==a?"{{".concat(o,"}}"):o)}return e.replaceAll(Be,i).replaceAll(qe,i)}function qn(e){var t,n=E(e.querySelectorAll("[mc-if]"));try{for(n.s();!(t=n.n()).done;){var i=t.value,r=i.getAttribute("mc-if");"true"===r?i.removeAttribute("mc-if"):"false"===r&&i.remove()}}catch(e){n.e(e)}finally{n.f()}}function Vn(e,t){if(!e.hasAttribute("mc-for")||!e.hasAttribute("mc-of"))return Ai.warning("Either mc-for and mc-of is missing from element"),!1;if(!e.getAttribute("mc-for").match(/^ *[a-zA-Z_][0-9a-zA-Z_]* *, *[a-zA-Z_][0-9a-zA-Z_]* *$/))return Ai.warning("mc-for attribute is not a valid expression"),!1;var n=function(e){var t="^ *".concat(_e(e,!0)," *$");return new RegExp(t,"g")}(t),i=e.getAttribute("mc-of").match(n);if(1!==(null==i?void 0:i.length))return Ai.warning("mc-of attribute is not a valid expression"),!1;var r=Re(i[0].trim(),"",t);return void 0===r?(Ai.warning("mc-of value is undefined"),!1):di(r)?r:(Ai.warning("mc-of value should be either an object or an array"),!1)}function jn(e){var t=[],n=On(e.params);for(var i in e.items)n.setValue("keys.".concat(e.keys.key),i),n.setValue("items.".concat(e.keys.item),e.items[i]),t.push(Nn(e.template,n.exportFlattened(),!0));return t}function Ln(e,t){var n,i=E(e.querySelectorAll("[mc-for]"));try{for(i.s();!(n=i.n()).done;){var r=n.value,s=Vn(r,t.items);if(!1!==s&&di(s)){var a=r.getAttribute("mc-for").split(","),o={key:a[0].trim(),item:a[1].trim()};r.removeAttribute("mc-for"),r.removeAttribute("mc-of");var u=jn({template:r.outerHTML,keys:o,params:t,items:s});if(0!==u.length){for(var l=r,c=0;c<u.length;c++){var p=l.parentNode.insertBefore(u[c],l.nextSibling);l=p}r.remove()}else r.remove()}else r.remove()}}catch(e){i.e(e)}finally{i.f()}}function Nn(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e=Bn(e=e.replace(/^\s+|\s+$/g,""),t,n),!n)return e;var i=document.createElement("div");return i.innerHTML=e,qn(i),Ln(i,t),1!==i.childElementCount?(console.error("parser only accepts close DOM trees (always contained on a single element). The root element can not have mc-for applied to it. Returning empty div"),document.createElement("div")):i.firstChild}var Rn=function(e){e=e.replace(/ /g,"");var t=/\(([^\(\)]|\(([^\(\)]|\(([^\(\)]|\(([^\(\)])*\))*\))*\))*\)/.exec(e);if(void 0===t)return{result:!1};var n=e.split(")");return{result:!0,unit:n[n.length-1],expression:t[0]}},Fn=function(){function e(t){r(this,e),this.expressionProps=t}return a(e,[{key:"resize",value:function(e){var t=Rn(this.expressionProps.expression),n="(".concat(t.expression,"*").concat(e,")");return"".concat(L.mathExpPreface,"(").concat(n,")").concat(this.expressionProps.unit)}},{key:"calculateValues",value:function(e,t){for(var n,i=e.length,r=[],s=(o(n={},L.totalElements,i),o(n,L.initParams,t),n),a=0;a<i;a++){s[L.elementIndex]=a;var u=this.expressionProps.expression.substring(1,this.expressionProps.expression.length-1),l=Nn("{{".concat(u,"}}"),{items:s});if(null===l.match(Be)){var c="".concat(l).concat(this.expressionProps.unit);r.push(ci(c)?1*c:c)}else Ai.error("".concat(this.expressionProps.expression," can not fully parsed. At least one of the provided parameters seem not to be valid. Returning 0")),r.push(0)}return r}}]),e}(),$n={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},easeInSine:function(e){return-1*Math.cos(e*(Math.PI/2))+1},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0==e?1:1*Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1==e?1:1*(1-Math.pow(2,-10*e))},easeInOutExpo:function(e){return 0==e||1==e?e:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-(e/=1)*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e=e/1-1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){if(0==e||1==e)return e;var t=.3/(2*Math.PI)*Math.asin(1);return-Math.pow(2,10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/.3)},easeOutElastic:function(e){if(0==e||1==e)return e;var t=.3/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.3)+1},easeInOutElastic:function(e){if(0==e||1==e)return e;var t=.3*1.5,n=t/(2*Math.PI)*Math.asin(1);return e<1?Math.pow(2,10*(e-=1))*Math.sin((e-n)*(2*Math.PI)/t)*-.5:Math.pow(2,-10*(e-=1))*Math.sin((e-n)*(2*Math.PI)/t)*.5+1},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=-1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-$n.easeOutBounce(1-e)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e*1:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*$n.easeInBounce(2*e):.5*($n.easeOutBounce(2*e-1)+1)}};function zn(e){return e=e.replace(/ /g,""),/^@stagger\(([_A-z0-9.%-]+?(,[_A-z0-9.%-]+)?(,[_A-z0-9.%-]+)?(,[_A-z0-9.%-]+)?(,[_A-z0-9.%-]+)?(,[_A-z0-9.%-]+))\)$/.test(e)}var Hn=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e=e.replace(/ /g,""),t&&!zn(e))return!1;var n=/.*\((.*)\).*/.exec(e)[1].split(",");return{start:n[0],end:n[1],startFraction:1*n[2]||0,easing:n[3]||"linear",mode:n[4]||"linear",reverse:"true"===n[5]}},Wn=function(){function e(t){r(this,e),this.staggerProps=t}return a(e,[{key:"resize",value:function(e){return this.staggerProps.from*=e,this.staggerProps.to*=e,!0===this.staggerProps.integer&&(this.staggerProps.from=Math.round(this.staggerProps.from),this.staggerProps.to=Math.round(this.staggerProps.to)),"@stagger(".concat(this.staggerProps.from).concat(this.staggerProps.unit,", ").concat(this.staggerProps.to).concat(this.staggerProps.unit,", ").concat(this.staggerProps.fraction||0,", ").concat(this.staggerProps.easing||"linear",", ").concat(this.staggerProps.mode||"linear",", ").concat(this.staggerProps.reverse||!1,")")}},{key:"calculateValues",value:function(e){for(var t,n,i,r,s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"linear",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=[];if("linear"===n)for(var s=0;s<e;s++){var a=s/(e-1),o=a<t?a+1-t+1/(e-1):a-t;i&&(o=1-o),r.push(o)}else if("omni"===n)for(var u=1-t,l=0;l<e;l++){var c=Math.abs(l/(e-1)-t)/u;i&&(c=1-c),r.push(c)}return r}(e.length,this.staggerProps.fraction,this.staggerProps.mode,this.staggerProps.reverse),a=[],o=0;o<s.length;o++){var u=(t=this.staggerProps.from,n=this.staggerProps.to,i=s[o],(r=this.staggerProps.easing)||(r="linear"),$n[r](i)*(n-t)+t);!0===this.staggerProps.integer&&(u=Math.round(u)),"measurement"===this.staggerProps.type&&(u+=this.staggerProps.unit),a.push(u)}return a}}]),e}(),Gn=Wn,Un=zn,Jn=Object.keys($n),Kn=new RegExp(/^[-+]?\d+$/),Xn=new RegExp("^".concat(L.attributeValue,"\\([_A-z0-9-]*\\)$")),Qn=new RegExp("^".concat(L.patternValue,"\\(([_A-z0-9.%-]+?(,[_A-z0-9.%-]+)*?)\\)$")),Yn=new RegExp("^[+-]?([0-9]+([.][0-9]*)?|[.][0-9]+)","gi");function Zn(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"provided";return ci(e)?mi(t,"min")&&e<t.min?(n.push({type:"amount",actual:e,message:"The ".concat(i," value (").concat(e,") is lower than the minimum accepted (").concat(t.min,")")}),!1):mi(t,"max")&&e>t.max?(n.push({type:"amount",actual:e,message:"The ".concat(i," value (").concat(e,") is greater than the maximum accepted (").concat(t.max,")")}),!1):!(mi(t,"integer")&&!e.toString().match(Kn)&&(n.push({type:"amount",actual:e,message:"The ".concat(i," number is not an integer (").concat(e,")")}),1)):(n.push({type:"amount",actual:e,message:"The ".concat(i," value is not a number")}),!1)}var ei=function(e){return function(t,n,i){return function(e,t,n,i){if(pi(e)){if((e=e.trim()).startsWith(L.staggerPreface)){if(!1===Un(e))return void t.push({type:"amount",message:"".concat(e," is not a valid stagger expression"),actual:e});var r=Hn(e,!1),s=Zn(r.start,i,t,"stagger start"),a=Zn(r.end,i,t,"stagger end");if(!s||!a)return;if(r.startFraction<0||r.startFraction>1)return void t.push({type:"amount",actual:r.startFraction,message:"The ".concat(L.staggerPreface," fraction must be a number >=0 and <=1")});if(!Jn.includes(r.easing))return void t.push({type:"amount",actual:r.startFraction,message:"The ".concat(L.staggerPreface," easing (").concat(r.easing,") is not supported by the system")});if("linear"!==r.mode&&"omni"!==r.mode)return void t.push({type:"amount",actual:r.mode,message:"The ".concat(L.staggerPreface,' mode to be either "linear" or "omni"')});if(!0!==r.reverse&&!1!==r.reverse)return void t.push({type:"amount",actual:r.reverse,message:"The ".concat(L.staggerPreface," reverse to be either true or false")})}else if(e.startsWith(L.patternValue)){if(!Qn.test(e.replace(/ /g,"")))return void t.push({type:"amount",actual:e,message:"The ".concat(L.patternValue," expression is not valid")});for(var o=ki(e),u=0;u<o.length;u++)if(!Zn(o[u],i,t,"pattern value at index ".concat(u)))return}else if(e.startsWith(L.attributeValue)){if(!Xn.test(e))return void t.push({type:"amount",actual:e,message:"The ".concat(L.attributeValue," expression is not valid")})}else{if(!e.startsWith(L.mathExpPreface))return void t.push({type:"amount",actual:e,message:"The provided value is not a number"});var l=Rn(e);if(!1===l.result)return void t.push({type:"amount",actual:e,message:"The ".concat(L.mathExpPreface," expression is not valid")});if(""!==l.unit)return void t.push({type:"amount",actual:e,message:"The ".concat(L.mathExpPreface," should not include units")})}return e}if(Zn(e,i,t))return e}(t,n,0,e)}},ti=new RegExp("^ *".concat(L.initParamsPreface,".[_A-z0-9]* *$"));function ni(e,t){if(pi(e)&&e.match(ti))return e;t.push({actual:e,message:"The provided value is not an @expression"})}var ii=function(){function e(t){r(this,e),this.schema=t,this.adapted=On(t)}return a(e,[{key:"entryChange",value:function(e,t){var n=e.join(".");if(Array.isArray(t))for(var i=0;i<t.length;i++)this.entryChange(e.concat(["".concat(i)]),t[i]);else switch(t.type){case"amount":this.adapted.setValue("".concat(n,".type"),"custom"),this.adapted.setValue("".concat(n,".check"),ei(t));break;case"measurement":this.adapted.setValue("".concat(n,".type"),"custom"),this.adapted.setValue("".concat(n,".check"),function(e){return function(t,n,i){return function(e,t,n,i){var r=new RegExp("^[+-]?([0-9]+([.][0-9]*)?|[.][0-9]+)(".concat(i.units.join("|"),")$"),"gi");if(pi(e)){if((e=e.trim()).startsWith(L.attributeValue))return Xn.test(e)?e:void t.push({type:"measurement",actual:e,message:"The provided ".concat(L.attributeValue," value is not valid")});if(e.startsWith(L.staggerPreface)){if(!1===Un(e))return void t.push({type:"measurement",actual:e,message:"The provided ".concat(L.staggerPreface," value is not valid")});var s,a,o=Hn(e,!1);if(!o.start.match(r))return void t.push({type:"measurement",actual:e,message:"The provided ".concat(L.staggerPreface," start value is not valid")});var u=o.start.match(Yn)[0];if(s=o.start.toString().substring(u.length),!Zn(u,i,t,"stagger start"))return;if(!o.end.match(r))return void t.push({type:"measurement",actual:e,message:"The provided ".concat(L.staggerPreface," end value is not valid")});var l=o.end.match(Yn)[0];if(a=o.end.toString().substring(l.length),!Zn(l,i,t,"stagger end"))return;return s!==a?void t.push({type:"measurement",actual:e,message:"The ".concat(L.staggerPreface," start and end must always have the same units")}):o.startFraction<0||o.startFraction>1?void t.push({type:"measurement",actual:e,message:"The ".concat(L.staggerPreface," fraction must be a number >=0 and <=1")}):Jn.includes(o.easing)?"linear"!==o.mode&&"omni"!==o.mode?void t.push({type:"measurement",actual:e,message:"The ".concat(L.staggerPreface," mode can only be either linear or omni")}):!0!==o.reverse&&!1!==o.reverse?void t.push({type:"measurement",actual:e,message:"The ".concat(L.staggerPreface," reverse needs to be either true or false")}):e:void t.push({type:"measurement",actual:e,message:"The provided ".concat(L.staggerPreface," easing is not recognised by the system")})}if(e.startsWith(L.patternValue)){if(!Qn.test(e.replace(/ /g,"")))return void t.push({type:"measurement",actual:e,message:"The ".concat(L.patternValue," expression is invalid")});for(var c=ki(e),p=0;p<c.length;p++){var d=c[p];if(!d.match(r))return void t.push({type:"measurement",actual:e,message:"The ".concat(L.patternValue," value on index ").concat(p," is invalid")});if(!Zn(d.match(Yn)[0],i,t,"".concat(L.patternValue," value on index ").concat(p)))return}return e}if(e.startsWith(L.mathExpPreface)){var h=Rn(e);return!1===h.result?void t.push({type:"measurement",actual:e,message:"The ".concat(L.mathExpPreface," is invalid")}):i.units.indexOf(h.unit)<0?void t.push({type:"measurement",actual:e,message:"The ".concat(L.mathExpPreface," expression has non-supported units")}):e}if(e.match(r)){if(Zn(e.match(Yn)[0],i,t,"measurement"))return e}else t.push({type:"measurement",actual:e,message:"The provided measurement in invalid"})}else t.push({type:"measurement",actual:e,message:"The provided value is not a valid measurement"})}(t,n,0,e)}}(t));break;case"object":this.adapted.setValue(n,this.createObject(t));break;case"array":this.adapted.setValue(n,this.createArray(t));break;case"number":this.adapted.setValue(n,[t,{type:"custom",optional:!1!==t.optional,check:ei(t)}]);break;case"string":case"html":case"css":break;default:this.adapted.setValue(n,[t,{type:"custom",optional:!1!==t.optional,check:ni}])}}},{key:"createArray",value:function(t){var i=new e({items:t.items}).adaptSchema();return[n(n({},t),{},{items:i.items}),{type:"custom",optional:!1!==t.optional,check:ni}]}},{key:"createObject",value:function(t){var i,r=new e(null!==(i=t.props)&&void 0!==i?i:{}).adaptSchema();return[n(n({},t),{},{props:r}),{type:"custom",optional:!1!==t.optional,check:ni}]}},{key:"adaptSchema",value:function(){return this.objectPropsChange([],this.schema),this.adapted}},{key:"objectPropsChange",value:function(e,t){for(var n in t)this.entryChange(e.concat([n]),t[n])}}]),e}(),ri=new RegExp(/^#([\da-f]{3}){1,2}$|^#([\da-f]{4}){1,2}$|(rgb|hsl)a?\((\s*-?\d+%?\s*,){2}(\s*-?\d+%?\s*,?\s*\)?)(,\s*(0?\.\d+)?|1)?\)/,"gi"),si=new Te({messages:{color:"The '{field}' field must be an a valid color! Actual: {actual}",measurement:"The '{field}' must be a measurement with specs that are not met. You've either provided wrong value/units or an invalid @ expression. Actual: {actual}"},useNewCustomCheckerFunction:!0});si.add("html",(function(e,t,n){e.schema;var i=e.messages;return{source:"\n      if(value === null){\n        ".concat(this.makeError({type:"html",actual:"value",messages:i}),"\n      } else {\n        return value;\n      }\n    ")}})),si.add("css",(function(e,t,n){e.schema;var i=e.messages;return{source:"\n      if(value === null){\n        ".concat(this.makeError({type:"css",actual:"value",messages:i}),"\n      } else {\n        return value;\n      }\n    ")}}));var ai=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"];si.add("color",(function(e,t,n){var i=this;e.schema;var r=e.messages,s=function(e,t){return i.makeError({type:"color",actual:e,messages:{color:t}})};return{source:"\n      const validateExpression = ".concat(Rn,";\n      const attributeRegexp = /^").concat(L.attributeValue,"\\([_A-z0-9-]*\\)$/;\n      const patternRegexp = /^").concat(L.patternValue,"\\(([_A-z0-9.%-]+?(,[_A-z0-9.%-]+)*?)\\)$/;\n      const extractParenthesisAttrsAsArray = ").concat(ki,';\n      var colors = "').concat(ai.join(","),"\".split(',')\n      if(typeof value !== 'string' && !(value instanceof String)){\n        ").concat(this.makeError({type:"measurement",actual:"value",messages:r}),"\n        return ;\n      }\n    \n      if(value.trim().startsWith('").concat(L.patternValue,"')){\n          if(!patternRegexp.test(value.replace(/ /g, ''))){\n            ").concat(s("value","The "+L.patternValue+" expression is invalid"),";\n            return;\n          }\n          const patternValues = extractParenthesisAttrsAsArray(value);\n          for(let i=0; i<patternValues.length; i++){\n            const valToCheck = patternValues[i];\n            if(!valToCheck.match(").concat(ri,") && !colors.includes(valToCheck.toLowerCase())){\n              ").concat(this.makeError({type:"color",actual:"value",messages:r}),"\n              return;\n            }\n        }\n        return value;\n      } else if(value.trim().startsWith('").concat(L.attributeValue,"')){\n          if(!attributeRegexp.test(value)){\n            ").concat(s("value","The "+L.attributeValue+" expression is invalid"),";\n            return;\n          }\n\n          return value;\n        } else if(value.trim().startsWith('").concat(L.mathExpPreface,"')){\n          const validity = validateExpression(value);\n          if(validity.result === false){\n            ").concat(s("value","The "+L.expressionPreface+" expression is invalid"),';\n            return;\n          }\n          if(validity.unit !== ""){\n            ').concat(s("value","The "+L.expressionPreface+" expression includes units"),";\n            return;\n          }\n\n          return value;\n        }\n    \n      \n      if(!value.match(").concat(ri,") && !colors.includes(value.toLowerCase())){\n        ").concat(this.makeError({type:"color",actual:"value",messages:r}),"\n      }\n      return value;\n    ")}}));var oi,ui=function(e){var t=new ii(e,si).adaptSchema();return si.compile(t)};(oi=window).AudioContext||(oi.AudioContext=window.webkitAudioContext);var li=new window.AudioContext;function ci(e){return!isNaN(parseFloat(e))&&isFinite(e)}function pi(e){return"string"==typeof e||e instanceof String}function di(e){return"object"===i(e)}function hi(e){return e&&"[object Function]"==={}.toString.call(e)}function mi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return!(null===t||!di(e))&&Object.prototype.hasOwnProperty.call(e,t)}function fi(e){return e.charAt(0).toUpperCase()+e.slice(1)}var vi=new RegExp("^[+-]?([0-9]+([.][0-9]*)?|[.][0-9]+)","gi");function gi(e,t){var n=null==e?void 0:e[t];if(!pi(n))return null;var i=n.match(vi)[0],r=n.substring(i.length);return!function(e){return"number"==typeof e&&isFinite(e)}(i=Number(i))||"%"!==r&&"px"!==r?null:{number:i,unit:r}}var yi=['originalDims should be an object containing both the "width" and "height" keys'];function bi(e){return null==e?{result:!0,analysis:{width:null,height:null}}:di(e)&&mi(e,"width")&&mi(e,"height")?null==gi(e,"width")?{result:!1,errors:["originalDims.width should be defined either on px or %."]}:null==gi(e,"height")?{result:!1,errors:["originalDims.height should be defined either on px or %."]}:{result:!0,analysis:xi(e)}:{result:!1,errors:yi}}function xi(e){return di(e)&&null!=e?{width:gi(e,"width"),height:gi(e,"height")}:{width:null,height:null}}function ki(e){var t=e.replace(/ /g,"");return/.*\((.*)\).*/.exec(t)[1].split(",")}function wi(e,t){return Math.round(e/t)*t}function Ci(e){var t=e.split("___");return{mcid:t[0],attribute:t[1]}}function Ii(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function Ei(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"_":"-";return"".concat(Ii()).concat(Ii()).concat(e).concat(Ii()).concat(e).concat(Ii())}function Si(e,t){return"".concat(e).concat("___").concat(t)}function Pi(){return!1}function Mi(e,t,n){for(var i=t.split("."),r=e,s=0;s<i.length-1;s++){if(!mi(r,i[s]))return!1;r=r[i[s]]}return!!mi(r,i[i.length-1])&&(r[i[i.length-1]]=n,!0)}var Ai=new function e(t){r(this,e);var n=2;mi(t,"logLevel")&&(n=t.logLevel);for(var i=0;i<B.length;i++){var s=B[i];n>=s.level?this[s.key]=window.console[s.consoleMethod].bind(window.console,"MotorCortex - ".concat(s.key,": ")):this[s.key]=function(){}}this.log=n>=3?window.console.log.bind(window.console,"MotorCortex - "):function(){}};function Oi(e,t,n){var i=t(e);if(i.length>0){for(var r="Error on plugin's \"".concat(n.plugin_npm_name,'" "').concat(n.ClassName,'" instantiation. Errors (op props):'),s=0;s<i.length;s++)r+="\n - ".concat(i[s].message,". ").concat(i[s].actual," provided");return Ai.error(r),{result:!1,errors:i}}return{result:!0}}function Ti(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Error on validation";try{var i=ui(e)(t);if(!0===i)return{result:!0};for(var r="".concat(n,":"),s=0;s<i.length;s++)r+="\n - ".concat(i[s].message,". ").concat(i[s].actual," provided");return Ai.error(r),{result:!1,errors:i}}catch(e){var a="".concat(n,". Invalid schema provided");return Ai.error(a),{result:!1,errors:[a]}}}function Di(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return(""+e).replace(/[&<>"'/]/g,(function(e){return t[e]}))}function _i(e,t,n){for(var i=[],r=0;r<e.length;r++){var s=e[r],a=s.parentMillisecond-n;a=a*t+n,1!==t&&i.push({id:s.incident.id,start:a,end:a+s.incident.duration*t,startDelta:a-s.millisecond})}return i}function Bi(e){return e.result?{result:!0,execute:e.execute}:{result:!1,errors:e.errors}}var qi=function(){function e(t){r(this,e),this.runTimeInfo=t.runTimeInfo,this.context=t.context,this.onInitialise(),this.getIncidentById=t.getIncidentById}return a(e,[{key:"onInitialise",value:function(){}},{key:"_resize",value:function(){Ai.log("Please overwite the _resize method of the Channel")}},{key:"addIncidents",value:function(e){return Bi(this.checkAddition(e))}},{key:"editIncidents",value:function(e,t){return Bi(this.checkEdit(e,t))}},{key:"removeIncidents",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Bi(this.checkDelete(e,t))}},{key:"recalcScratchValues",value:function(e){}},{key:"checkAddition",value:function(e){return{result:!0,execute:function(){}}}},{key:"checkEdit",value:function(e,t){return{result:!0,execute:function(){}}}},{key:"checkDelete",value:function(e){return{result:!0,execute:function(){}}}},{key:"checkResizedIncidents",value:function(e){return{result:!0,execute:function(){}}}},{key:"moveTo",value:function(e,t,n){}}],[{key:"type",get:function(){return"plain"}}]),e}(),Vi="up",ji="down",Li="native.tree.bypass",Ni=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.parentNode=null,this.isNode=!1,mi(t,"id")?this.id=t.id:this.id=Ei(),this.props=t}return a(e,[{key:"name",get:function(){return mi(this.props,"name")?this.props.name:null},set:function(e){this.props.name=e}},{key:"delay",get:function(){return mi(this.props,"delay")?this.props.delay:0},set:function(e){0!==e&&(this.props.delay=e)}},{key:"hiatus",get:function(){return mi(this.props,"hiatus")?this.props.hiatus:0},set:function(e){0!==e&&(this.props.hiatus=e)}},{key:"repeats",get:function(){return mi(this.props,"repeats")?this.props.repeats:1},set:function(e){this.props.repeats=e}},{key:"duration",get:function(){return this.repeats*(this.delay+this.props.duration+this.hiatus)},set:function(e){var t=e/this.duration;this.props.duration*=t,this.hiatus*=t,this.delay*=t}},{key:"setNewDuration",value:function(e){this.duration=e,this.putMessageOnPipe("recalcDuration",{},"Groups",{selfExecute:!1,direction:Vi})}},{key:"systoleDiastole",value:function(e){this.duration*=e}},{key:"hasParent",get:function(){return null!==this.parentNode}},{key:"attachToNode",value:function(e){this.parentNode=e}},{key:"detachFromParent",value:function(){this.parentNode=null}},{key:"putMessageOnPipe",value:function(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(mi(r,"direction")||(r.direction=ji),r.direction!==ji||mi(r,"positionDelta")||(r.positionDelta=0),r.selfExecute){var s="handle".concat(fi(e));if("function"==typeof this[s]){var a=this[s](i,t);if(a!==Li){var o={response:a,responder:this};return r.direction===Vi?o:[n(n({},o),{},{positionDelta:r.positionDelta})]}}}return r.direction===Vi?this.hasParent?this.parentNode.putMessageOnPipe(e,t,i,{selfExecute:!0,direction:Vi}):{response:!1,responder:null}:[]}},{key:"bypass",value:function(){return Li}},{key:"positionOnPyramidion",get:function(){return this.getPositionOnPyramidion()}},{key:"getPositionOnPyramidion",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.hasParent?this.putMessageOnPipe("getPositionOnPyramidion",{delta:e,id:this.id},"Parent",{selfExecute:!1,direction:Vi}).response:e}}]),e}(),Ri="Leaf has already been attached to another Node",Fi="Negative positioning of childs on nodes is not allowed",$i="The Leaf with the requested id couldn't be found on the Tree",zi=function(e){u(i,e);var t=h(i);function i(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,i),(e=t.call(this,n)).isNode=!0,e.children={},e.calculatedDuration=0,e}return a(i,[{key:"duration",get:function(){return this.repeats*(this.delay+this.calculatedDuration+this.hiatus)},set:function(e){if(0!==this.duration){var t=e/this.duration;for(var n in this.calculatedDuration*=t,this.hiatus*=t,this.delay*=t,this.children){var i=this.children[n];this.editPosition(i.id,i.position*t,!0),i.leaf.systoleDiastole(t)}}}},{key:"_calculateDuration",value:function(){var e=0;for(var t in this.children){var n=this.children[t];n.position+n.leaf.duration>e&&(e=n.position+n.leaf.duration)}return e!==this.calculatedDuration&&(this.calculatedDuration=e,!0)}},{key:"handleRecalcDuration",value:function(e,t){return!this._calculateDuration()||this.putMessageOnPipe("recalcDuration",{},"Groups",{selfExecute:!1,direction:Vi})}},{key:"getLeafById",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(mi(this.children,e))return this.children[e].leaf;if(t)return null;for(var n in this.children){var i=this.children[n].leaf;if(i.isNode){var r=i.getLeafById(e);if(null!=r)return r}}return null}},{key:"getLeafPosition",value:function(e){if(mi(this.children,e))return this.children[e].position;var t=this.putMessageOnPipe("getLeafPosition",{id:e},"Groups",{selfExecute:!1,direction:ji});return t.length>0?t[0].positionDelta+t[0].response:void 0}},{key:"handleGetLeafPosition",value:function(e,t){return this.getLeafPosition(t.id)}},{key:"checkAddition",value:function(e,t){return e.hasParent?{result:!1,reason:Ri}:t<0?{result:!1,reason:Fi}:{result:!0}}},{key:"addChild",value:function(e,t){return e.hasParent?{result:!1,reason:Ri}:(this.children[e.id]={id:e.id,leaf:e,position:t},e.attachToNode(this),this.putMessageOnPipe("recalcDuration",{},"Groups",{selfExecute:!0,direction:Vi}),{result:!0})}},{key:"checkRemoveChild",value:function(e){return mi(this.children,e)?{result:!0}:{result:!1,reason:$i}}},{key:"removeChild",value:function(e){return this.children[e].leaf.detachFromParent(),delete this.children[e],this.putMessageOnPipe("recalcDuration",{},"Groups",{selfExecute:!0,direction:Vi}),{result:!0}}},{key:"checkEditPosition",value:function(e,t){return t<0?{result:!1,reason:Fi}:mi(this.children,e)?{result:!0}:{result:!1,reason:$i}}},{key:"editPosition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(mi(this.children,e))return this.children[e].position=t,n||this.putMessageOnPipe("recalcDuration",{},"Groups",{selfExecute:!0,direction:Vi}),{result:!0}}},{key:"putMessageOnPipe",value:function(e,t,r){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(mi(s,"direction")||(s.direction=ji),s.direction!==ji||mi(s,"positionDelta")||(s.positionDelta=0),s.direction===Vi)return f(l(i.prototype),"putMessageOnPipe",this).call(this,e,t,r,s);var a=f(l(i.prototype),"putMessageOnPipe",this).call(this,e,t,r,s);if(a.length>0)return a;for(var o in this.children){var u=this.children[o].leaf,c=n(n({},s),{},{selfExecute:!0,positionDelta:s.positionDelta+this.children[o].position});a.push.apply(a,b(u.putMessageOnPipe(e,t,r,c)))}return a}},{key:"handleGetPositionOnPyramidion",value:function(e,t){var n=t.delta+this.getLeafPosition(t.id);return this.getPositionOnPyramidion(n)}}]),i}(Ni);function Hi(e){e.descriptor.value=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};void 0!==this.blockID||t.blockId||(this.blockID=Ei()),this.DescriptiveIncident.putMessageOnPipe("setBlock",{id:this.blockID||t.blockId,description:e,incidentId:this.DescriptiveIncident.id,realIncidentId:this.id,options:t},"rootClip",{selfExecute:!0,direction:Vi})}}function Wi(e){e.descriptor.value=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.DescriptiveIncident.putMessageOnPipe("unBlock",{id:null!==e?e:this.blockID},"rootClip",{selfExecute:!0,direction:Vi})}}var Gi=P(null,(function(e,t){var n=function(t){u(i,t);var n=h(i);function i(t,s){var a;return r(this,i),a=n.call(this,s),e(p(a)),a.mc_plugin_npm_name="motor-cortex-js",a.plugin_channel_class=qi,a.hasIncidents=!0,a.onGroupInitialise(),a.calculatedDuration=0,a}return i}(t);return{F:n,d:[{kind:"method",key:"onGroupInitialise",value:function(){}},{kind:"method",key:"handleAddIncident",value:function(e,t){if(this.id===e){var n=(0,t.incidentFromDescription)(t.incident,t.contextData,t.audio);return null===n?this.bypass():n}return this.bypass()}},{kind:"method",key:"handleMoveIncident",value:function(e,t){if(this.id===e){var n=this.getLeafById(t.incidentId,!0);return null===n?this.bypass():n}return this.bypass()}},{kind:"field",key:"handleRemoveIncident",value:function(){return this.handleMoveIncident}},{kind:"method",key:"handleResize",value:function(e){return this.id===e?this:this.bypass()}},{kind:"method",key:"removeChild",value:function(e){this.children[e].leaf.lastWish(),f(l(n.prototype),"removeChild",this).call(this,e)}},{kind:"method",key:"getIncidentsByChannel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={};for(var i in n["motor-cortex-js"]=[{millisecond:e,parentMillisecond:t,incident:this,id:this.id}],this.children){var r=this.children[i],s=r.leaf.getIncidentsByChannel(e+r.position,e);for(var a in s)mi(n,a)?n[a]=n[a].concat(s[a]):n[a]=s[a]}return n}},{kind:"method",key:"lastWish",value:function(){for(var e in this.children)this.children[e].leaf.lastWish()}},{kind:"method",decorators:[Hi],key:"setBlock",value:function(){}},{kind:"method",decorators:[Wi],key:"unblock",value:function(){}}]}}),zi),Ui=function(e){u(n,e);var t=h(n);function n(){return r(this,n),t.apply(this,arguments)}return a(n,[{key:"onInitialise",value:function(){this.incidents=[],this.incidentsById={}}},{key:"_incidentById",value:function(e){return this.incidentsById[e]}},{key:"_resize",value:function(e){for(var t=0;t<this.incidents.length;t++)this.incidents[t].millisecond*=e}},{key:"checkAddition",value:function(e){for(var t=[],n={},i=[],r=0;r<e.length;r++)n[e[r].id]=e[r].incident,i.push({id:e[r].id,millisecond:e[r].millisecond}),mi(this.incidentsById,e[r].id)&&(Ai.error("Incident with the id ".concat(e[r].id," already exists. Addition is rejected.")),t.push({type:"Already existing id",meta:{id:e[r].id}}));if(t.length>0)return{result:!1,errors:t};var s=this;return{result:!0,execute:function(){var t;s.incidentsById=Object.assign(s.incidentsById,n),(t=s.incidents).push.apply(t,i),s.incidents.sort((function(e,t){return e.millisecond-t.millisecond}));for(var r=0;r<e.length;r++)s._incidentById(e[r].id)._onGetContextOnce(s.context)}}}},{key:"checkEdit",value:function(e,t){var n=this.incidents;return{result:!0,execute:function(){for(var i,r=0;r<e.length;r++){i=e[r].id;for(var s=0;s<n.length;s++)if(n[s].id===i){n[s].millisecond+=t;break}}n.sort((function(e,t){return e.millisecond-t.millisecond}))}}}},{key:"checkDelete",value:function(e){for(var t=this,n=[],i=0;i<e.length;i++)n.push(e[i].id);return{result:!0,execute:function(){var e=t.incidents.filter((function(e){return!n.includes(e.id)}));t.incidents=e;for(var i=0;i<n.length;i++)delete t.incidentsById[n[i]]}}}},{key:"checkResizedIncidents",value:function(e){var t=this.incidents;return{result:!0,execute:function(){for(var n,i=0;i<e.length;i++){n=e[i].id;for(var r=0;r<t.length;r++)if(t[r].id===n){t[r].millisecond+=e[i].startDelta;break}}t.sort((function(e,t){return e.millisecond-t.millisecond}))}}}},{key:"moveTo",value:function(e,t,n){if(arguments.length>3&&void 0!==arguments[3]&&arguments[3])for(var i=0;i<this.incidents.length;i++){var r=this.incidents[i],s=this._incidentById(r.id);t<r.millisecond?s.onProgress(0,0,n,!0):t>r.millisecond+s.duration?s.onProgress(1,s.duration,n,!0):s.onProgress((t-r.millisecond)/s.duration,t-r.millisecond,n,!0)}else{var a,o=this;a=t>e?this.incidents.filter((function(n){return n.millisecond+o._incidentById(n.id).duration>=e&&n.millisecond+o._incidentById(n.id).duration<=t||o._incidentById(n.id).duration+n.millisecond>=t&&n.millisecond<=t})):this.incidents.filter((function(n){return n.millisecond+o._incidentById(n.id).duration>=t&&n.millisecond+o._incidentById(n.id).duration<=e||o._incidentById(n.id).duration+n.millisecond>=e&&n.millisecond<=e}));for(var u=0;u<a.length;u++){var l=a[u],c=this._incidentById(l.id),p=(t-l.millisecond)/c.duration>=1,d=p?1:(t-l.millisecond)/c.duration,h=p?c.duration:t-l.millisecond;c.onProgress(d,h,n,!1)}}}}]),n}(qi),Ji=.1,Ki="function"==typeof Float32Array;function Xi(e,t){return 1-3*t+3*e}function Qi(e,t){return 3*t-6*e}function Yi(e){return 3*e}function Zi(e,t,n){return((Xi(t,n)*e+Qi(t,n))*e+Yi(t))*e}function er(e,t,n){return 3*Xi(t,n)*e*e+2*Qi(t,n)*e+Yi(t)}function tr(e){return e}var nr=function(e,t,n,i){if(!(0<=e&&e<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&n===i)return tr;for(var r=Ki?new Float32Array(11):new Array(11),s=0;s<11;++s)r[s]=Zi(s*Ji,e,n);function a(t){for(var i=0,s=1;10!==s&&r[s]<=t;++s)i+=Ji;--s;var a=i+(t-r[s])/(r[s+1]-r[s])*Ji,o=er(a,e,n);return o>=.001?function(e,t,n,i){for(var r=0;r<4;++r){var s=er(t,n,i);if(0===s)return t;t-=(Zi(t,n,i)-e)/s}return t}(t,a,e,n):0===o?a:function(e,t,n,i,r){var s,a,o=0;do{(s=Zi(a=t+(n-t)/2,i,r)-e)>0?n=a:t=a}while(Math.abs(s)>1e-7&&++o<10);return a}(t,i,i+Ji,e,n)}return function(e){return 0===e?0:1===e?1:Zi(a(e),t,i)}};function ir(e){e.descriptor.value=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={};return n[this.mc_plugin_npm_name]=[{millisecond:e,parentMillisecond:t,incident:this,id:this.id}],n}}var rr=P(null,(function(e){return{F:function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;r(this,t),e(this),this.attrs=n,this.props=i,this.dna=s,this.context=s.context,this.mcid=s.mcid,this.id=i.id||Ei(),this.modelId=i.modelId,this.gotContext=!1,this.plugin_channel_class=qi,this.mc_plugin_npm_name="motor-cortex-js",mi(i,"plugin_channel_class")&&(this.plugin_channel_class=i.plugin_channel_class),mi(i,"mc_plugin_npm_name")&&(this.mc_plugin_npm_name=i.mc_plugin_npm_name),this.hasIncidents=!1,this.initialValues={},this.userDefinedInitialValues=n.initialValues||{},this.pureInitialValues=null,this.autoGenerated=!1,this.onInitialise()},d:[{kind:"get",key:"selector",value:function(){return this.props.selector}},{kind:"get",key:"animAttributes",value:function(){return this.attrs.animatedAttrs}},{kind:"set",key:"animAttributes",value:function(e){this.attrs.animatedAttrs[this.attributeKey]=e}},{kind:"method",key:"getScratchValue",value:function(){return 0}},{kind:"get",key:"element",value:function(){return null===this.context?[]:this.context.getElementByMCID?this.context.getElementByMCID(this.mcid):this.context.getElements(this.selector)[0]}},{kind:"get",key:"attributeKey",value:function(){return Object.keys(this.attrs.animatedAttrs)[0]}},{kind:"get",key:"targetValue",value:function(){return this.animAttributes[this.attributeKey]}},{kind:"method",key:"getElementAttribute",value:function(e){return this.element.getAttribute(e)}},{kind:"method",decorators:[ir],key:"getIncidentsByChannel",value:function(){}},{kind:"method",key:"hasUserDefinedInitialValue",value:function(){return mi(this.userDefinedInitialValues,this.attributeKey)}},{kind:"method",key:"setInitialValue",value:function(e){if((!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(this.pureInitialValues=JSON.parse(JSON.stringify(e))),this.hasUserDefinedInitialValue())if(di(this.targetValue)){for(var t in this.userDefinedInitialValues[this.attributeKey])e[t]=this.userDefinedInitialValues[this.attributeKey][t];this.initialValues[this.attributeKey]=e}else this.initialValues[this.attributeKey]=this.userDefinedInitialValues[this.attributeKey];else this.initialValues[this.attributeKey]=e}},{kind:"get",key:"initialValue",value:function(){return this.initialValues[this.attributeKey]}},{kind:"method",key:"_onGetContextOnce",value:function(){try{if(!0===this.context.fragment)return;this.gotContext||(this.onGetContext(),this.gotContext=!0)}catch(e){Ai.error(e),Ai.error(this.mcid)}}},{kind:"method",key:"onGetContext",value:function(){Ai.info('Overwritte the "onGetContext" method with the code you want to get executed',"info")}},{kind:"method",key:"lastWish",value:function(){}},{kind:"method",key:"onInitialise",value:function(){Ai.info('Overwritte the "onInialise" method with the code you want to get executed',"info")}},{kind:"method",key:"onProgress",value:function(e,t){}},{kind:"method",decorators:[Hi],key:"setBlock",value:function(){}},{kind:"method",decorators:[Wi],key:"unblock",value:function(){}}]}})),sr=function(e){u(i,e);var t=h(i);function i(e,n,s){var a;return r(this,i),(a=t.call(this,e,n,s)).runTimeInfo={currentMillisecond:0},a}return a(i,[{key:"duration",get:function(){return this.DescriptiveIncident.realClip.duration}},{key:"lastWish",value:function(){this.ownClip&&this.ownClip.context.unmount()}},{key:"onGetContext",value:function(){var e,t,i=this.DescriptiveIncident.realClip.exportConstructionArguments(),r=(e=this.context,t=this.mcid,e.rootElement.querySelectorAll("[".concat(q,'="').concat(t,'"]'))[0]),s=n(n({},i.props),{},{selector:void 0,host:r,containerParams:this.DescriptiveIncident.props.containerParams||{},originalDims:this.DescriptiveIncident.constructor.originalDims||{}});this.ownClip=new this.DescriptiveIncident.constructor.Incident(i.attrs,s,this.DescriptiveIncident),this.ownClip.clipCopyId=this.id,this.DescriptiveIncident.realClip.addContext({clipId:this.id,context:this.ownClip.context},!0)}},{key:"onProgress",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!1!==this.ownClip.ownContext.contextLoaded||0===e){for(var i in this.DescriptiveIncident.realClip.instantiatedChannels)this.DescriptiveIncident.realClip.instantiatedChannels[i].moveTo(this.runTimeInfo.currentMillisecond,t,this.id,n);this.runTimeInfo.currentMillisecond=t,this.ownClip.onAfterProgress(e,t)}else this.setBlock("context loading",{blockId:this.id})}}]),i}(rr);function ar(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.DescriptiveIncident:{context:e.context,mcid:e.mcid},i=new e.Incident(e.attrs,n(n({},e.props),{},{id:e.id||Ei()}),t);return i.mc_plugin_npm_name=e.plugin_npm_name,i.plugin_channel_class=e.Channel,i.DescriptiveIncident=e.DescriptiveIncident,i}var or=P(null,(function(e,t){return{F:function(t){u(s,t);var i=h(s);function s(t,a,o,u){var l;return r(this,s),l=i.call(this,n(n({},t.props),{},{id:"".concat(t.incidentId,"_").concat(o)})),e(p(l)),l.contexts={},l.constructionIngredients=t,l.mcid=o,l.DescriptiveIncident=u,l.mc_plugin_npm_name=t.plugin_npm_name,l.plugin_channel_class=t.Channel,l.addContext(a),l.timeScale=1,u.realClip.duration>0&&(l.timeScale=l.props.duration/u.realClip.duration),u.realClip.subscribeToDurationChange((function(e){l.props.duration=l.timeScale*e,l.putMessageOnPipe("recalcDuration",{},"Groups",{selfExecute:!1,direction:Vi})})),l.easing=$n.linear,mi(l.props,"easing")&&(Array.isArray(l.props.easing)?l.easing=nr(l.props.easing[0],l.props.easing[1],l.props.easing[2],l.props.easing[3]):l.easing=$n[l.props.easing]),l}return s}(t),d:[{kind:"get",key:"originalContext",value:function(){return this.contexts[this.originalContextKey]}},{kind:"method",key:"onProgress",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=t%(this.delay+this.props.duration+this.hiatus);0!==t&&0===r&&(r=this.delay+this.props.duration);var s=r-this.delay;s<0?s=0:s>this.props.duration&&(s=this.props.duration);var a=0===this.props.duration?0:s/this.props.duration,o=this.easing(a),u=o*this.props.duration*(1/this.timeScale);!1!==this.originalContext.context.contextLoaded&&this.contexts[n].onProgress(o,u,i)}},{kind:"method",key:"addContext",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];0===Object.keys(this.contexts).length&&(this.originalContextKey=e.clipId);var i=n(n({},this.constructionIngredients),{},{context:e.context,mcid:this.mcid,Incident:sr,DescriptiveIncident:this.DescriptiveIncident});this.contexts[e.clipId]=ar(i),t&&this.contexts[e.clipId]._onGetContextOnce()}},{kind:"method",key:"handleAddContext",value:function(e,t){return this.addContext(t,!0),!0}},{kind:"method",key:"handleContextLoaded",value:function(e,t){this._onGetContextOnce()}},{kind:"method",decorators:[ir],key:"getIncidentsByChannel",value:function(){}},{kind:"method",key:"gotContext",value:function(){for(var e in this.contexts)this.contexts[e].gotContext()}},{kind:"method",key:"_onGetContextOnce",value:function(){if(!1!==this.originalContext.contextLoaded)for(var e in this.contexts)this.contexts[e]._onGetContextOnce()}},{kind:"method",key:"lastWish",value:function(){for(var e in this.contexts)this.contexts[e].lastWish()}},{kind:"method",key:"onGetContext",value:function(){if(!1!==this.originalContext.contextLoaded)for(var e in this.contexts)this.contexts[e].onGetContext()}}]}}),Ni),ur=P(null,(function(e,t){var i=function(t){u(s,t);var i=h(s);function s(t,a,o,u){var l;if(r(this,s),l=i.call(this,n(n({},t.props),{},{id:null!==u?"".concat(t.incidentId,"_").concat(o,"_").concat(u):"".concat(t.incidentId,"_").concat(o)})),e(p(l)),l.contexts={},l.constructionIngredients=t,l.mcid=o,l.attribute=u,l.mc_plugin_npm_name=t.plugin_npm_name,l.plugin_channel_class=t.Channel,l.DescriptiveIncident=t.DescriptiveIncident,l.addContext(a),null!==u){var c=l.constructionIngredients.attrs.animatedAttrs[l.attribute];Array.isArray(c)?l.originalAnimatedAttributeValue=b(c):di(c)?l.originalAnimatedAttributeValue=n({},c):l.originalAnimatedAttributeValue=c}return l.easing=$n.linear,mi(l.props,"easing")&&(Array.isArray(l.props.easing)?l.easing=nr(l.props.easing[0],l.props.easing[1],l.props.easing[2],l.props.easing[3]):l.easing=$n[l.props.easing]),l}return s}(t);return{F:i,d:[{kind:"get",key:"originalContext",value:function(){return this.contexts[this.originalContextKey]}},{kind:"get",key:"duration",value:function(){return f(l(i.prototype),"duration",this)}},{kind:"set",key:"duration",value:function(e){for(var t in g(l(i.prototype),"duration",e,this,!0),this.contexts)this.contexts[t].duration=e}},{kind:"method",key:"addContext",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!1;0===Object.keys(this.contexts).length&&(this.originalContextKey=e.clipId,this.originalClipContext=e.context,i=!0);var r=ar(n(n({},this.constructionIngredients),{},{context:e.context,mcid:this.mcid}));this.contexts[e.clipId]=r,i||null==this.attribute||this.contexts[e.clipId].setInitialValue(this.initialValue),t&&this.contexts[e.clipId].context.contextLoaded&&this.contexts[e.clipId]._onGetContextOnce()}},{kind:"method",key:"handleAddContext",value:function(e,t){return this.addContext(t,!0),!0}},{kind:"method",key:"handleContextLoaded",value:function(e,t){return this._onGetContextOnce(),!0}},{kind:"method",decorators:[ir],key:"getIncidentsByChannel",value:function(){}},{kind:"method",key:"onProgress",value:function(e,t,n){var i=t%(this.delay+this.props.duration+this.hiatus);0!==t&&0===i&&(i=this.delay+this.props.duration);var r=i-this.delay;r<0?r=0:r>this.props.duration&&(r=this.props.duration);var s=r/this.props.duration,a=this.easing(s),o=a*this.props.duration;if(null!=n)!1!==this.contexts[n].context.contextLoaded&&this.contexts[n].onProgress(a,o);else for(var u in this.contexts)this.originalContextKey===u&&!0===this.originalContext.fragment||this.contexts[u].onProgress(a,o)}},{kind:"get",key:"animatedAttributeValue",value:function(){return this.constructionIngredients.attrs.animatedAttrs[this.attribute]}},{kind:"set",key:"animatedAttributeValue",value:function(e){this.constructionIngredients.attrs.animatedAttrs[this.attribute]=e}},{kind:"method",key:"gotContext",value:function(){for(var e in this.contexts)this.contexts[e].gotContext()}},{kind:"method",key:"_onGetContextOnce",value:function(){if(!1!==this.originalContext.context.contextLoaded)for(var e in this.contexts)this.contexts[e]._onGetContextOnce()}},{kind:"method",key:"lastWish",value:function(){for(var e in this.contexts)this.contexts[e].lastWish()}},{kind:"method",key:"onGetContext",value:function(){if(!1!==this.originalContext.contextLoaded)for(var e in this.contexts)this.contexts[e].context.contextLoaded&&this.contexts[e].onGetContext()}},{kind:"get",key:"initialValue",value:function(){return this.originalContext.initialValue}},{kind:"get",key:"scratchValue",value:function(){return this.originalContext.scratchValue}},{kind:"get",key:"pureInitialValues",value:function(){return this.originalContext.pureInitialValues}},{kind:"method",key:"setInitialValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var n in null===e&&(e=this.getScratchValue()),this.contexts)this.contexts[n].setInitialValue(JSON.parse(JSON.stringify(e)),t)}},{kind:"method",key:"getScratchValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this.originalContext.context.contextLoaded)return 0;if(null!=e)return this.contexts[e].getScratchValue();var t=Object.keys(this.contexts);return mi(this.originalClipContext,"nonFragmentedContext")?ar(n(n({},this.constructionIngredients),{},{context:this.originalClipContext.nonFragmentedContext,mcid:this.mcid})).getScratchValue():1===t.length?this.originalContext.getScratchValue():this.contexts[t[1]].getScratchValue()}},{kind:"method",key:"setCompoAttrKeyValue",value:function(e,t){for(var n in this.contexts)this.contexts[n].attrs.animatedAttrs[this.attribute][e]=t,this.contexts[n].lastWish(),this.contexts[n].onGetContext()}},{kind:"method",key:"play",value:function(e,t,n){return this.contexts[n].play(t)}},{kind:"method",key:"stop",value:function(e){this.contexts[e].stop()}}]}}),Ni),lr=function(e){u(i,e);var t=h(i);function i(e,n,s,a,o){var u;return r(this,i),(u=t.call(this,{},{id:"".concat(e.id,"_").concat(s)})).mcid=s,u.selector=a,u.data=o,u.setUp(e,n),u}return a(i,[{key:"setUp",value:function(e,t){for(var i in this.data.attrs.animatedAttrs){var r={};r[i]=this.data.attrs.animatedAttrs[i];var s=n(n({},this.data.attrs),{},{animatedAttrs:r}),a=n(n({},this.data.props),{},{selector:this.selector}),o={incidentId:e.id,attrs:s,props:a,Incident:e.constructor.Incident,plugin_npm_name:e.constructor.plugin_npm_name,Channel:e.constructor.Channel,DescriptiveIncident:e},u=new ur(o,t,this.mcid,i);this.addChild(u,0)}}}]),i}(Gi),cr=function(e){u(n,e);var t=h(n);function n(e,i){var s;return r(this,n),(s=t.call(this,{},{id:e.id})).contexts={},s.contexts[i.clipId]=i.context,s.originalContextKey=i.clipId,s.initParams=i.context.initParams,s.instantiatedCopiesContexts=i.instantiatedCopiesContexts,s.descriptiveIncident=e,s.staggerAttrs=[],s.staggerProps=[],s.setUp(e,i),s}return a(n,[{key:"originalContext",get:function(){return this.contexts[this.originalContextKey]}},{key:"parsePropsDynamicValues",value:function(e,t){for(var n,i=0;i<e.propsStaggers.length;i++)n=e.propsStaggers[i],this.staggerProps.push({path:n.path,values:n.stagger.calculateValues(t,this.initParams)})}},{key:"parseAttrsDynamicValues",value:function(e,t){for(var n,i=0;i<e.attributesStaggers.length;i++)n=e.attributesStaggers[i],this.staggerAttrs.push({path:n.path,values:n.stagger.calculateValues(t,this.initParams)})}},{key:"setUp",value:function(e,t){var n,i,r=this.originalContext.getElements(e.selector());this.parsePropsDynamicValues(e,r),this.parseAttrsDynamicValues(e,r);for(var s=0;s<r.length;s++){for(var a in n=r[s],i=this._getElementMCID(n),this.instantiatedCopiesContexts)this._setElementMCID(this.instantiatedCopiesContexts[a],this.instantiatedCopiesContexts[a].getElements(e.selector())[s],i);this._createElementIncident(n,e,t,s,r.length,i)}}},{key:"handleRecalcDuration",value:function(e,t){var i=f(l(n.prototype),"handleRecalcDuration",this).call(this,e,t);return this.descriptiveIncident.propsStaggers.length>0&&(this.descriptiveIncident.dynamicDurationValue=1*this.duration),i}},{key:"lastWish",value:function(){this.descriptiveIncident.propsStaggers.length>0&&(this.descriptiveIncident.dynamicDurationValue=null,this.descriptiveIncident.putMessageOnPipe("setDurationDynamic",{},"Groups",{selfExecute:!1,direction:Vi})),f(l(n.prototype),"lastWish",this).call(this)}},{key:"_getElementMCID",value:function(e){var t=this.originalContext.getMCID(e);return t||(t=Ei(!0),this.originalContext.setMCID(e,t)),t}},{key:"_setElementMCID",value:function(e,t,n){e.getMCID(t)||e.setMCID(t,n)}},{key:"_prepareAttrsPropsForElement",value:function(e,t){var n=function(e,t){for(var n=[],i=0;i<e.length;i++)n.push({path:e[i].path,value:e[i].values[t]});return n}(this.staggerAttrs,t),i=function(e,t){for(var n=[],i=0;i<e.length;i++)n.push({path:e[i].path,value:e[i].values[t]});return n}(this.staggerProps,t),r=e.attrs,s=e.props;if(n.length>0){r=JSON.parse(JSON.stringify(e.attrs));for(var a=0;a<n.length;a++)Mi(r,n[a].path,n[a].value)}if(i.length>0){s=JSON.parse(JSON.stringify(e.props));for(var o=0;o<i.length;o++)Mi(s,i[o].path,i[o].value)}return{attrs:r,props:s}}},{key:"_createElementIncident",value:function(e,t,n,i,r,s){var a=this._prepareAttrsPropsForElement(t,i);if(mi(t.attrs,"animatedAttrs")){var o=new lr(t,n,s,n.context.getElementSelectorByMCID(s),a);this.addChild(o,0)}else{var u=a.attrs,l=a.props,c={incidentId:t.id,attrs:u,props:l,Incident:t.constructor.Incident,plugin_npm_name:t.constructor.plugin_npm_name,Channel:t.constructor.Channel,DescriptiveIncident:t},p=new ur(c,n,s,null);this.addChild(p,0)}}}]),n}(Gi);function pr(e){var t=new e.Class(e.attrs,e.props);if(!1===t.result)return t;if(mi(e,"incidents"))for(var n in e.incidents){var i=e.incidents[n],r=pr(i.leaf);if(!1===r.result)return r;var s=t.addIncident(r,i.position);if(!1===s.result)return s}return t}var dr=function(e){u(i,e);var t=h(i);function i(e,n){var s;return r(this,i),(s=t.call(this,e,n)).realClip=e.realClip,s}return a(i,[{key:"_createElementIncident",value:function(e,t,i,r,s,a){var o=this._prepareAttrsPropsForElement(t,0);if(t.realClip.isNullClip){var u=pr(n(n({},t.exportLiveDefinition()),o));t.realClip=u.realClip}var l=t.realClip.exportConstructionArguments(),c=n(n(n(n({},t.props),{},{duration:t.realClip.duration},l.props),o.props),{},{selector:i.context.getElementSelectorByMCID(a)}),p={incidentId:t.id,attrs:l.attrs,props:c,Incident:t.constructor.Incident,plugin_npm_name:t.constructor.plugin_npm_name,Channel:Ui,DescriptiveIncident:t},d=new or(p,i,a,t);this.addChild(d,0)}}]),i}(cr),hr="7.6.4",mr=["cm","mm","in","px","pt","pc","em","ex","ch","rem","vw","vh","vmin","vmax","%"],fr=[{type:"string",optional:!0,default:"linear",enum:["linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce"]},{type:"array",optional:!0,length:4,items:{type:"number"}}],vr={type:"string",empty:!1,trim:!0,optional:!0},gr={type:"string",empty:!1,trim:!0,optional:!0},yr={type:"string",empty:!1,optional:!1},br={type:"amount",optional:!1,integer:!0,min:0},xr={type:"amount",optional:!0,integer:!0,min:0},kr={type:"amount",integer:!0,min:1,optional:!0},wr={type:"amount",integer:!0,min:0,optional:!0},Cr={type:"amount",integer:!0,min:0,optional:!0},Ir={type:"html",optional:!0},Er={type:"css",optional:!0},Sr={type:"array",optional:!0,items:{type:"object",props:{type:{enum:["google-font"],type:"string"},src:{type:"string"}}}},Pr={type:"array",items:{type:"object",strict:!0,props:{src:"string",id:"string",mcid:{type:"string",optional:!0},classes:{type:"array",optional:!0,items:"string"},base64:{type:"boolean",optional:!0},startValues:{optional:!0,type:"object",props:{gain:{optional:!0,type:"number"},pan:{optional:!0,type:"number"}}}}},optional:!0},Mr=ui({id:vr,name:gr,selector:n(n({},yr),{},{optional:!0}),easing:fr,duration:br,startFrom:{type:"amount",integer:!0,min:0,optional:!0},repeats:kr,hiatus:wr,delay:Cr}),Ar={type:"object",optional:!0,props:{width:{type:"measurement",units:mr,optional:!0},height:{type:"measurement",units:mr,optional:!0}}},Or={type:"string",enum:["on","off","only"],optional:!0},Tr=ui({props:[{type:"object",strict:!0,props:{id:vr,name:gr,selector:n(n({},yr),{},{optional:!0}),repeats:kr,hiatus:wr,delay:Cr,easing:fr,duration:xr,html:Ir,css:Er,audioSources:Pr,audio:Or,containerParams:Ar,fonts:Sr,initParams:{type:"object",optional:!0}}},{type:"object",strict:!0,props:{id:vr,name:gr,host:{type:"any",optional:!1},duration:xr,html:Ir,css:Er,audioSources:Pr,audio:Or,containerParams:Ar,fonts:Sr,initParams:{type:"object",optional:!0},initParamsValidationRules:{type:"object",optional:!0}}},{type:"object",strict:!0,props:{root:{type:"boolean",optional:!0},name:gr,id:vr,audioSources:Pr,audio:n(n({},Or),{},{enum:["on"]})}}]}),Dr=ui({selector:n(n({},yr),{},{optional:!0,strict:!0}),name:gr}),_r=ui({selector:n(n({},yr),{},{strict:!0,optional:!0}),name:gr,repeats:{type:"amount",integer:!0,min:1,optional:!0},hiatus:{type:"amount",integer:!0,min:0,optional:!0},delay:{type:"amount",integer:!0,min:0,optional:!0}});function Br(e){e.descriptor.value=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.exportLiveDefinition();for(var i in e)Ne(i,e[i],!0,"attrs",n);for(var r in t)Ne(r,t[r],!0,"props",n);return pr(n)}}ui({selector:yr,duration:br});var qr="mc.descriptive.decisionAuthority";function Vr(e){e.descriptor.value=function(e){if(null!==this.constructor.attrsValidationRules){var t=this.constructor.attrsValidationMethod(e);if(t.length>0)return{result:!1,errors:t}}return!0===this.putMessageOnPipe("checkForClip",{},qr,{selfExecute:!0,direction:Vi}).response?this.manageEditAttrProps(e,"attrs"):(this.attrs=e,{result:!0})}}function jr(e){e.descriptor.value=function(e){var t=Oi(e,this.constructor.propsValidationRules,this.constructor);return t.result?!0===this.putMessageOnPipe("checkForClip",{},qr,{selfExecute:!0,direction:Vi}).response?this.manageEditAttrProps(e,"props"):(this.props=e,{result:!0}):t}}function Lr(e){e.descriptor.value=function(){return null!==this.props.host&&void 0!==this.props.host?[this.props.host]:this.hasParent&&this.putMessageOnPipe("checkForClip",{},qr,{selfExecute:!0,direction:Vi}).response?this.putMessageOnPipe("getElements",{selector:this.selector()},qr,{selfExecute:!1,direction:Vi}).response:[]}}function Nr(e){e.descriptor.value=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{check:!0};if("dynamic"===this.duration)return{result:!1,reason:"Incidents with dynamic duration can't be resized. Once the Incident enters a Clip it'll become resizable"};if(e===this.duration)return{result:!0,meta:{unprocessed:!0}};if(e<=0)return{result:!1,reason:"Size must always be > 0"};if(t.check&&this.hasParent){var n=this.putMessageOnPipe("checkResize",{id:this.id,newSize:e,fraction:e/this.duration},qr,{selfExecute:!1,direction:Vi});if(!n.response.result)return n.response}return this.setNewDuration(e),{result:!0}}}function Rr(e){e.descriptor.value=function(){return null===this.inheritedSelector?mi(this.props,"selector")?this.props.selector:null:mi(this.props,"selector")?"&"===this.props.selector.charAt(0)?this.inheritedSelector+this.props.selector.substring(1):"".concat(this.inheritedSelector," ").concat(this.props.selector):this.inheritedSelector}}var Fr=function(){function e(t){r(this,e),this.expressionProps=t}return a(e,[{key:"calculateValues",value:function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n].getAttribute(this.expressionProps.attribute);ci(i)&&(i=parseFloat(i)),t.push(i)}return t}}]),e}(),$r=function(){function e(t){r(this,e),this.patternProps=t}return a(e,[{key:"calculateValues",value:function(e){for(var t=this.patternProps.pattern.length,n=[],i=0;i<e.length;i++)n.push(this.patternProps.pattern[i%t]);return n}},{key:"resize",value:function(e){if("amount"!==this.patternProps.type)return"".concat(L.patternValue,"(").concat(this.patternProps.pattern.join(),")");for(var t=[],n=0;n<this.patternProps.pattern.length;n++)t.push(e*this.patternProps.pattern[n]);return"".concat(L.patternValue,"(").concat(t.join(),")")}}]),e}(),zr=function(){function e(t){r(this,e),this.expressionProps=t}return a(e,[{key:"calculateValues",value:function(e,t){var n=this.expressionProps.expression.substring(this.expressionProps.expression.indexOf(".")+1),i=Re(n,"",t);return Array(e.length).fill(i)}}]),e}(),Hr=function e(t){return r(this,e),"expression"===t.dynamicType?new Fn(t):"stagger"===t.dynamicType?new Gn(t):"attribute"===t.dynamicType?new Fr(t):"pattern"===t.dynamicType?new $r(t):"initParams"===t.dynamicType?new zr(t):(Ai.error('dynamicType must be either "stagger", "expression", "pattern", "attribute" or "initParams". '.concat(t.dynamicType," provided")),!1)};function Wr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!e)return[];for(var n=[],i=0,r=Object.entries(e);i<r.length;i++){var s=y(r[i],2),a=s[0],o=s[1];if(!(o instanceof Element))if(di(o)){var u=Wr(o,"".concat(t).concat(""===t?"":".").concat(a));n.push.apply(n,b(u))}else if(pi(o)){var l=o.trim();if(l.startsWith(L.staggerPreface)){var c=Hn(l,!1),p=c.start.match(vi)[0],d=c.end.match(vi)[0],h=c.start.toString().substring(p.length),m={dynamicType:"stagger",path:"".concat(t).concat(""===t?"":".").concat(a),from:1*p,to:1*d,mode:c.mode,unit:h,fraction:c.startFraction,easing:c.easing,reverse:c.reverse,type:""===h?"amount":"measurement"};n.push(m)}else if(l.startsWith(L.attributeValue)){var f={dynamicType:"attribute",path:"".concat(t).concat(""===t?"":".").concat(a),unit:"",type:"measurement",attribute:/\(([^)]+)\)/.exec(l)[1]};n.push(f)}else if(l.startsWith(L.mathExpPreface)){var v=Rn(l),g={dynamicType:"expression",path:"".concat(t).concat(""===t?"":".").concat(a),unit:v.unit,type:""===v.unit?"amount":"measurement",expression:v.expression};n.push(g)}else if(l.startsWith(L.patternValue)){for(var x=ki(l),k=!0,w=[],C=0;C<x.length;C++){if(!ci(x[C])){k=!1;break}w.push(parseFloat(x[C]))}k&&(x=w);var I={dynamicType:"pattern",path:"".concat(t).concat(""===t?"":".").concat(a),unit:"",type:k?"amount":"measurement",pattern:x};n.push(I)}else if(l.startsWith(L.initParamsPreface)){var E={dynamicType:"initParams",path:"".concat(t).concat(""===t?"":".").concat(a),unit:"",type:"",expression:l};n.push(E)}}}return n}function Gr(e){e.descriptor.value=function(){for(var e={attrs:{},props:{}},t=Wr(this.props),n=0;n<t.length;n++)this.propsStaggers.push({path:t[n].path,stagger:new Hr(t[n])}),mi(e.props,t[n].dynamicType)||(e.props[t[n].dynamicType]=0),e.props[t[n].dynamicType]+=1;for(var i=Wr(this.attrs),r=0;r<i.length;r++)this.attributesStaggers.push({path:i[r].path,stagger:new Hr(i[r])}),mi(e.attrs,i[r].dynamicType)||(e.attrs[i[r].dynamicType]=0),e.attrs[i[r].dynamicType]+=1;return e}}var Ur=P(null,(function(e,t){var n=function(t){u(i,t);var n=h(i);function i(){var t,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r(this,i),null===a?(t=n.call(this,s),e(p(t)),t.attrs={},t.props=s):(t=n.call(this,a),e(p(t)),t.attrs=s,t.props=a);var o=Oi(t.props,Dr,t.constructor);return o.result?(t._inheritedSelector=null,t.attributesStaggers=[],t.propsStaggers=[],t.setupDynamicValues(),t.passiveAddition=!0,t._buildTree(),t.passiveAddition=!1,d(t)):d(t,o)}return i}(t);return{F:n,d:[{kind:"field",static:!0,key:"Incident",value:function(){return Gi}},{kind:"field",static:!0,key:"plugin_npm_name",value:function(){return"motor-cortex-js"}},{kind:"field",static:!0,key:"version",value:function(){return hr}},{kind:"field",static:!0,key:"Channel",value:function(){return qi}},{kind:"field",static:!0,key:"ClassName",value:function(){return"Group"}},{kind:"field",static:!0,key:"isGroup",value:function(){return!0}},{kind:"field",static:!0,key:"attrsValidationRules",value:function(){return null}},{kind:"field",static:!0,key:"propsValidationRules",value:function(){return Dr}},{kind:"method",decorators:[Vr],key:"editAttributes",value:function(){}},{kind:"method",decorators:[jr],key:"editProperties",value:function(){}},{kind:"method",decorators:[Nr],key:"resize",value:function(){}},{kind:"method",decorators:[Br],key:"clone",value:function(){}},{kind:"method",decorators:[Rr],key:"selector",value:function(){}},{kind:"method",decorators:[Lr],key:"getElements",value:function(){}},{kind:"method",decorators:[Gr],key:"setupDynamicValues",value:function(){}},{kind:"method",key:"_buildTree",value:function(){this.buildTree()}},{kind:"method",key:"_calculateDuration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=0;for(var n in this.children){var i=this.children[n];if(!0===e&&!0===i.leaf.constructor.isGroup&&i.leaf._calculateDuration(!0),"dynamic"===i.leaf.duration){t="dynamic";break}i.position+i.leaf.duration>t&&(t=i.position+i.leaf.duration)}return t!==this.calculatedDuration&&(this.calculatedDuration=t,!0)}},{kind:"method",key:"_rebuildTree",value:function(){for(var e in this.children){var t=this.children[e];!0===t.leaf.passive&&this.removeIncident(t.id)}this.passiveAddition=!0,this.buildTree(),this.passiveAddition=!1}},{kind:"method",key:"buildTree",value:function(){}},{kind:"get",key:"duration",value:function(){return"dynamic"===this.calculatedDuration?this.calculatedDuration:f(l(n.prototype),"duration",this)}},{kind:"set",key:"duration",value:function(e){g(l(n.prototype),"duration",e,this,!0)}},{kind:"method",key:"manageEditAttrProps",value:function(e,t){var n=this.parentNode,i=n.getLeafPosition(this.id),r=JSON.parse(JSON.stringify(this[t]));this[t]=e,n.removeIncident(this.id),this._rebuildTree();var s=n.addIncident(this,i);return s.result||(this[t]=r,this._rebuildTree(),n.addIncident(this,i)),s}},{kind:"method",key:"detachFromParent",value:function(){f(l(n.prototype),"detachFromParent",this).call(this),this.inheritedSelector=null}},{kind:"get",key:"inheritedSelector",value:function(){return this._inheritedSelector}},{kind:"set",key:"inheritedSelector",value:function(e){for(var t in this._inheritedSelector=e,this.children)this.children[t].leaf.inheritedSelector=this.selector()}},{kind:"get",key:"selectorToPassToChildren",value:function(){return this.selector()}},{kind:"method",key:"exportDefinition",value:function(){var e={ClassName:this.constructor.ClassName,version:this.constructor.version,plugin:this.constructor.plugin||this.constructor.plugin_npm_name,plugin_npm_name:this.constructor.plugin_npm_name,attrs:this.attrs,props:this.props,incidents:{},duration:this.duration};for(var t in this.children){var n=this.children[t];!0!==n.leaf.passive&&(e.incidents[t]={id:n.id,position:n.position,leaf:n.leaf.exportDefinition()})}return e}},{kind:"method",key:"exportLiveDefinition",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=JSON.parse(JSON.stringify(this.props));!1===e&&delete t.id;var n={Class:this.constructor,attrs:JSON.parse(JSON.stringify(this.attrs)),props:t,incidents:{}};for(var i in this.children){var r=this.children[i];!0!==r.leaf.passive&&(n.incidents[i]={position:r.position,leaf:r.leaf.exportLiveDefinition(e)})}return n}},{kind:"method",key:"addIncident",value:function(e,t){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{check:!0};if(e.inheritedSelector=this.selectorToPassToChildren,!0===r.check){var s=f(l(n.prototype),"checkAddition",this).call(this,e,t);if(!s.result)return e.inheritedSelector=null,s;if(!0===(i=this.putMessageOnPipe("checkForClip",{},qr,{selfExecute:!0,direction:Vi})).response){var a=e.putMessageOnPipe("checkForInvalidSelectors",{},null,{selfExecute:!0,direction:ji});if(a.length>0){for(var o=[],u=0;u<a.length;u++)o.push(a[u].response);return{result:!1,errors:o}}}var c=this.putMessageOnPipe("checkAddition",{incident:e,millisecond:t,parentGroupId:this.id},qr,{selfExecute:!0,direction:Vi});if(!c.response.result)return e.inheritedSelector=null,c.response}!0===this.passiveAddition&&(e.passive=!0);var p=this.addChild(e,t);return p.result||(e.inheritedSelector=null),"dynamic"===e.duration&&i&&this._calculateDuration(!0),p}},{kind:"method",key:"moveIncident",value:function(e,t){var i=e;di(e)&&(i=e.id);var r=f(l(n.prototype),"checkEditPosition",this).call(this,i,t);if(!r.result)return r;var s=t-this.getLeafPosition(i);if(0===s)return{result:!0};var a=this.putMessageOnPipe("checkMove",{id:i,millisecond:t,positionDelta:s,parentGroupId:this.id},qr,{selfExecute:!0,direction:Vi});return a.response.result?this.editPosition(i,t):a.response}},{kind:"method",key:"removeIncident",value:function(e){var t=e;di(e)&&(t=e.id);var i=f(l(n.prototype),"checkRemoveChild",this).call(this,t);if(!i.result)return i;var r=this.putMessageOnPipe("checkDeletion",{id:t,parentGroupId:this.id},qr,{selfExecute:!0,direction:Vi});return r.response.result?this.removeChild(t):r.response}},{kind:"method",key:"handleCheckForClip",value:function(e,t){return!!this.hasParent&&this.bypass()}},{kind:"method",key:"handleCheckAddition",value:function(e,t){return this.hasParent?this.bypass():{result:!0}}},{kind:"method",key:"handleCheckMove",value:function(e,t){return this.hasParent?this.bypass():{result:!0}}},{kind:"method",key:"handleCheckDeletion",value:function(e,t){return this.hasParent?this.bypass():{result:!0}}},{kind:"method",key:"handleCheckResize",value:function(e,t){return this.hasParent?this.bypass():{result:!0}}},{kind:"method",key:"handleSetDurationDynamic",value:function(e,t){this.calculatedDuration="dynamic",this.putMessageOnPipe("setDurationDynamic",{},"Groups",{selfExecute:!1,direction:Vi})}}]}}),zi),Jr="-",Kr={isCombo:function(e){return e.incidentClass.isCombo},getItem:function(e,t){return Re(t.join("."),"attrs",e)},getRepeatPosition:function(e,t,n,i){return i*(t||0)+(i+1)*(e||0)+i*n},refersToOwnSelector:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=t;!1===Array.isArray(t)&&(i=t.split("."));var r=this.getItem(e,i.slice(0,2+n));return(""===r.props.selector||void 0===r.props.selector||null===r.props.selector)&&("props"===i[2]||!this.isCombo(r)||this.refersToOwnSelector(e,i,n+3))},cascadeSelectors:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=[],r=0;r<t.length;r++){var s=t[r],a=void 0;if(a=mi(s.props,"selector")?"".concat(e," ").concat(s.props.selector):e,i.push({path:"".concat(n).concat(""===n?"":".").concat(r,".props.selector"),value:a}),this.isCombo(s)){var o=this.cascadeSelectors(a,s.attrs.incidents,"".concat(n).concat(""===n?"":".").concat(r,".attrs.incidents"));i=i.concat(o)}}return i},createDescriptiveIncidentLikeObject:function(e,t,n,i,r){return{constructor:{Incident:e.incidentClass.targetClass.Incident,plugin_npm_name:e.incidentClass.targetClass.plugin_npm_name,Channel:e.incidentClass.targetClass.Channel,isClip:!1},attrs:i||e.attrs,props:r||e.props,selector:function(){return e.props.selector},id:e.props.id,audioClip:null,audio:"no",dynamicDurationValue:null,putMessageOnPipe:function(){},attributesStaggers:t,propsStaggers:n}},parseElementsDynamics:function(e,t,n,i,r){for(var s="incidents.".concat(r,".attrs"),a="incidents.".concat(r,".props"),o=On(t),u=On(n),l=0;l<e.length;l++)if(0===e[l].path.indexOf(s)){var c=e[l].path.substring(s.length+1);o.setValue(c,e[l].values[i])}else if(0===e[l].path.indexOf(a)){var p=e[l].path.substring(a.length+1);u.setValue(p,e[l].values[i])}return{incidentAttrs:o.exportFlattened(),incidentProps:u.exportFlattened()}},getStaggersForChild:function(e,t,n){for(var i=[],r=[],s=0;s<e.length;s++)"position"===n&&0===e[s].path.indexOf("incidents.".concat(t,".").concat(n))?r.push({path:"position",stagger:e[s].stagger}):0===e[s].path.indexOf("incidents.".concat(t,".").concat(n))?r.push({path:e[s].path.substring("incidents.".concat(t,".").concat(n).length+1),stagger:e[s].stagger}):i.push(e[s]);return{identifiedDynamics:r,remainingDynamics:i}},createElementProxy:function(e,t,n,i,r){for(var s=On(e),a=this.cascadeSelectors(t,e.attrs.incidents,"attrs.incidents"),o=0;o<i.length;o++)s.setValue("attrs.".concat(i[o].path),i[o].values[n]);for(var u=0;u<r.length;u++)s.setValue("props.".concat(r[u].path),r[u].values[n]);for(var l=0;l<a.length;l++)s.setValue(a[l].path,a[l].value);return s}},Xr=function(e){u(n,e);var t=h(n);function n(){return r(this,n),t.apply(this,arguments)}return a(n,[{key:"parseAttrsDynamicValues",value:function(e,t){this.childrenStaggers=[];for(var n=0;n<e.attributesStaggers.length;n++)Kr.refersToOwnSelector(e,e.attributesStaggers[n].path)?this.staggerAttrs.push({path:e.attributesStaggers[n].path,values:e.attributesStaggers[n].stagger.calculateValues(t,this.initParams)}):this.childrenStaggers.push(e.attributesStaggers[n])}},{key:"handleRecalcDuration",value:function(e,t){var i=f(l(n.prototype),"handleRecalcDuration",this).call(this,e,t);return this.descriptiveIncident.dynamicDurationValue=1*this.duration,i}},{key:"lastWish",value:function(){this.descriptiveIncident.dynamicDurationValue=null,this.descriptiveIncident.putMessageOnPipe("setDurationDynamic",{},"Groups",{selfExecute:!1,direction:Vi}),f(l(n.prototype),"lastWish",this).call(this)}},{key:"_createElementIncident",value:function(e,t,n,i,r,s){for(var a=this,o=Kr.createElementProxy(t,n.context.getElementSelectorByMCID(s),i,this.staggerAttrs,this.staggerProps),u=0;u<this.staggerAttrs.length;u++)o.setValue("attrs.".concat(this.staggerAttrs[u].path),this.staggerAttrs[u].values[i]);for(var l=ar({id:"".concat(this.id,"_element").concat(Jr).concat(i),attrs:{},props:{},Incident:Ur.Incident,plugin_npm_name:Ur.plugin_npm_name,Channel:Ur.Channel,DescriptiveIncident:new Ur}),c=function(e){var t=ar({id:"".concat(a.id,"_element").concat(Jr).concat(i,"_repeat").concat(Jr).concat(e),attrs:{},props:{},Incident:Ur.Incident,plugin_npm_name:Ur.plugin_npm_name,Channel:Ur.Channel,DescriptiveIncident:new Ur}),s=a.childrenStaggers;o.attrs.incidents.forEach((function(u,l){var c=Kr.parseElementsDynamics(a.staggerAttrs,u.attrs,u.props,i,l),p=c.incidentAttrs,d=c.incidentProps,h=Kr.getStaggersForChild(s,l,"attrs"),m=Kr.getStaggersForChild(h.remainingDynamics,l,"props"),f=Kr.getStaggersForChild(h.remainingDynamics,l,"position");s=m.remainingDynamics,o.setValue("attrs.incidents.".concat(l,".props.id"),"".concat(a.id,"_element").concat(Jr).concat(i,"_repeat").concat(Jr).concat(e,"_incident").concat(Jr).concat(l));var v=Qr(Kr.createDescriptiveIncidentLikeObject(u,h.identifiedDynamics,m.identifiedDynamics,p,d),n),g=u.position;1===f.identifiedDynamics.length&&(g=f.identifiedDynamics[0].stagger.calculateValues(new Array(r),a.initParams)[i]),t.addChild(v,g)})),l.addChild(t,Kr.getRepeatPosition(o.props.delay,o.props.hiatus,t.duration,e))},p=0;p<(o.props.repeats||1);p++)c(p);this.addChild(l,0)}}]),n}(cr);function Qr(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(i&&"off"===e.audio||!i&&"only"===e.audio)return null;if(mi(e.props,"selector")&&(!i&&"~"===e.props.selector.charAt(0)||i&&"~"!==e.props.selector.charAt(0)&&!e.constructor.isClip))return null;if(e.constructor.isClip){if(!mi(e.props,"selector")||i)return i?e.audioClip:e.realClip;(n=new dr(e,t)).plugin_channel_class=qi}else if(e.constructor.isCombo)n=new Xr(e,t);else if(e.constructor.isGroup)for(var r in n=ar({id:e.id,attrs:e.attrs,props:e.props,Incident:e.constructor.Incident,plugin_npm_name:e.constructor.plugin_npm_name,Channel:e.constructor.Channel,DescriptiveIncident:e}),e.children){var s=Qr(e.children[r].leaf,t);null!==s&&n.addChild(s,e.children[r].position)}else n=new cr(e,t);return n}var Yr="@donkeyclip/self-contained-incidents";function Zr(e){return function(){for(var t=0;t<e.length;t++)e[t]()}}var es=function(e){u(n,e);var t=h(n);function n(e,i,s){var a;return r(this,n),(a=t.call(this,e,i)).attrs=e,a.props=i,a.DescriptiveIncident=s,a.isTheClip=!0,a.blockingWaitings={},a.instantiatedChannels={},a.isHostedClip=!0,a.instantiatedCopiesContexts={},a.onClipInitialise(),a.runTimeInfo=a.props.runTimeInfo,a.durationSubs=[],a.audioClip=!1,a}return a(n,[{key:"contextReady",get:function(){return this.context.contextLoaded}},{key:"onClipInitialise",value:function(){}},{key:"contextLoading",value:function(){this.context.contextLoaded=!1}},{key:"contextLoaded",value:function(){for(var e in this.context.contextLoaded=!0,this.putMessageOnPipe("contextLoaded",{},{},{selfExecute:!1,direction:ji}),this.instantiatedChannels)this.instantiatedChannels[e].recalcScratchValues();this.unblock(this.clipCopyId||null)}},{key:"getElements",value:function(e){if(null!==this.props.host&&void 0!==this.props.host)return this.context.getElements(e);var t=[];for(var n in this.instantiatedCopiesContexts)for(var i=this.instantiatedCopiesContexts[n].getElements(e),r=0;r<i.length;r++)t.push(i[r]);return t}},{key:"addContext",value:function(e){this.instantiatedCopiesContexts[e.clipId]=e.context,e.instantiatedCopiesContexts=this.instantiatedCopiesContexts;var t=this.putMessageOnPipe("addContext",e,{},{selfExecute:!1,direction:ji});if(1===Object.keys(this.instantiatedCopiesContexts).length){for(var n in this.instantiatedChannels)this.instantiatedChannels[n].recalcScratchValues(e.clipId);this.context.nonFragmentedContext=e.context}return t}},{key:"exportConstructionArguments",value:function(){return{attrs:this.attrs,props:this.props}}},{key:"_resize",value:function(e){for(var t in this.instantiatedChannels)this.instantiatedChannels[t]._resize(e);this.setNewDuration(this.duration*e);for(var n=0;n<this.durationSubs.length;n++)this.durationSubs[n](this.duration)}},{key:"addIncident",value:function(e){for(var t=this,n=this.putMessageOnPipe("addIncident",{incident:e.incident,millisecond:e.millisecond,parentGroupId:e.parentGroupId,incidentFromDescription:Qr,contextData:{clipId:this.id,context:this.context,instantiatedCopiesContexts:this.instantiatedCopiesContexts},audio:this.audioClip},e.parentGroupId,{selfExecute:!0,direction:ji}),i={},r=0;r<n.length;r++){var s=n[r].response.getIncidentsByChannel(n[r].positionDelta+e.millisecond);for(var a in s){var o;mi(i,a)||(i[a]=[]),(o=i[a]).push.apply(o,b(s[a]))}}var u=this.checkAddition(i);return u.result?{result:!0,execute:function(){u.execute();for(var i=0;i<n.length;i++)for(var r in n[i].responder.addChild(n[i].response,e.millisecond),n[i].responder.putMessageOnPipe("recalcDuration",{},"Groups",{selfExecute:!0,direction:Vi}),t.instantiatedCopiesContexts)n[i].response.putMessageOnPipe("addContext",{clipId:r,context:t.instantiatedCopiesContexts[r]},"ContextAwareIncidents",{selfExecute:!1,direction:ji});t._calculateDuration()}}:u}},{key:"checkAddition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all-or-nothing",n=!0,i=[],r=[];for(var s in e){mi(this.instantiatedChannels,s)||(this.instantiatedChannels[s]=new e[s][0].incident.plugin_channel_class({runTimeInfo:this.runTimeInfo,context:this.context,subscribe:this.props.subscribe}));var a=this.instantiatedChannels[s].addIncidents(e[s],t);n=n&&a.result,a.result?r.push(a.execute):i=i.concat(a.errors)}return{result:n,errors:i,execute:Zr(r)}}},{key:"moveIncident",value:function(e){for(var t=this.putMessageOnPipe("moveIncident",{incidentId:e.id,millisecond:e.millisecond,parentGroupId:e.parentGroupId,contextData:{clipId:this.id,context:this.context},audio:this.audioClip},e.parentGroupId,{selfExecute:!0,direction:ji}),n={},i=0;i<t.length;i++){var r=t[i].response.getIncidentsByChannel(t[i].positionDelta+e.millisecond);for(var s in r){var a;mi(n,s)||(n[s]=[]),(a=n[s]).push.apply(a,b(r[s]))}}var o=this.checkMove(n,e.positionDelta);if(o.result){function n(){o.execute();for(var n=0;n<t.length;n++)t[n].responder.editPosition(t[n].response.id,e.millisecond),t[n].responder.putMessageOnPipe("recalcDuration",{},"Groups",{selfExecute:!0,direction:Vi})}return{result:!0,execute:n}}return o}},{key:"checkMove",value:function(e,t){var n=!0,i=[],r=[];for(var s in e){var a=this.instantiatedChannels[s].editIncidents(e[s],t);n=n&&a.result,a.result?r.push(a.execute):i=i.concat(a.errors)}return{result:n,errors:i,execute:Zr(r)}}},{key:"removeIncident",value:function(e){for(var t=this.putMessageOnPipe("removeIncident",{incidentId:e.id,parentGroupId:e.parentGroupId,contextData:{clipId:this.id,context:this.context},audio:this.audioClip},e.parentGroupId,{selfExecute:!0,direction:ji}),n={},i=0;i<t.length;i++){var r=t[i].response.getIncidentsByChannel();for(var s in r){var a;mi(n,s)||(n[s]=[]),(a=n[s]).push.apply(a,b(r[s]))}}var o=this.checkDelete(n);return o.result?{result:!0,execute:function(){o.execute();for(var e=0;e<t.length;e++)t[e].responder.removeChild(t[e].response.id),t[e].responder.putMessageOnPipe("recalcDuration",{},"Groups",{selfExecute:!0,direction:Vi})}}:o}},{key:"checkDelete",value:function(e){var t=!0,n=[],i=[];for(var r in e){var s=this.instantiatedChannels[r].removeIncidents(e[r]);t=t&&s.result,s.result?i.push(s.execute):n=n.concat(s.errors)}return{result:t,errors:n,execute:Zr(i)}}},{key:"resizeIncident",value:function(e){for(var t=this.putMessageOnPipe("resize",{incidentId:e.id,newSize:e.newSize,fraction:e.fraction,contextData:{clipId:this.id,context:this.context},audio:this.audioClip},e.id,{selfExecute:!1,direction:ji}),n={},i=0;i<t.length;i++){var r=t[i].response.getIncidentsByChannel(t[i].positionDelta);for(var s in r){var a;mi(n,s)||(n[s]=[]),(a=n[s]).push.apply(a,b(r[s]))}}var o=0;t.length>0&&(o=t[0].positionDelta);var u=this.checkResize(e.fraction,n,o);return u.result?{result:!0,execute:function(){u.execute();for(var n=0;n<t.length;n++)t[n].responder.setNewDuration(e.newSize)}}:u}},{key:"checkResize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!0,r=[],s=[];for(var a in t){var o=_i(t[a],e,n),u=this.instantiatedChannels[a].checkResizedIncidents(o);i&&(i=u.result),u.result?s.push(u.execute):r=r.concat(u.errors)}return{result:i,errors:r,execute:Zr(s)}}},{key:"context",get:function(){var e,t;return null!==(t=(e=this.ownContext).contextLoaded)&&void 0!==t||(e.contextLoaded=!0),this.ownContext}},{key:"getIncidentsByChannel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t={};return t[Yr]=[{millisecond:e,incident:this,id:this.id}],t}},{key:"setVolume",value:function(e){this.volume=parseFloat(e)}},{key:"_onGetContextOnce",value:function(e){}},{key:"handleRecalcDuration",value:function(e,t){if(this._calculateDuration())for(var n=0;n<this.durationSubs.length;n++)this.durationSubs[n](this.duration);return!0}},{key:"onProgress",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!1!==this.contextReady){for(var r in n||(n=this.id),this.instantiatedChannels)this.instantiatedChannels[r].moveTo(this.runTimeInfo.currentMillisecond,t,n,i);this.onAfterProgress(e,t)}else this.setBlock()}},{key:"onAfterProgress",value:function(e,t){}},{key:"flash",value:function(){for(var e in this.instantiatedChannels)this.instantiatedChannels[e].moveTo(0,this.runTimeInfo.currentMillisecond,this.id,!0)}},{key:"subscribeToDurationChange",value:function(e){this.durationSubs.push(e)}},{key:"handleSetBlockingWaiting",value:function(e,t){}},{key:"handleRemoveBlockingWaiting",value:function(e,t){}}]),n}(Gi),ts=function(){function e(){r(this,e),this.customEntities={}}return a(e,[{key:"calcClipDims",value:function(e){var t={use:!1,width:null,height:null};return mi(e,"originalDims")&&null!=e.originalDims.width&&null!=e.originalDims.height?{use:!0,width:e.originalDims.width.number+e.originalDims.width.unit,height:e.originalDims.height.number+e.originalDims.height.unit}:(mi(e,"containerParams")&&(mi(e.containerParams,"width")&&(t.use=!0,t.width=e.containerParams.width),mi(e.containerParams,"height")&&(t.use=!0,t.height=e.containerParams.height)),t)}},{key:"scalingCalculator",value:function(e){if(!mi(e,"containerParams")||!mi(e,"originalDims")||null==e.originalDims.width&&null==e.originalDims.height)return{width:1,height:1};var t=xi(e.containerParams),n=null,i=null;return null!==t.width&&null!==e.originalDims.width&&(t.width.unit===e.originalDims.width.unit?n=t.width.number/e.originalDims.width.number:Ai.warning("containerParams and originalDims width of Incident have different dimensions.\n          containerParams.width will be ignored")),null!==t.height&&null!==e.originalDims.height&&(t.height.unit===e.originalDims.height.unit?i=t.height.number/e.originalDims.height.number:Ai.warning("containerParams and originalDims height of Incident have different dimensions.\n          containerParams.width will be ignored")),null===n&&null===i?{width:1,height:1}:(null!==n&&null===i?i=n:null!==i&&null===n&&(n=i),{width:n,height:i})}},{key:"getElementByMCID",value:function(e){if(mi(this.customEntities,e))return this.customEntities[e];if(mi(this.elementsByMCID,e))return this.elementsByMCID[e];var t=this.context.rootElement.querySelector(this.getElementSelectorByMCID(e));return this.elementsByMCID[e]=t,t}},{key:"getElements",value:function(e){if(null==e||""===e)return[];if("!"===e.charAt(0)){if("#"===(e=e.substr(1)).charAt(0))return[this.customEntities[e.substr(1)]];if("."===e.charAt(0)){var t=[];for(var n in this.customEntities){var i=this.customEntities[n];i.classes.includes(e.substr(1))&&t.push(i)}return t}}return Array.from(this.context.rootElement.querySelectorAll(e))}},{key:"getMCID",value:function(e){return e.customEntity?e.id:e.getAttribute(q)}},{key:"setMCID",value:function(e,t){e.setAttribute(q,t)}},{key:"getElementSelectorByMCID",value:function(e){return mi(this.customEntities,e)?"!#".concat(e):"[".concat(q,'="').concat(e,'"]')}},{key:"setCustomEntity",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return mi(this.customEntities,e)?(Ai.error("Clip ".concat(this.id," already has custom Entity with id: ").concat(e)),!1):(this.customEntities[e]={id:e,entity:t,classes:n,customEntity:!0},!0)}}]),e}();function ns(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(hi(e))return e(t);var i=Nn(e,{items:{initParams:t},keys:{}},n);return pi(i)?i:i.outerHTML}function is(e,t){if("google-font"===t.type)return function(e,t){var n=e.createElement("link");return n.setAttribute("rel","stylesheet"),function(e){return e.trimStart().startsWith("https://fonts.googleapis.com/css")}(t.src)?(n.setAttribute("href",t.src),n):(Ai.error("Only valid google font url are accepted on src of a google-font. ".concat(t.src," provided. No font will loaded")),n)}(e,t);Ai.error("The provided font type is not one of the supported. ".concat(t.type," provided. Aborting loading font."));var n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n}var rs=function(e){u(n,e);var t=h(n);function n(){var e,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r(this,n),e=t.call(this),!di(s))return Ai.error("ContextHandler expects an object on its constructor. ".concat(i(s)," passed")),d(e,!1);if(!mi(s,"html"))return Ai.error("ContextHandler expects the html key on its constructor properties which is missing"),d(e,!1);if(!mi(s,"css"))return Ai.error("ContextHandler expects the css key on its constructor properties which is missing"),d(e,!1);if(mi(s,"initParams")||Ai.info("ContextHandler got null initParams"),!mi(s,"host"))return Ai.error("ContextHandler expects the host key on its constructor properties which is missing"),d(e,!1);e.isDOM=!0;var a=s.host.ownerDocument;if(!a.getElementById("@donkeyclip/motorcortex/iframeContextHandler/css")){var o="\n            iframe[seamless]{\n                background-color: transparent;\n                border: 0px none transparent;\n                padding: 0px;\n                overflow: hidden;\n            }\n            ",u=a.createElement("style");u.id="@donkeyclip/motorcortex/iframeContextHandler/css",u.type="text/css";var l=a.head||a.getElementsByTagName("head")[0];u.styleSheet?u.styleSheet.cssText=o:u.appendChild(a.createTextNode(o)),l.appendChild(u)}var c=a.createElement("iframe");s.host.appendChild(c);var h=e.scalingCalculator(s),m=e.calcClipDims(s);c.setAttribute("seamless","seamless"),!0===m.use&&(null!==m.width&&c.setAttribute("width",m.width),null!==m.height&&c.setAttribute("height",m.height)),c.style.transform="scale(".concat(h.width,", ").concat(h.height,")"),c.style.transformOrigin="top left",c.style.position="absolute",c.src="";var f=c.contentWindow||c.contentDocument;f.document&&(f=f.document),f.write(ns(s.html,s.initParams,!0));var v="\n        body{\n            padding:0;\n            margin:0;\n        }\n        ",g=f.createElement("style");g.type="text/css",g.styleSheet?g.styleSheet.cssText=ns(s.css,s.initParams)+v:g.appendChild(a.createTextNode(ns(s.css,s.initParams)+v));var y=f.head||f.getElementsByTagName("head")[0];if(y.appendChild(g),mi(s,"fonts"))for(var b=0;b<s.fonts.length;b++){var x=is(f,s.fonts[b]);y.appendChild(x)}return e.rootElement=c,f.close(),e.context={document:f,window:c.contentWindow||c,clipContainer:c,rootElement:f.body,unmount:function(){s.host.removeChild(c)},getElements:e.getElements.bind(p(e)),getMCID:e.getMCID.bind(p(e)),setMCID:e.setMCID.bind(p(e)),getElementSelectorByMCID:e.getElementSelectorByMCID.bind(p(e)),getElementByMCID:e.getElementByMCID.bind(p(e)),setCustomEntity:e.setCustomEntity.bind(p(e))},e.elementsByMCID={},e}return n}(ts),ss=function(e){u(n,e);var t=h(n);function n(){var e,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r(this,n),e=t.call(this),!di(s))return Ai.error("ContextHandler expects an object on its constructor. ".concat(i(s)," passed")),d(e);if(!mi(s,"html"))return Ai.error("ContextHandler expects the html key on its constructor properties which is missing"),d(e);if(!mi(s,"css"))return Ai.error("ContextHandler expects the css key on its constructor properties which is missing"),d(e);if(!mi(s,"host"))return Ai.error("ContextHandler expects the host key on its constructor properties which is missing"),d(e);e.isDOM=!0;var a=s.host.shadowRoot;a||(a=s.host.attachShadow({mode:"open"}));var o=document.createElement("div"),u=e.scalingCalculator(s),l=e.calcClipDims(s);o.setAttribute("data-motorocortex-container","true"),!0===l.use&&(null!==l.width&&(o.style.width=l.width),null!==l.height&&(o.style.height=l.height)),o.style.transform="scale(".concat(u.width,", ").concat(u.height,")"),o.style.transformOrigin="top left",o.style.position="absolute",o.style.overflow="hidden",o.innerHTML=ns(s.html,s.initParams,!0),a.appendChild(o);var c=document.createElement("slot");a.appendChild(c);var h=document.createElement("style");if(h.type="text/css",h.styleSheet?h.styleSheet.cssText=ns(s.css,s.initParams):h.appendChild(document.createTextNode("[data-motorocortex-container] { all: initial; }"+ns(s.css,s.initParams))),a.appendChild(h),e.fontTags=[],mi(s,"fonts"))for(var m=0;m<s.fonts.length;m++){var f=s.fonts[m],v=is(document,f);document.getElementsByTagName("head")[0].appendChild(v),e.fontTags.push(v)}return o.style.overflow="hidden",e.rootElement=o,e.context={document,window,clipContainer:e.rootElement,rootElement:o,unmount:function(){try{a.innerHTML="";for(var e=0;e<this.fontTags.length;e++)document.getElementsByTagName("head")[0].removeChild(this.fontTags[e])}catch(e){Ai.warning("The element of the Clip to be removed seems not to exist any more")}},getElements:e.getElements.bind(p(e)),getMCID:e.getMCID.bind(p(e)),setMCID:e.setMCID.bind(p(e)),getElementSelectorByMCID:e.getElementSelectorByMCID.bind(p(e)),getElementByMCID:e.getElementByMCID.bind(p(e)),setCustomEntity:e.setCustomEntity.bind(p(e))},e.elementsByMCID={},e}return n}(ts),as=function(e){u(i,e);var t=h(i);function i(){var e,s,a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=arguments.length>2?arguments[2]:void 0;r(this,i),null===u?(s={},a=o):(s=o,a=u),e=t.call(this,s,a,l),a=n(n({},a),{},{html:""!==e.html?e.html:a.html,css:""!==e.css?e.css:a.css,fonts:e.fonts.length>0?e.fonts:a.fonts});var c=V;e.clipType=c;var p=new(document.head.createShadowRoot||document.head.attachShadow?ss:rs)(a);return e.ownContext=n(n({},p.context),{},{isHostedClip:e.isHostedClip,initParams:a.initParams}),e.iframe=p.iframeElement,e.forceExportIncidents=!0,e.onAfterRender(),e}return a(i,[{key:"onAfterRender",value:function(){}},{key:"html",get:function(){return""}},{key:"css",get:function(){return""}},{key:"fonts",get:function(){return[]}},{key:"rootElement",get:function(){return this.context.clipContainer}},{key:"exportConstructionArguments",value:function(){return{attrs:this.attrs,props:n(n({},this.props),{},{host:void 0,html:!0===this.DescriptiveIncident.constructor.customClip?"":this.context.rootElement.innerHTML})}}},{key:"setCustomEntity",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.context.setCustomEntity(e,t,n)}}]),i}(es),os=function(){function e(){r(this,e),this.output=li.createGain(),this.gainNode=li.createGain(),li.createStereoPanner&&(this.pannerNode=li.createStereoPanner()),li.createStereoPanner?(this.pannerNode.connect(this.gainNode),this.gainNode.connect(this.output),this.input=this.pannerNode):(this.gainNode.connect(this.output),this.input=this.gainNode)}return a(e,[{key:"connect",value:function(e){this.output.connect(e)}},{key:"disconnect",value:function(){this.output.disconnect()}}]),e}();function us(e){for(var t=window.atob(e),n=t.length,i=new Uint8Array(n),r=0;r<n;r++)i[r]=t.charCodeAt(r);return i.buffer}var ls=/\[data(-mcid="+\w+")+\]/g,cs=function(){function e(){r(this,e),this.subscribers=[]}return a(e,[{key:"sub",value:function(e,t){this.subscribers.push(t)}},{key:"pub",value:function(e){for(var t=0;t<this.subscribers.length;t++)this.subscribers[t](e)}}]),e}(),ps=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;r(this,e),this.totalSources=n.length,this.audioSources={},this.elementsByMCID={};for(var s=function(e){var r=n[e],s={mcid:r.mcid||Ei(),id:r.id,src:r.src,classes:r.classes||[],base64:r.base64||!1,pubSub:new cs,soundLoaded:!1,startValues:r.startValues||{}};if(t.audioSources[s.id]=s,t.elementsByMCID[s.mcid]=s,r.base64)li.decodeAudioData(us(r.src),(function(e){t._setBuffer(s,e,i)}));else{var a=new XMLHttpRequest;a.open("GET",s.src,!0),a.responseType="arraybuffer",t.soundLoaded=!1,a.onload=function(){li.decodeAudioData(a.response,(function(e){t._setBuffer(s,e,i)}),t.onError)},a.send()}},a=0;a<n.length;a++)s(a);this.context={document,window,rootElement:document.body,unmount:function(){},masterNode:i,audioContext:li,getElements:this.getElements.bind(this),getMCID:this.getMCID.bind(this),setMCID:this.setMCID.bind(this),getElementSelectorByMCID:this.getElementSelectorByMCID.bind(this),getElementByMCID:this.getElementByMCID.bind(this)}}return a(e,[{key:"_setBuffer",value:function(e,t,n){e.soundLoaded=!0,e.buffer=t,e.audioNodeSet=new os,e.audioNodeSet.connect(n.input),e.pubSub.pub()}},{key:"getElementByMCID",value:function(e){return mi(this.elementsByMCID,e)?this.elementsByMCID[e]:null}},{key:"getElements",value:function(e){if("~"!==e.charAt(0)){if(ls.exec(e)){var t=e.split('"')[1];return this.elementsByMCID[t]}return[]}if("#"===(e=e.substr(1)).charAt(0))return mi(this.audioSources,e.substr(1))?[this.audioSources[e.substr(1)]]:[];if("."===e.charAt(0)){var n=e.substr(1),i=[];for(var r in this.audioSources)r.classes.indexOf(n)>=0&&i.push(r);return i}}},{key:"getMCID",value:function(e){return e.mcid}},{key:"setMCID",value:function(e,t){e.mcid=t}},{key:"getElementSelectorByMCID",value:function(e){return'[data-mcid="'.concat(e,'"]')}}]),e}(),ds=function(e){u(i,e);var t=h(i);function i(e,s){var a;r(this,i),(a=t.call(this,e,s)).audioNodeSet=new os,a.audioNodeSet.connect(li.destination);var o=new ps(a.props.audioSources,a.audioNodeSet);return a.ownContext=n(n({},o.context),{},{isHostedClip:!0,initParams:s.initParams}),a.audioClip=!0,a}return a(i,[{key:"handleRecalcDuration",value:function(e,t){f(l(i.prototype),"handleRecalcDuration",this).call(this,e,t)&&this.putMessageOnPipe("recalcDuration",{},"Groups",{selfExecute:!1,direction:Vi})}},{key:"onProgress",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=this.delay+this.calculatedDuration+this.hiatus,a=0===s?0:t%s;0!==t&&0===a&&(a=this.delay+this.calculatedDuration);var o=a-this.delay;if(!(o<0)){o>this.calculatedDuration&&(o=this.calculatedDuration);var u=0===this.calculatedDuration?0:o/this.calculatedDuration;f(l(i.prototype),"onProgress",this).call(this,u,o,this.id,r)}}},{key:"_onGetContextOnce",value:function(e){this.audioNodeSet.disconnect(),this.parentClipContext=e,this.audioNodeSet.connect(e.masterNode.input)}},{key:"lastWish",value:function(){this.audioNodeSet.output.disconnect(),this.audioNodeSet.output.connect(li.destination)}},{key:"volume",get:function(){return this.audioNodeSet.output.gain.value}},{key:"setVolume",value:function(e){this.audioNodeSet.output.gain.value=e}}]),i}(es),hs=function(e){u(s,e);var t=h(s);function s(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,s),e=t.call(this);var o=n({},a);if(!di(o))return Ai.error("HTMLFragmentContextHandler expects an object on its constructor. ".concat(i(o)," passed")),d(e,!1);mi(o,"html")||(o.html=""),e.isDOM=!0;var u=document.createDocumentFragment(),l=document.createElement("div");return mi(o,"containerParams")&&(mi(o,"width")&&(l.style.width=o.containerParams.width),mi(o,"height")&&(l.style.height=o.containerParams.height)),l.innerHTML=ns(o.html,o.initParams,!0),u.appendChild(l),l.style.overflow="hidden",e.rootElement=l,e.context={document,window,clipContainer:e.rootElement,rootElement:l,unmount:function(){o.host.removeChild(u)},getElements:e.getElements.bind(p(e)),getMCID:e.getMCID.bind(p(e)),setMCID:e.setMCID.bind(p(e)),getElementSelectorByMCID:e.getElementSelectorByMCID.bind(p(e)),getElementByMCID:e.getElementByMCID.bind(p(e)),setCustomEntity:e.setCustomEntity.bind(p(e)),fragment:!0},e.elementsByMCID={},e}return s}(ts),ms=function(e){u(i,e);var t=h(i);function i(){var e,s,a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=arguments.length>2?arguments[2]:void 0;r(this,i),null===u?(s={},a=o):(s=o,a=u),e=t.call(this,s,a,l);var c=new hs(n(n({},a),{},{html:mi(a,"html")?a.html:e.html,css:mi(a,"css")?a.css:e.css,fonts:mi(a,"fonts")?a.fonts:e.fonts}));return e.ownContext=n(n({},c.context),{},{isHostedClip:!1}),e.iframe=c.iframeElement,e.forceExportIncidents=!0,e.onDOMCLipInitialise(),e}return a(i,[{key:"exportConstructionArguments",value:function(){return{attrs:this.attrs,props:n(n({},this.props),{},{html:this.context.rootElement.innerHTML})}}},{key:"onDOMCLipInitialise",value:function(){}},{key:"rootElement",get:function(){return this.context.clipContainer}}]),i}(es),fs=function(){function e(){r(this,e),this.isNullClip=!0}return a(e,[{key:"duration",get:function(){return 0}},{key:"addIncident",value:function(){return{result:!0,execute:function(){}}}},{key:"moveIncident",value:function(){return{result:!0,execute:function(){}}}},{key:"removeIncident",value:function(){return{result:!0,execute:function(){}}}},{key:"resizeIncident",value:function(){return{result:!0,execute:function(){}}}},{key:"getIncidentsByChannel",value:function(){return{}}},{key:"flash",value:function(){}},{key:"_resize",value:function(){}},{key:"onProgress",value:function(){}}]),e}(),vs=function(){function e(t){r(this,e),this.runTimeInfo={currentMillisecond:0,state:"transitional"},this.id=Ei(),this.realClip=t.descriptiveIncident.realClip;var i=t.descriptiveIncident.realClip.exportConstructionArguments(),s=n(n({},i.props),{},{selector:void 0,host:t.host,id:this.id});this.ownClip=new t.descriptiveIncident.constructor.Incident(i.attrs,s),t.descriptiveIncident.realClip.addContext({clipId:this.id,context:this.ownClip.context,synchronize:t.synchronize,runTimeInfo:this.runTimeInfo},!0)}return a(e,[{key:"onProgress",value:function(e,t){for(var n in this.realClip.instantiatedChannels)this.realClip.instantiatedChannels[n].moveTo(this.runTimeInfo.currentMillisecond,t,this.id,!0);this.runTimeInfo.currentMillisecond=t}}]),e}(),gs=function(e){u(n,e);var t=h(n);function n(e,i){var s;return r(this,n),(s=t.call(this,e,i)).runTimeInfo={currentMillisecond:0,state:"idle"},s.listeners={},s.previousTimeStamp=-1,s.speed=1,s}return a(n,[{key:"_setState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e!==this.runTimeInfo.state)for(var n in this.runTimeInfo.state=e,this.putMessageOnPipe("setState",{newState:e,options:t},"Clips",{selfExecute:!1,direction:ji}),this.listeners)this.listeners[n].funct(this.runTimeInfo.currentMillisecond,e,t)}},{key:"handleSetState",value:function(e,t){this._setState(t.newState,t.options||{})}},{key:"play",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if("idle"===this.runTimeInfo.state||"paused"===this.runTimeInfo.state||"armed"===this.runTimeInfo.state||"transitional"===this.runTimeInfo.state||"blocked"===this.runTimeInfo.state){if("paused"===this.runTimeInfo.state){var n=(new Date).getTime()-this.pauseMoment;this.previousTimeStamp+=n}this._setState("playing"),this.onPlay(),t||window.requestAnimationFrame((function(t){e.step(t)}))}}},{key:"pause",value:function(){"playing"===this.runTimeInfo.state&&(this._setState("paused"),this.pauseMoment=(new Date).getTime(),this.onWait())}},{key:"arm",value:function(){"transitional"!==this.runTimeInfo.state&&"blocked"!==this.runTimeInfo.state||this._setState("armed")}},{key:"complete",value:function(){this._setState("idle"),this.previousTimeStamp=-1}},{key:"stop",value:function(){this._setState("transitional"),this.previousTimeStamp=-1}},{key:"block",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};mi(e,"exception")&&"playing"!==this.runTimeInfo.state||(this._setState("blocked",e),this.previousTimeStamp=-1)}},{key:"onPlay",value:function(){}},{key:"onWait",value:function(){}},{key:"playableProgress",value:function(e,t){if(this.isTheRootClip){for(var n in this.listeners){var i=this.listeners[n];!0!==i.onlyOnStateChange&&(Math.abs(t+i.cavaDelta-this.runTimeInfo.currentMillisecond)>i.threshold?(i.funct(wi(t,i.roundTo),this.runTimeInfo.state),i.cavaDelta=0):i.cavaDelta+=Math.abs(t-this.runTimeInfo.currentMillisecond))}return this.onProgress(e,t),this.runTimeInfo.currentMillisecond=t,!0}return!1}},{key:"executionSpeed",set:function(e){this.isTheRootClip&&(this.speed=parseFloat(e))}},{key:"step",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("playing"===this.runTimeInfo.state){var n=this;-1===this.previousTimeStamp&&(this.previousTimeStamp=e);var i={milliseconds:Math.round(this.runTimeInfo.currentMillisecond+(e-this.previousTimeStamp)*this.speed),fraction:(this.runTimeInfo.currentMillisecond+(e-this.previousTimeStamp)*this.speed)/this.duration};if(i.fraction>=1)return this.playableProgress(1,this.duration),void this.complete();if(i.fraction<0)return this.playableProgress(0,0),void this.complete();this.playableProgress(i.fraction,i.milliseconds),this.previousTimeStamp=e,t||window.requestAnimationFrame(n.step.bind(n))}}},{key:"subscribe",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n||(n=0),i||(i=1),this.listeners[e]={funct:t,threshold:n,roundTo:i,cavaDelta:0,onlyOnStateChange:r}}},{key:"unsubscribe",value:function(e){mi(this.listeners,e)&&delete this.listeners[e]}},{key:"subscribeToDurationChange",value:function(e){return!!this.isTheRootClip&&(this.realClip.subscribeToDurationChange(e),!0)}}]),n}(Ur);function ys(){return{result:!0}}function bs(e,t){return new Proxy(e,{get:function(e,n){return hi(e[n])?ys:"nonBlockingErrorClip"===n||("errors"===n?t:e[n])}})}var xs=P(null,(function(e,t){var i=function(t){u(s,t);var i=h(s);function s(t){var a,o,u,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(r(this,s),null===l?(o={},u=t):(o=t,u=l),a=i.call(this,o,u),e(p(a)),a.mustHaveNullClip=!1,a.initParams=u.initParams||{},mi(u,"initParamsValidationRules")){var c=Ti(u.initParamsValidationRules,a.initParams,"Error on initParams validation");if(!c.result)return Ai.error("Clip initParams validation failed. Switching to non-blocking blank Clip"),d(a,bs(p(a),c.errors))}var h=Oi({props:a.props},Tr,a.constructor,a.id);if(!h.result)return d(a,h);a.attributesStaggers=[],a.propsStaggers=[];var m=a.setupDynamicValues();a.isTheRootClip=!1,a.isExportableToJSONFormat=!0,a.volumeChangeSubsribers={},mi(u,"html")&&hi(u.html)&&(a.isExportableToJSONFormat=!1);var f={id:a.id,attrs:o,props:n(n({},u),{},{html:mi(u,"html")?u.html:a.html,css:mi(u,"css")?u.css:a.css,fonts:mi(u,"fonts")?u.fonts:a.fonts,runTimeInfo:a.runTimeInfo,subscribe:a.subscribe.bind(p(a)),repeats:1,delay:0,hiatus:0}),plugin_npm_name:a.constructor.plugin_npm_name,Channel:a.constructor.Channel,DescriptiveIncident:p(a)};if(a.audio="on",mi(n({},a.constructor),"audio")&&(a.audio=a.constructor.audio),mi(u,"audio")&&(a.audio=u.audio),mi(u,"selector")&&void 0!==u.selector&&!0!==a.constructor.customClip)f.Incident=ms;else if(mi(u,"selector")&&void 0!==u.selector&&!0===a.constructor.customClip){delete f.props.selector;var v=new ms({html:'<div id="clip-container"></div>'});f.props.host=v.rootElement,f.Incident=a.constructor.Incident}else"only"===a.audio&&!0!==a.props.root?a.isTheRootClip=!1:(a.isTheRootClip=!0,a.blockingWaitings={},f.Incident=a.constructor.Incident);if("on"===a.audio||"only"===a.audio){var g={id:a.id,attrs:{},props:{audioSources:mi(u,"audioSources")?u.audioSources:a.audioSources,runTimeInfo:a.runTimeInfo,subscribe:a.subscribe.bind(p(a)),hiatus:a.hiatus,delay:a.delay,repeats:a.repeats,initParams:a.initParams},plugin_npm_name:a.constructor.plugin_npm_name,Channel:a.constructor.Channel,Incident:ds,DescriptiveIncident:p(a)};a.audioClip=ar(g)}else a.audio="off",a.audioClip=new fs;return"on"===a.audio||"off"===a.audio?mi(m.attrs,"expression")||mi(m.props,"expression")?(a.mustHaveNullClip=!0,a.realClip=new fs):a.realClip=ar(f,!0):a.realClip=new fs,a.dynamicDurationValue=null,a.passiveAddition=!0,a._buildTree(),a.passiveAddition=!1,a.constructor.isAnimation&&mi(a.props,"duration")&&a.resize(a.duration),a}return s}(t);return{F:i,d:[{kind:"field",static:!0,key:"isClip",value:function(){return!0}},{kind:"field",static:!0,key:"Incident",value:function(){return as}},{kind:"field",static:!0,key:"plugin_npm_name",value:function(){return"@donkeyclip/self-contained-incidents"}},{kind:"field",static:!0,key:"version",value:function(){return hr}},{kind:"field",static:!0,key:"Channel",value:function(){return Ui}},{kind:"field",static:!0,key:"ClassName",value:function(){return"HTMLClip"}},{kind:"field",static:!0,key:"propsValidationRules",value:function(){return Tr}},{kind:"get",key:"selectorToPassToChildren",value:function(){return null}},{kind:"get",key:"inheritedSelector",value:function(){return this._inheritedSelector}},{kind:"set",key:"inheritedSelector",value:function(e){this._inheritedSelector=e}},{kind:"get",key:"html",value:function(){return""}},{kind:"get",key:"css",value:function(){return""}},{kind:"get",key:"fonts",value:function(){return[]}},{kind:"get",key:"audioSources",value:function(){return[]}},{kind:"method",decorators:[Gr],key:"setupDynamicValues",value:function(){}},{kind:"method",key:"detachFromParent",value:function(){f(l(i.prototype),"detachFromParent",this).call(this),this.mustHaveNullClip&&(this.realClip=new fs)}},{kind:"get",key:"duration",value:function(){return null!==this.dynamicDurationValue?this.dynamicDurationValue:this.propsStaggers.length>0?"dynamic":mi(this.props,"duration")?this.repeats*(this.delay+this.props.duration+this.hiatus):f(l(i.prototype),"duration",this)}},{kind:"set",key:"duration",value:function(e){if(0!=this.propsStaggers.length){for(var t=0;t<this.propsStaggers.length;t++)if("repeats"!==this.propsStaggers[t].path){var n=this.propsStaggers[t].stagger.resize(e/this.duration);Mi(this.props,this.propsStaggers[t].path,n)}this.dynamicDurationValue=e}else g(l(i.prototype),"duration",e,this,!0)}},{kind:"method",key:"systoleDiastole",value:function(e){this.constructor.isAnimation&&(this.props.duration?this.props.duration*=e:this.props.duration=e*this.calculatedDuration),this.realClip._resize(e),f(l(i.prototype),"systoleDiastole",this).call(this,e)}},{kind:"method",key:"exportLiveDefinition",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=f(l(i.prototype),"exportLiveDefinition",this).call(this,e);return this.constructor.isAnimation&&(t.props.duration=this.props.duration?this.props.duration:this.calculatedDuration),hi(this.props.html)&&(t.props.html=this.props.html),hi(this.props.css)&&(t.props.css=this.props.css),t}},{kind:"method",key:"_buildTree",value:function(){void 0!==this.realClip&&this.buildTree()}},{kind:"method",key:"resize",value:function(e){if("dynamic"===this.duration)return{result:!1,reason:"Incidents with dynamic duration can't be resized. Once the Incident enters a Clip it'll become resizable"};var t=e/this.duration;return this.realClip._resize(t),this.audioClip._resize(t),this.duration=e,this.constructor.isAnimation&&(this.props.duration?this.props.duration*=t:this.props.duration=this.calculatedDuration),this.putMessageOnPipe("recalcDuration",{},"Groups",{selfExecute:!1,direction:Vi}),this.putMessageOnPipe("flash",{},"RootClip",{selfExecute:!0,direction:Vi}),{result:!0}}},{kind:"method",key:"manageEditAttrProps",value:function(e,t){return{result:!1,errors:["Clips attributes and properties can not be edited"]}}},{kind:"method",key:"handleCheckForClip",value:function(e,t){return!0}},{kind:"method",key:"handleGetElements",value:function(e,t){return this.realClip.getElements(t.selector)}},{kind:"method",key:"handleCheckAddition",value:function(e,t){var n=this.realClip.addIncident(t),i=this.audioClip.addIncident(t);return!0===n.result&&!0===i.result?(n.execute(),i.execute(),this.putMessageOnPipe("flash",{},"RootClip",{selfExecute:!0,direction:Vi}),{result:!0}):n}},{kind:"method",key:"handleCheckMove",value:function(e,t){var n=this.realClip.moveIncident(t),i=this.audioClip.moveIncident(t);return!0===n.result&&!0===i.result?(n.execute(),i.execute(),this.putMessageOnPipe("flash",{},"RootClip",{selfExecute:!0,direction:Vi}),{result:!0}):n}},{kind:"method",key:"handleCheckDeletion",value:function(e,t){var n=this.realClip.removeIncident(t),i=this.audioClip.removeIncident(t);return!0===n.result&&!0===i.result?(n.execute(),i.execute(),this.putMessageOnPipe("flash",{},"RootClip",{selfExecute:!0,direction:Vi}),{result:!0}):n}},{kind:"method",key:"handleCheckResize",value:function(e,t){var n=this.realClip.resizeIncident(t),i=this.audioClip.resizeIncident(t);return!0===n.result&&!0===i.result?(n.execute(),i.execute(),this.putMessageOnPipe("flash",{},"RootClip",{selfExecute:!0,direction:Vi}),{result:!0}):n}},{kind:"method",key:"handleFlash",value:function(e,t){if(!this.isTheRootClip)return this.bypass();this.flash()}},{kind:"method",key:"exportDefinition",value:function(){var e=f(l(i.prototype),"exportDefinition",this).call(this);return this.constructor.isAnimation&&(e.props.duration=this.props.duration?this.props.duration:this.calculatedDuration),e}},{kind:"method",key:"handleSetBlock",value:function(e,t){if(!this.isTheRootClip)return this.bypass();if("transitional"!==this.runTimeInfo.state){"blocked"!==this.runTimeInfo.state&&(this.statusBeforeBlock=this.runTimeInfo.state),this.blockingWaitings[t.id]=t;var n={};t.options.exceptional&&(n.exception=t.incidentId),this.block(n)}}},{kind:"method",key:"handleUnBlock",value:function(e,t){if(!this.isTheRootClip)return this.bypass();mi(this.blockingWaitings,t.id)&&(delete this.blockingWaitings[t.id],0===Object.keys(this.blockingWaitings).length&&("playing"===this.statusBeforeBlock?(this.previousTimeStamp=-1,this.play()):this.arm()))}},{kind:"method",key:"stop",value:function(){f(l(i.prototype),"stop",this).call(this),this.blockingWaitings={}}},{kind:"method",key:"onProgress",value:function(e,t){this.realClip.onProgress(e,t),this.audioClip.onProgress(e,t)}},{kind:"method",key:"paste",value:function(e){return this.isTheRootClip?new vs({host:e,descriptiveIncident:this}):null}},{kind:"method",key:"flash",value:function(){this.realClip.flash()}},{kind:"get",key:"volume",value:function(){return"off"===this.audio?0:this.audioClip.volume}},{kind:"method",key:"setVolume",value:function(e){if(e<0||e>1)return{result:!1,errors:[{type:"invalid volume number"}]};if("off"===this.audio)return{result:!1,errors:[{type:"can not set volume of Clip with audio off"}]};for(var t in this.audioClip.setVolume(e),this.volumeChangeSubsribers)this.volumeChangeSubsribers[t](e);return{result:!0}}},{kind:"method",key:"attachMediaElementSource",value:function(e){"off"!==this.audio&&this.audioClip.context.audioContext.createMediaElementSource(e).connect(this.audioClip.context.masterNode.input)}},{kind:"method",key:"volumeChangeSubscribe",value:function(e,t){return this.putMessageOnPipe("volumeChangeSubscribe",{type:"subscribe",id:e,funct:t},"RootClip",{selfExecute:!0,direction:Vi}).response}},{kind:"method",key:"volumeChangeUnsubscribe",value:function(e){return this.putMessageOnPipe("volumeChangeSubscribe",{type:"unsubscribe",id:e},"RootClip",{selfExecute:!0,direction:Vi}),0}},{kind:"method",key:"handleVolumeChangeSubscribe",value:function(e,t){if(!this.isTheRootClip)return this.bypass();switch(t.type){case"subscribe":return this.volumeChangeSubsribers[t.id]=t.funct,this.volume;case"unsubscribe":return delete this.volumeChangeSubsribers[t.id],0;default:return!1}}}]}}),gs),ks=function(e){u(n,e);var t=h(n);function n(e){var i,s,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r(this,n),null===a&&mi(e,"audioSources")?(i={},s=e):null===a?(i=e,s={}):(i=e,s=a),s.audio="only",t.call(this,i,s)}return n}(xs),ws=ui({incidents:{type:"array",items:{type:"object",props:{position:{type:"amount",integer:!0,min:0,optional:!1},attrs:{type:"object",optional:!1},props:{type:"object",optional:!1},incidentClass:{type:"any",optional:!1}}}}}),Cs="Combos don't allow external addition or manipulation to their Incidents";function Is(){return Ai.error(Cs),{result:!1,errors:[Cs]}}var Es=function(e){u(i,e);var t=h(i);function i(e,n){var s;r(this,i),o(p(s=t.call(this,e,n)),"addIncident",Is),o(p(s),"moveIncident",Is),o(p(s),"removeIncident",Is),o(p(s),"handleCheckAddition",Pi),o(p(s),"handleCheckMove",Pi),o(p(s),"handleCheckDeletion",Pi),o(p(s),"handleCheckResize",Pi),null!==s.incidents&&(s.attrs.incidents=s.incidents,s.attributesStaggers=[],s.propsStaggers=[],s.setupDynamicValues());var a=Oi(s.props,_r,s.constructor);if(!a.result)return d(s,a);var u=ws(s.attrs);if(u.length>0)return Ai.error("The provided attributes for Combo Incident are invalid"),d(s,{result:!1,errors:u});for(var l=[],c=0;c<s.attrs.length;c++){var h=s.attrs[c];if(null!==h.incidentClass.attrsValidationRules){var m=h.incidentClass.attrsValidationMethod(h.attrs);m.length>0&&l.concat(m.errors)}var f=Oi(h.props,h.incidentClass.propsValidationRules,h.incidentClass);f.result||l.concat(f.errors)}return l.length>0?d(s,{result:!1,errors:l}):(s.dynamicDurationValue=null,s)}return a(i,[{key:"incidents",get:function(){return null}},{key:"duration",get:function(){return null!==this.dynamicDurationValue?this.dynamicDurationValue:"dynamic"},set:function(e){g(l(i.prototype),"duration",e,this,!0)}},{key:"exportDefinition",value:function(){var e=n(n({},this.attrs),{},{incidents:function e(t){for(var i=[],r=0;r<t.length;r++){var s=t[r],a=s.attrs;"Combo"===s.incidentClass.ClassName&&(a=n(n({},a),{},{incidents:e(a.incidents)})),i.push({ClassName:s.incidentClass.ClassName||s.incidentClass.targetClass.ClassName,plugin_npm_name:s.incidentClass.plugin_npm_name||s.incidentClass.targetClass.plugin_npm_name,version:s.incidentClass.version||s.incidentClass.targetClass.version,attrs:a,props:JSON.parse(JSON.stringify(s.props)),position:s.position})}return i}(this.attrs.incidents)});return{ClassName:this.constructor.ClassName,version:this.constructor.version,plugin:this.constructor.plugin||this.constructor.plugin_npm_name,plugin_npm_name:this.constructor.plugin_npm_name,attrs:e,props:JSON.parse(JSON.stringify(this.props)),incidents:{},duration:this.duration}}},{key:"exportLiveDefinition",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.attrs;null!==this.incidents&&(t=n(n({},this.attrs),{},{incidents:void 0}));var i=JSON.parse(JSON.stringify(this.props));return e||delete i.id,{Class:this.constructor,attrs:t,props:i,incidents:{}}}}]),i}(Ur);o(Es,"isCombo",!0),o(Es,"ClassName","Combo"),o(Es,"attrsValidationRules",null),o(Es,"propsValidationRules",_r);var Ss="|||",Ps=function(e){u(n,e);var t=h(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).playingIncidentsIds=[],i.transitioned=!1,e.subscribe(Ei(),i._stateChange.bind(p(i)),0,1,!0),i}return a(n,[{key:"_stateChange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"paused"!==t&&"idle"!==t&&"blocked"!==t||(this._stopPlayingIncidents(n),this.transitioned=!0)}},{key:"_stopPlayingIncidents",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0;t<this.playingIncidentsIds.length;t++){var n=this.playingIncidentsIds[t].split(Ss);n[0].startsWith(e.exception)||this._incidentById(n[0]).stop(n[1])}this.playingIncidentsIds=[]}},{key:"moveTo",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("transitional"===this.runTimeInfo.state||i){this.transitioned=!0,this._stopPlayingIncidents();for(var r=0;r<this.incidents.length;r++){var s=this.incidents[r],a=s.id,o=s.millisecond,u=this._incidentById(a),l=void 0,c=void 0;t<o?(l=0,c=0):t>o+u.duration?(l=1,c=u.duration):l=(c=t-o)/u.duration,u.onProgress(l,c,n,!0)}}else{this.transitioned&&(e=0,this.transitioned=!1);for(var p=e>t,d=this.incidents,h=0;h<d.length;h++){var m=d[h],f=m.millisecond,v=this._incidentById(m.id),g=v.duration,y=f+g,b="".concat(m.id).concat(Ss).concat(n);if(y>e&&y<=t||p){v.stop(n);var x=this.playingIncidentsIds.indexOf(b);x>-1&&this.playingIncidentsIds.splice(x,1)}if(f>=(p?0:e)&&f<t&&y>t){var k=(t-f)/g>=1,w=k?1:(t-f)/g,C=k?g:t-f;v.play(w,C,n)&&this.playingIncidentsIds.push(b)}}this.runTimeInfo.currentMillisecond=t}}}]),n}(Ui),Ms=P(null,(function(e){return{F:function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;r(this,t),e(this),this.attrs=n,this.props=i,this.dna=s,this.context=s.context,this.mcid=s.mcid,this.id=i.id||Ei(),this.modelId=i.modelId,this.gotContext=!1,this.plugin_channel_class=Ps,this.mc_plugin_npm_name="motor-cortex-js-media-playback",mi(i,"plugin_channel_class")&&(this.plugin_channel_class=i.plugin_channel_class),mi(i,"mc_plugin_npm_name")&&(this.mc_plugin_npm_name=i.mc_plugin_npm_name),this.hasIncidents=!1,this.autoGenerated=!1,this.onInitialise(n,i)},d:[{kind:"get",key:"selector",value:function(){return this.props.selector}},{kind:"get",key:"element",value:function(){return this.context.getElementByMCID(this.mcid)}},{kind:"method",decorators:[ir],key:"getIncidentsByChannel",value:function(){}},{kind:"method",key:"_onGetContextOnce",value:function(){try{if(!0===this.context.fragment)return;this.gotContext||(this.onGetContext(),this.gotContext=!0)}catch(e){Ai.error(e),Ai.error(this.mcid)}}},{kind:"method",key:"onGetContext",value:function(){Ai.info('Overwritte the "onGetContext" method with the code you want to get executed',"info")}},{kind:"method",key:"lastWish",value:function(){}},{kind:"method",key:"onInitialise",value:function(){Ai.info('Overwritte the "onInialise" method with the code you want to get executed',"info")}},{kind:"method",key:"onProgress",value:function(e,t){}},{kind:"method",key:"play",value:function(e){return!0}},{kind:"method",key:"stop",value:function(){}},{kind:"method",decorators:[Hi],key:"setBlock",value:function(){}},{kind:"method",decorators:[Wi],key:"unblock",value:function(){}}]}})),As=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r(this,e),this.realArray=[],null!=t&&(this.realArray=t)}return a(e,[{key:"_hasOwnProperty",value:function(e){return mi(this.realArray,e)}},{key:"_get",value:function(e){return this.realArray[e]}},{key:"_set",value:function(e,t){this.realArray[e]=t}},{key:"_keys",value:function(){return Object.keys(this.realArray)}},{key:"_delete",value:function(e){return delete this.realArray[e]}},{key:"_export",value:function(){return this.realArray}}]),e}(),Os=function(){function e(t){r(this,e),this.originalArray=t,this.extraArray={},this.addedKeys=[],this.removedKeys=new Set}return a(e,[{key:"_hasOwnProperty",value:function(e){return mi(this.originalArray,e)||mi(this.extraArray,e)}},{key:"_get",value:function(e){return mi(this.extraArray,e)?this.extraArray[e]:mi(this.originalArray,e)?this.originalArray[e]:void 0}},{key:"_set",value:function(e,t){this.extraArray[e]=t,mi(this.originalArray,e)||this.addedKeys.push(e),this.removedKeys.delete(e)}},{key:"_keys",value:function(){var e=this,t=Object.keys(this.originalArray);return t.push.apply(t,b(this.addedKeys)),t.filter((function(t){return!e.removedKeys.has(t)}))}},{key:"_delete",value:function(e){var t=this.addedKeys.indexOf(e);return t>-1?(this.addedKeys.splice(t),delete this.extraArray[e]):(this.removedKeys.add(e),!0)}},{key:"_export",value:function(){for(var e in this.extraArray)this.originalArray[e]=this.extraArray[e];var t,n=E(this.removedKeys);try{for(n.s();!(t=n.n()).done;){var i=t.value;delete this.originalArray[i]}}catch(e){n.e(e)}finally{n.f()}return this.originalArray}}]),e}();function Ts(e,t,n,i){var r=!1;for(var s in t)mi(n,s)||(r=!0,i[s]=t[s]);return e.animatedAttributeValue=i,r}function Ds(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=e[i],a=t._get(s.id);a.setInitialValue(n,r);var o=Ts(a,a.initialValue,a.originalAnimatedAttributeValue,JSON.parse(JSON.stringify(a.animatedAttributeValue)));o&&(a.lastWish(),a.onGetContext()),o&&i<e.length-1&&Ds(e,t,a.animatedAttributeValue,i+1,!1)}var _s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.lanes={},t.lanes&&(this.lanes=t.lanes),this.comboAttributes={},null!=t.comboAttributes&&(this.comboAttributes=t.comboAttributes),this.belongingLaneKeysByAnimationId={},t.belongingLaneKeysByAnimationId&&(this.belongingLaneKeysByAnimationId=t.belongingLaneKeysByAnimationId),this.incidentsById=new As({}),t.incidentsById&&(this.incidentsById=t.incidentsById)}return a(e,[{key:"_resize",value:function(e){for(var t=Object.keys(this.lanes),n=0;n<t.length;n++)for(var i=t[n],r=this.lanes[i],s=0;s<r.length;s++)r[s].millisecond=r[s].millisecond*e}},{key:"createTestLanesSanbox",value:function(){var t={lanes:On(this.lanes),belongingLaneKeysByAnimationId:On(this.belongingLaneKeysByAnimationId),incidentsById:new Os(this.incidentsById._export())};return this.comboAttributes&&(t.comboAttributes=this.comboAttributes),new e(t)}},{key:"getLane",value:function(e,t){return this.lanes[Si(e,t)]}},{key:"applySandboxChanges",value:function(e){this.lanes=e.lanes.exportFlattened(),this.belongingLaneKeysByAnimationId=e.belongingLaneKeysByAnimationId.exportFlattened(),this.incidentsById=new As(e.incidentsById._export())}},{key:"laneExists",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Si(e,t);return!!this.lanes.hasOwnProperty(i)||(n&&this.lanes.setValue(i,[]),!1)}},{key:"getOverlappingAnims",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return Array.from(this.lanes[Si(t,n)]||[]).filter((function(t){var n=e.incident.duration;null!=s&&(n=s);var a=i.incidentsById._get(t.id).duration;return t.id!==e.incident.id&&!r.includes(t.id)&&(t.millisecond>=e.millisecond&&t.millisecond<n+e.millisecond||t.millisecond+a>e.millisecond&&t.millisecond+a<=n+e.millisecond||t.millisecond<e.millisecond&&t.millisecond+a>n+e.millisecond)}))}},{key:"addElementToLane",value:function(e,t,n,i){var r=this,s=[],a=Si(e,t);this.incidentsById._set(i.id,i);var o={millisecond:n,id:i.id};this.laneExists(e,t,!0),this.lanes.pushValue(a,o),this.lanes[a].sortBy("millisecond");var u=this.lanes[a],l=this.lanes[a].findIndex((function(e){return e.id===i.id}));return mi(i.id)||this.belongingLaneKeysByAnimationId.setValue(i.id,[]),this.belongingLaneKeysByAnimationId.pushValue(i.id,a),0===l?this.lanes[a].length>1?s.push((function(){i.setInitialValue(r.incidentsById._get(u[1].id).pureInitialValues)})):s.push((function(){i.setInitialValue()})):s.push((function(){i.setInitialValue(r.incidentsById._get(u[l-1].id).animatedAttributeValue)})),mi(this.comboAttributes,t)&&s.push((function(){return Ds(u,r.incidentsById,i.initialValue,l)})),l+1<u.length&&s.push((function(){r.incidentsById._get(u[l+1].id).setInitialValue(i.animatedAttributeValue),r.incidentsById._get(u[l+1].id).gotContext&&(r.incidentsById._get(u[l+1].id).lastWish(),r.incidentsById._get(u[l+1].id).onGetContext())})),s}},{key:"updateLane",value:function(e,t){for(var n=this,i={},r=0;r<e.length;r++)for(var s=this.belongingLaneKeysByAnimationId[e[r]],a=0;a<s.length;a++){var o=s[a];mi(i,o)||(i[o]={animations:[],lane:this.lanes[o],laneData:Ci(s[a])}),i[o].animations.push(e[r])}for(var u in i){var l=i[u],c=l.laneData,p=l.lane,d=l.animations,h=b(p);h.sort((function(e,t){return e.millisecond-t.millisecond}));for(var m=mi(this.comboAttributes,c.attribute),f=0;f<p.length;f++)d.includes(p[f].id)&&(p[f].millisecond+=t);p.sort((function(e,t){return e.millisecond-t.millisecond})),this.lanes[u]=p;for(var v=function(e){var t=d[e],i=h.findIndex((function(e){return e.id===t})),r=p.findIndex((function(e){return e.id===t}));if(i===r&&r<=1)return"continue";var s=n.incidentsById._get(p[r].id);if(i+1<p.length)if(0===i)if(m)Ds(p,n.incidentsById,s.pureInitialValues,0,!0);else{var a=n.incidentsById._get(h[1].id);a.setInitialValue(s.pureInitialValues),a.onGetContext()}else if(m){var o=r>i?i:r;Ds(p,n.incidentsById,n.incidentsById._get(h[i-1].id).animatedAttributeValue,o,!0)}else n.incidentsById._get(h[i+1].id).setInitialValue(n.incidentsById._get(h[i-1].id).animatedAttributeValue),n.incidentsById._get(h[i+1].id).onGetContext();if(0===r?m?Ds(p,n.incidentsById,n.incidentsById._get(h[0].id).pureInitialValues,r,!0):(s.setInitialValue(n.incidentsById._get(h[0].id).pureInitialValues),s.onGetContext()):m?Ds(p,n.incidentsById,n.incidentsById._get(p[r-1].id).animatedAttributeValue,r,!0):(s.setInitialValue(n.incidentsById._get(p[r-1].id).animatedAttributeValue),s.onGetContext()),r+1>=p.length)return"continue";if(m)return Ds(p,n.incidentsById,s.animatedAttributeValue,r+1,!0),"continue";var u=n.incidentsById._get(p[r+1].id);u.setInitialValue(s.animatedAttributeValue),u.onGetContext()},g=0;g<d.length;g++)v(g)}}},{key:"deleteAnimations",value:function(e){for(var t={},i=0;i<e.length;i++){for(var r=e[i],s=this.belongingLaneKeysByAnimationId[r],a=0;a<s.length;a++){for(var o=this.lanes[s[a]],u=-1,l=0;l<o.length;l++)if(o[l].id===r){u=l;break}for(var c=n({},o[u]),p=this.incidentsById._get(c.id),d=Ci(s[a]),h=[],m=0;m<o.length;m++)o[m].id!==r&&h.push(o[m]);if(this.lanes[s[a]]=h,0!==(o=this.lanes[s[a]]).length){t[s[a]]=Ci(s[a]);var f=this.incidentsById._get(c.id).pureInitialValues;if(!(u>=o.length||!1===f))if(mi(this.comboAttributes,d.attribute))Ds(o,this.incidentsById,f,u,!0);else{var v=this.incidentsById._get(o[u].id);v.setInitialValue(f),v.onGetContext()}}else p.onProgress(0,0),delete this.lanes[s[a]],mi(t,s[a])&&delete t[s[a]]}delete this.belongingLaneKeysByAnimationId[e[i]]}return t}},{key:"recalcScratchValues",value:function(e){for(var t=Object.keys(this.lanes),n=0;n<t.length;n++){var i=t[n],r=this.lanes[i];if(r.length>0){var s=this.incidentsById._get(r[0].id),a=s.getScratchValue(e),o=Ci(i);mi(this.comboAttributes,o.attribute)?Ds(r,this.incidentsById,a,0,!0):s.setInitialValue(a),s.lastWish(),s.onGetContext()}}}}]),e}(),Bs=function(e){u(i,e);var t=h(i);function i(e){var n;return r(this,i),(n=t.call(this,e)).comboAttributes={},n.fixedAttributeName="_",null!=e.comboAttributes&&(n.comboAttributes=e.comboAttributes),n.LanesHandler=new _s({comboAttributes:n.comboAttributes}),n}return a(i,[{key:"setComboAttributes",value:function(e){this.comboAttributes=e,this.LanesHandler=new _s({comboAttributes:this.comboAttributes})}},{key:"lanes",get:function(){return this.LanesHandler.lanes}},{key:"incidentsById",get:function(){return this.LanesHandler.incidentsById}},{key:"_resize",value:function(e){this.LanesHandler._resize(e)}},{key:"checkAddition",value:function(e){for(var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all-or-nothing",i=this.LanesHandler.createTestLanesSanbox(),r=[],s=[],a=[],o=function(n){var o=!1,u=e[n],l=u.incident,c=l.mcid,p=l.attribute||t.fixedAttributeName;i.laneExists(c,p),r.push({mcid:c,attribute:p});var d=i.getOverlappingAnims(u,c,p);if(d.length>0&&(o=!0,a.push({type:"unauthorised, overlapping incidents on the same element",meta:{element_mcid:c,attribute:p,incident:u,overlappingAnims:d}})),!o){var h=i.addElementToLane(c,p,u.millisecond,l);s.push((function(){for(var e=0;e<h.length;e++)h[e]();l._onGetContextOnce()}))}},u=0;u<e.length;u++)o(u);if(a.length>0&&"all-or-nothing"===n)return{result:!1,errors:a};var l=this.LanesHandler,c=function(){for(var e=0;e<r.length;e++){var t=Si(r[e].mcid,r[e].attribute),n=i.lanes[t].exportFlattened();n.sort((function(e,t){return e.millisecond-t.millisecond})),i.lanes.setValue(t,n)}for(var a=0;a<s.length;a++)s[a]();l.applySandboxChanges(i)};return{result:!0,errors:a,execute:c}}},{key:"checkEdit",value:function(e,t){for(var i=[],r=0;r<e.length;r++)i.push(e[r].id);for(var s=this.LanesHandler.createTestLanesSanbox(),a=[],o=0;o<e.length;o++)for(var u=e[o].incident.id,l=e[o].incident.mcid,c=e[o].incident.attribute||this.fixedAttributeName,p=s.getLane(l,c),d=0;d<p.length;d++)if(p[d].id===u){var h=n({},p[d]);h.millisecond+=t,h.incident=s.incidentsById._get(h.id);var m=s.getOverlappingAnims(h,l,c,i);m.length>0&&a.push({type:"anauthorised, overlapping animations on the same element",meta:{element_mcid:l,attribute:c,newAnimation:h,overlappingAnims:m}});break}if(a.length>0)return{result:!1,errors:a};var f=this;return{result:!0,execute:function(){f.LanesHandler.updateLane(i,t)}}}},{key:"checkResizedIncidents",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=[],r=0;r<e.length;r++)i.push(e[r].id);for(var s=this.LanesHandler.createTestLanesSanbox(),a=[],o=0;o<e.length;o++)for(var u=this.LanesHandler.incidentsById._get(e[o].id),l=u.mcid,c=u.attribute||this.fixedAttributeName,p=s.getLane(l,c),d={mcid:l,attribute:c},h=e[o].end-e[o].start,m=0;m<p.length;m++)if(p[m].id===e[o].id){if(!t){var f=n({},p[m]);f.millisecond+=e[o].startDelta,f.incident=s.incidentsById._get(f.id);var v=s.getOverlappingAnims(f,d.mcid,d.attribute,i,h);v.length>0&&a.push({type:"unauthorized overlapping animations on the same element",meta:{element_mcid:d.mcid,attribute:d.attribute,newAnimation:f,overlappingAnims:v}})}break}if(a.length>0)return{result:!1,errors:a};var g=this,y=function(){for(var t=0;t<e.length;t++)g.LanesHandler.updateLane([e[t].id],e[t].startDelta)};return{execute:y,result:!0}}},{key:"checkDelete",value:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].id);var i=this;return{result:!0,execute:function(){i.LanesHandler.deleteAnimations(t)}}}},{key:"recalcScratchValues",value:function(e){this.LanesHandler.recalcScratchValues(e)}},{key:"slipIntoLaneForwards",value:function(e,t,n,i){var r=this,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=e.filter((function(e){var i=r.incidentsById._get(e.id).duration+e.millisecond;return i>=t&&i<=n||i>=n&&e.millisecond<=n}));if(0===a.length)return s&&0===t&&this.incidentsById._get(e[0].id).onProgress(0,0,i),!0;var o=a.length-1,u=this.incidentsById._get(a[o].id),l=a[o].millisecond,c=1,p=u.duration;u.duration+l>n&&(c=(p=n-l)/u.duration),u.onProgress(c,p,i)}},{key:"slipToLaneBackwards",value:function(e,t,n,i){var r=this,s=e.filter((function(e){var i=r.incidentsById._get(e.id).duration+e.millisecond;return i<=n&&i>=t||e.millisecond>=t&&e.millisecond<=n||e.millisecond<t&&i>n}));if(0===s.length)return!0;var a=this.incidentsById._get(s[0].id),o=s[0].millisecond,u=0,l=0;o<n&&(u=(n-o)/a.duration,l=n-o),a.onProgress(u,l,i)}},{key:"moveTo",value:function(e,t,n){for(var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=Object.keys(this.lanes),s=0;s<r.length;s++){var a=this.lanes[r[s]];e<=t?this.slipIntoLaneForwards(a,e,t,n,i):this.slipToLaneBackwards(a,e,t,n,i)}}}]),i}(qi);o(Bs,"type","attributes");var qs=P(null,(function(e,t){var n=function(t){u(i,t);var n=h(i);function i(t,s){var a;r(this,i),void 0===s&&(s=t,t={}),a=n.call(this,s),e(p(a));var o=Oi(s,Mr,a.constructor,a.id);return o.result?(a.inheritedSelector=null,a.attrs=t,mi(s,"duration")||(s.duration=0),a.props=s,a.attributesStaggers=[],a.propsStaggers=[],a.setupDynamicValues(),a.dynamicDurationValue=null,a.passive=!1,a):d(a,o)}return i}(t);return{F:n,d:[{kind:"field",static:!0,key:"Incident",value:function(){return rr}},{kind:"field",static:!0,key:"plugin_npm_name",value:function(){return"motor-cortex-js-attribute"}},{kind:"field",static:!0,key:"version",value:function(){return hr}},{kind:"field",static:!0,key:"Channel",value:function(){return Bs}},{kind:"field",static:!0,key:"ClassName",value:function(){return"Incident"}},{kind:"field",static:!0,key:"attrsValidationRules",value:function(){return null}},{kind:"field",static:!0,key:"propsValidationRules",value:function(){return Mr}},{kind:"method",decorators:[Vr],key:"editAttributes",value:function(){}},{kind:"method",decorators:[jr],key:"editProperties",value:function(){}},{kind:"method",decorators:[Nr],key:"resize",value:function(){}},{kind:"method",decorators:[Br],key:"clone",value:function(){}},{kind:"method",decorators:[Rr],key:"selector",value:function(){}},{kind:"method",decorators:[Lr],key:"getElements",value:function(){}},{kind:"method",decorators:[Gr],key:"setupDynamicValues",value:function(){}},{kind:"get",key:"duration",value:function(){return null!==this.dynamicDurationValue?this.dynamicDurationValue:this.propsStaggers.length>0?"dynamic":f(l(n.prototype),"duration",this)}},{kind:"set",key:"duration",value:function(e){if(this.propsStaggers.length>0){for(var t=0;t<this.propsStaggers.length;t++)if("repeats"!==this.propsStaggers[t].path){var i=this.propsStaggers[t].stagger.resize(e/this.duration);Mi(this.props,this.propsStaggers[t].path,i)}this.dynamicDurationValue=e}else g(l(n.prototype),"duration",e,this,!0)}},{kind:"method",key:"manageEditAttrProps",value:function(e,t){var n=this.parentNode,i=n.getLeafPosition(this.id);n.removeIncident(this.id);var r=JSON.parse(JSON.stringify(this[t]));this[t]=e;var s=n.addIncident(this,i);return s.result||(n.removeIncident(this.id),this[t]=r,n.addIncident(this,i)),s}},{kind:"method",key:"detachFromParent",value:function(){f(l(n.prototype),"detachFromParent",this).call(this),this.inheritedSelector=null}},{kind:"method",key:"handleCheckForInvalidSelectors",value:function(){var e=this.selector();return null===e?{id:this.id,ClassName:this.constructor.ClassName,plugin_npm_name:this.constructor.plugin_npm_name,error:"null selector"}:"&"===e.charAt(0)?{id:this.id,ClassName:this.constructor.ClassName,plugin_npm_name:this.constructor.plugin_npm_name,error:"relative selector with no inherited selector",selector:e}:this.bypass()}},{kind:"method",key:"exportDefinition",value:function(){return{ClassName:this.constructor.ClassName,version:this.constructor.version,plugin:this.constructor.plugin||this.constructor.plugin_npm_name,plugin_npm_name:this.constructor.plugin_npm_name,attrs:this.attrs,props:this.props}}},{kind:"method",key:"exportLiveDefinition",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=JSON.parse(JSON.stringify(this.props));return!1===e&&delete t.id,{Class:this.constructor,attrs:JSON.parse(JSON.stringify(this.attrs)),props:t}}}]}}),Ni);function Vs(e){if(mi(e,"default")&&(e=e.default),mi(e,"npm_name")||(e.npm_name="plugin_".concat((new Date).getTime())),!function(e){mi(e,"default")&&(e=e.default);var t=e.npm_name,n=!0;if(mi(e,"name")||Ai.notice("Notice on plugin ".concat(t,'. A plugin is always good to have its name on\n        its main.js file, under the key "name". It\'s missing from this plugin')),mi(e,"version")||Ai.notice("Notice on ".concat(t,". Plugin should always expose its version number on main.js file.\n      Plugin version is missing")),mi(e,"incidents")||mi(e,"Clip")||(Ai.error("Error on plugin ".concat(t,'. A plugin must expose at least one Incident or a Clip.\n        Exposed plugin Incidents should be defined on the "incidents" key of the main.js file while Clips on the "Clip".')),n=!1),mi(e,"incidents")&&!Array.isArray(e.incidents))Ai.error("Error on plugin ".concat(t,'. thePlugin exposed Incidents are defined on the "incidents" key of the main.js file in array format.\n        Please refer to the documentation')),n=!1;else if(mi(e,"incidents"))for(var i=0;i<e.incidents.length;i++){var r=e.incidents[i];di(r.exportable)&&mi(r.exportable,"default")&&(r.exportable=r.exportable.default);var s=r.exportable.prototype;s instanceof Ur||s instanceof xs||s instanceof rr||s instanceof Ms||(Ai.error("Error on plugin ".concat(t,". Exportable Incidents by any plugin must extend one of the base classes provided by MotorCortex.\n                ").concat(r.exportable.constructor.name," doesn't.\nPlease refer to documentation")),n=!1),s instanceof xs&&(mi(r,"originalDims")?!1===bi(r.originalDims).result&&(Ai.error("Error on plugin ".concat(t,". Invalid originalDims value passed on ").concat(r.name)),n=!1):Ai.log("Warning on plugin ".concat(t,'. It\'s always good to provide originalDims\nwhen exposing Incidents extending DOMClip. By defining their original dims the users\nof your plugin will be able to define the desired dimensions of your Incident by\nthe "containerParams object"'))),mi(r,"name")||(Ai.error("Error on plugin ".concat(t,'. Exportable Incidents by any plugin must have the "name" key which defines the name of the exported Incident.\nPlease refer to documentation')),n=!1)}return n}(e))return!1;var t={};if(mi(e,"Clip"))if(mi(e.Clip,"exportable")){var n,i,s,a=(i=n=function(e){u(n,e);var t=h(n);function n(){return r(this,n),t.apply(this,arguments)}return n}(xs),o(n,"Incident",e.Clip.exportable),o(n,"plugin",e.npm_name),o(n,"version",e.version||"*"),o(n,"audio",e.audio||"off"),o(n,"customClip",!0),i);mi(e.Clip,"attributesValidationRules")&&(s=ui(e.Clip.attributesValidationRules)),t.Clip=function t(n,i){r(this,t);var o,u=n,l=i;if(void 0===i&&(u={},l=n),mi(e.Clip,"attributesValidationRules")){var c=s(u);if(c.length>0){for(var p="Error on plugin's \"".concat(e.npm_name,'" Clip instantiation. Errors:'),d=0;d<c.length;d++)p+="\n - ".concat(c[d].message,". ").concat(c[d].actual," provided");return Ai.error(p),Ai.log("breaking"),{result:!1,errors:c}}Ai.log("instantiating"),(o=new a(u,l)).attrsValidationRules=e.Clip.attributesValidationRules,o.attrsValidationMethod=s}else Ai.log("instantiating"),(o=new a(u,l)).attrsValidationRules=null,Ai.warning("It's always good to provide attributesValidationRules to the exported incidents. ".concat(e.npm_name,".").concat(o.constructor.name," doesn't provide it"));return o}}else{var l,c,p=(c=l=function(e){u(n,e);var t=h(n);function n(){return r(this,n),t.apply(this,arguments)}return n}(xs),o(l,"Incident",e.Clip),o(l,"plugin",e.npm_name),o(l,"version",e.version||"*"),o(l,"audio",e.audio||"off"),o(l,"customClip",!0),c);Ai.warning("It's always good to provide attributesValidationRules to the exported incidents. ".concat(e.npm_name,".Clip doesn't provide it")),t.Clip=p}var d=Bs;if(mi(e,"compositeAttributes")&&(d=function(t){u(i,t);var n=h(i);function i(t){return r(this,i),t.comboAttributes=e.compositeAttributes,n.call(this,t)}return i}(Bs)),mi(e,"incidents"))for(var m=function(n){var i,s,a=e.incidents[n].exportable,l=null,c=null,p=!1;if(mi(e.incidents[n],"attributesValidationRules")){p=!0;var m=JSON.parse(JSON.stringify(e.incidents[n].attributesValidationRules));mi(e.incidents[n].attributesValidationRules,"animatedAttrs")&&(m.initialValues=(i=m.animatedAttrs,function e(t){if(pi(t)&&(t={type:t}),t.optional=!0,"object"===t.type)for(var n in t.props)e(t.props[n])}(s=JSON.parse(JSON.stringify(i))),s)),c=m,l=ui(m)}var f,v,g=void 0;if(a.prototype instanceof rr)v=f=function(e){u(n,e);var t=h(n);function n(){return r(this,n),t.apply(this,arguments)}return n}(qs),o(f,"Incident",a),o(f,"plugin_npm_name",e.npm_name),o(f,"plugin",e.npm_name),o(f,"version",e.version||"*"),o(f,"ClassName",e.incidents[n].name),o(f,"Channel",d),o(f,"audio",e.audio||"off"),o(f,"attrsValidationRules",c),o(f,"attrsValidationMethod",l),g=v;else if(a.prototype instanceof Ms){var y,b;b=y=function(e){u(n,e);var t=h(n);function n(){return r(this,n),t.apply(this,arguments)}return n}(qs),o(y,"Incident",a),o(y,"plugin_npm_name","@donkeyclip/media-playback"),o(y,"plugin",e.npm_name),o(y,"version",e.version||"*"),o(y,"ClassName",e.incidents[n].name),o(y,"Channel",Ps),o(y,"audio",e.audio?e.audio:"off"),o(y,"attrsValidationRules",c),o(y,"attrsValidationMethod",l),g=b}else if(a.prototype instanceof xs){var x,k;k=x=function(e){u(n,e);var t=h(n);function n(){return r(this,n),t.apply(this,arguments)}return n}(a),o(x,"plugin",e.npm_name),o(x,"version",e.version||"*"),o(x,"ClassName",e.incidents[n].name),o(x,"audio",e.audio?e.audio:"on"),o(x,"originalDims",bi(e.incidents[n].originalDims).analysis),o(x,"attrsValidationRules",c),o(x,"attrsValidationMethod",l),o(x,"isAnimation",!0),g=k}else if(a.prototype instanceof Ur){var w,C;C=w=function(e){u(n,e);var t=h(n);function n(){return r(this,n),t.apply(this,arguments)}return n}(a),o(w,"plugin",e.npm_name),o(w,"version",e.version||"*"),o(w,"ClassName",e.incidents[n].name),o(w,"attrsValidationRules",c),o(w,"attrsValidationMethod",l),g=C}Object.defineProperty(t,e.incidents[n].name,{enumerable:!0,get:function(){var t=function t(i,s){var a;if(r(this,t),p){var o=l(i);if(o.length>0){for(var u="Error on plugin's \"".concat(e.npm_name,'" "').concat(e.incidents[n].name,'" instantiation. Errors:'),c=0;c<o.length;c++)u+="\n - ".concat(o[c].message,". ").concat(o[c].actual," provided");return Ai.error(u),{result:!1,errors:o}}}return(a=new g(i,s)).result&&!p&&Ai.warning("It's always good to provide attributesValidationRules to the exported incidents. ".concat(e.npm_name," doesn't provide it")),a};return o(t,"targetClass",g),t}})},f=0;f<e.incidents.length;f++)m(f);return t}var js=Math.PI/180,Ls={transform:["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skewX","skewY"]},Ns=function(e){u(n,e);var t=h(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;return r(this,n),(e=t.call(this,i,s,a)).compoAttributes=Ls,e}return a(n,[{key:"getScratchValue",value:function(){var e=this.attributeKey;if("cssOffset"===e&&(e="offset"),"transform"!==e){var t=this.context.window.getComputedStyle(this.element)[e];return void 0!==t?t:0}for(var n,i={},r=this.compoAttributes[e],s=function(e,t){var n,i,r,s,a,o,u,l,c=e.getComputedStyle(t).transform;return""===c||"none"===c?{}:(n=c.split("(")[1].split(")")[0].split(","),i=Math.atan2(n[1],n[0]),r=Math.pow(n[0],2)+Math.pow(n[1],2),s=Math.pow(n[2],2)+Math.pow(n[3],2),a=Math.sqrt(r),o=(n[0]*n[3]-n[2]*n[1])/a,u=Math.atan2(n[0]*n[2]+n[1]*n[3],r),l=Math.atan2(n[1]*n[3]+n[0]*n[2],s),{rotate:"".concat(i/js,"deg"),scaleX:a,scaleY:o,skewX:"".concat(1===r?u/js:0,"deg"),skewY:"".concat(1===s?l/js:0,"deg"),translateX:"".concat(n[4],"px"),translateY:"".concat(n[5],"px")})}(this.context.window,this.element),a=this.context.window.getComputedStyle(this.element),o=0;o<r.length;o++)i[n=r[o]]=Object.prototype.hasOwnProperty.call(s,n)?s[n]:a[n];return i}}]),n}(rr),Rs=function(e){u(n,e);var t=h(n);function n(){return r(this,n),t.apply(this,arguments)}return a(n,[{key:"onGetContext",value:function(){var e,t,n,i,r;if(this.initialized=!1,this.options={},mi(this.compoAttributes,this.attributeKey)){var s,a=E(this.compoAttributes[this.attributeKey]);try{for(a.s();!(s=a.n()).done;){var o,u,l,c,p,d,h=s.value;hasOwnProperty.call(this.targetValue,h)&&(null!==(u=(o=this.options).transform)&&void 0!==u||(o.transform=["",""]),null!==(c=(l=this.options.transform)[0])&&void 0!==c||(l[0]=""),null!==(d=(p=this.options.transform)[1])&&void 0!==d||(p[1]=""),this.options.transform[0]+=" ".concat([h],"(").concat(this.initialValue[h]||0,")"),this.options.transform[1]+=" ".concat([h],"(").concat(this.targetValue[h],")"))}}catch(e){a.e(e)}finally{a.f()}}else this.options[this.attributeKey]=[this.initialValue,this.targetValue];null!==(t=(e=this.context).CSSAnimationLayer)&&void 0!==t||(e.CSSAnimationLayer={}),null!==(r=(n=this.context.CSSAnimationLayer)[i=this.element.dataset.motorcortex2Id])&&void 0!==r||(n[i]={})}},{key:"createAnimation",value:function(){this.creating=!0,this.animation&&(this.animation.startTime=this.context.window.document.timeline.currentTime-this.animation.currentTime*this.animation.playbackRate),this.animation=this.element.animate([o({},this.attributeKey,this.options[this.attributeKey][0]),o({},this.attributeKey,this.options[this.attributeKey][1])],{duration:this.props.duration,fill:"forwards",easing:"linear"}),this.animation.pause(),this.context.CSSAnimationLayer[this.element.dataset.motorcortex2Id][this.attributeKey]={start:this.options[this.attributeKey][0],end:this.options[this.attributeKey][1]},this.creating=!1}},{key:"checkAnimation",value:function(){var e=this.context.CSSAnimationLayer[this.element.dataset.motorcortex2Id][this.attributeKey]||{},t=e.start,n=e.end;t===this.options[this.attributeKey][0]&&n===this.options[this.attributeKey][1]&&this.animation||this.createAnimation()}},{key:"onProgress",value:function(e){this.creating||(this.checkAnimation(),this.animation.currentTime=this.props.duration*e)}}]),n}(Ns),Fs=["cm","mm","in","px","pt","pc","em","ex","ch","rem","vw","vh","vmin","vmax","%"],$s=["deg","rad","grad","turn"],zs="measurement",Hs="color",Ws=Vs({npm_name:"@donkeyclip/css-layer",incidents:[{exportable:Rs,name:"CSSEffect",attributesValidationRules:{animatedAttrs:{type:"object",props:{background:{optional:!0,type:Hs},backgroundColor:{optional:!0,type:Hs},backgroundPosition:{optional:!0,type:"string"},backgroundSize:{optional:!0,type:"string"},border:{optional:!0,type:"string"},borderBottom:{optional:!0,type:"string"},borderBottomColor:{optional:!0,type:Hs},borderBottomLeftRadius:{optional:!0,type:zs,units:Fs},borderBottomRightRadius:{optional:!0,type:zs,units:Fs},borderBottomWidth:{optional:!0,type:zs,units:Fs},borderColor:{optional:!0,type:Hs},borderEndEndRadius:{optional:!0,type:zs,units:Fs},borderEndStartRadius:{optional:!0,type:zs,units:Fs},borderImageOutset:{optional:!0,type:zs,units:Fs,min:0},borderImageSlice:{optional:!0,type:zs,units:Fs,min:0},borderImageWidth:{optional:!0,type:zs,units:Fs,min:0},borderLeft:{optional:!0,type:"string"},borderLeftColor:{optional:!0,type:Hs},borderLeftWidth:{optional:!0,type:zs,units:Fs},borderRadius:{optional:!0,type:zs,units:Fs},borderRight:{optional:!0,type:"string"},borderRightColor:{optional:!0,type:Hs},borderRightWidth:{optional:!0,type:zs,units:Fs},borderStartEndRadius:{optional:!0,type:zs,units:Fs},borderStartStartRadius:{optional:!0,type:zs,units:Fs},borderTop:{optional:!0,type:"string"},borderTopColor:{optional:!0,type:Hs},borderTopLeftRadius:{optional:!0,type:zs,units:Fs},borderTopRightRadius:{optional:!0,type:zs,units:Fs},borderTopWidth:{optional:!0,type:zs,units:Fs},borderWidth:{optional:!0,type:zs,units:Fs},bottom:{optional:!0,type:zs,units:Fs},boxShadow:{optional:!0,type:"string"},caretColor:{optional:!0,type:Hs},color:{optional:!0,type:Hs},columnCount:{optional:!0,type:"number",min:0,integer:!0},columnGap:{optional:!0,type:zs,units:Fs},columnRule:{optional:!0,type:"string"},columnRuleColor:{optional:!0,type:Hs},columnRuleWidth:{optional:!0,type:zs,units:Fs},columns:{optional:!0,type:"number",min:0,integer:!0},columnWidth:{optional:!0,type:zs,units:Fs},flex:{optional:!0,type:"number",min:0,integer:!0},flexBasis:{optional:!0,type:zs,units:Fs},flexGrow:{optional:!0,type:"number",min:0,integer:!0},flexShrink:{optional:!0,type:"number",min:0,integer:!0},font:{optional:!0,type:"string"},fontSize:{optional:!0,type:zs,units:Fs},fontSizeAdjust:{optional:!0,type:zs,units:Fs,min:0},fontStretch:{optional:!0,type:zs,units:["%"]},fontWeight:{optional:!0,type:"string"},gap:{optional:!0,type:zs,units:Fs},gridColumnGap:{optional:!0,type:zs,units:Fs},gridGap:{optional:!0,type:zs,units:Fs},gridRowGap:{optional:!0,type:zs,units:Fs},gridTemplateColumns:{optional:!0,type:zs,units:Fs},gridTemplateRows:{optional:!0,type:zs,units:Fs},height:{optional:!0,type:zs,units:Fs,min:0},inset:{optional:!0,type:zs,units:Fs,min:0},insetBlock:{optional:!0,type:zs,units:Fs},insetBlockEnd:{optional:!0,type:zs,units:Fs},insetBlockStart:{optional:!0,type:zs,units:Fs},insetInline:{optional:!0,type:zs,units:Fs},insetInlineEnd:{optional:!0,type:zs,units:Fs},insetInlineStart:{optional:!0,type:zs,units:Fs},left:{optional:!0,type:zs,units:Fs},letterSpacing:{optional:!0,type:zs,units:Fs},lineClamp:{optional:!0,type:"number",min:0,integer:!0},lineHeight:{optional:!0,type:zs,units:Fs,min:0},margin:{optional:!0,type:"string"},marginBottom:{optional:!0,type:zs,units:Fs},marginLeft:{optional:!0,type:zs,units:Fs},marginRight:{optional:!0,type:zs,units:Fs},marginTop:{optional:!0,type:zs,units:Fs},maskBorder:{optional:!0,type:zs,units:Fs,min:0},maskPosition:{optional:!0,type:"string"},maskSize:{optional:!0,type:"string"},maxHeight:{optional:!0,type:zs,units:Fs,min:0},maxWidth:{optional:!0,type:zs,units:Fs,min:0},objectPosition:{optional:!0,type:"string"},cssOffset:{optional:!0,type:"any"},offsetAnchor:{optional:!0,type:"string"},offsetDistance:{optional:!0,type:zs,units:Fs},offsetPath:{optional:!0,type:"string"},offsetPosition:{optional:!0,type:"string"},offsetRotate:{optional:!0,type:zs,units:$s},opacity:{optional:!0,type:"number",min:0,max:1},order:{optional:!0,type:"number",integer:!0},outline:{optional:!0,type:"string"},outlineColor:{optional:!0,type:Hs},outlineOffset:{optional:!0,type:zs,units:Fs},outlineRadius:{optional:!0,type:zs,units:Fs},outlineRadiusBottomleft:{optional:!0,type:zs,units:Fs},outlineRadiusBottomright:{optional:!0,type:zs,units:Fs},outlineRadiusTopleft:{optional:!0,type:zs,units:Fs},outlineRadiusTopright:{optional:!0,type:zs,units:Fs},outlineWidth:{optional:!0,type:zs,units:Fs},padding:{optional:!0,type:zs,units:Fs},paddingBottom:{optional:!0,type:zs,units:Fs},paddingLeft:{optional:!0,type:zs,units:Fs},paddingRight:{optional:!0,type:zs,units:Fs},paddingTop:{optional:!0,type:zs,units:Fs},perspective:{optional:!0,type:zs,units:Fs},perspectiveOrigin:{optional:!0,type:"string"},r:{optional:!0,type:"string"},right:{optional:!0,type:zs,units:Fs},rotate:{optional:!0,type:zs,units:$s},rowGap:{optional:!0,type:zs,units:Fs},scale:{optional:!0,type:"number",min:0},scrollbarColor:{optional:!0,type:Hs},scrollMargin:{optional:!0,type:zs,units:Fs},scrollMarginBlock:{optional:!0,type:zs,units:Fs},scrollMarginBlockEnd:{optional:!0,type:zs,units:Fs},scrollMarginBlockStart:{optional:!0,type:zs,units:Fs},scrollMarginBottom:{optional:!0,type:zs,units:Fs},scrollMarginInline:{optional:!0,type:zs,units:Fs},scrollMarginInlineEnd:{optional:!0,type:zs,units:Fs},scrollMarginInlineStart:{optional:!0,type:zs,units:Fs},scrollMarginLeft:{optional:!0,type:zs,units:Fs},scrollMarginRight:{optional:!0,type:zs,units:Fs},scrollMarginTop:{optional:!0,type:zs,units:Fs},scrollPadding:{optional:!0,type:zs,units:Fs},scrollPaddingBlock:{optional:!0,type:zs,units:Fs},scrollPaddingBlockEnd:{optional:!0,type:zs,units:Fs},scrollPaddingBlockStart:{optional:!0,type:zs,units:Fs},scrollPaddingBottom:{optional:!0,type:zs,units:Fs},scrollPaddingInline:{optional:!0,type:zs,units:Fs},scrollPaddingInlineEnd:{optional:!0,type:zs,units:Fs},scrollPaddingInlineStart:{optional:!0,type:zs,units:Fs},scrollPaddingLeft:{optional:!0,type:zs,units:Fs},scrollPaddingRight:{optional:!0,type:zs,units:Fs},scrollPaddingTop:{optional:!0,type:zs,units:Fs},scrollSnapCoordinate:{optional:!0,type:"string"},scrollSnapDestination:{optional:!0,type:zs,units:Fs},shapeImageThreshold:{optional:!0,type:"string"},shapeMargin:{optional:!0,type:zs,units:Fs},shapeOutside:{optional:!0,type:"string"},tabSize:{optional:!0,type:"string"},textDecoration:{optional:!0,type:"string"},textDecorationColor:{optional:!0,type:Hs},textDecorationThickness:{optional:!0,type:zs,units:Fs},textEmphasis:{optional:!0,type:"string"},textEmphasisColor:{optional:!0,type:Hs},textFillColor:{optional:!0,type:Hs},textIndent:{optional:!0,type:zs,units:Fs},textShadow:{optional:!0,type:"string"},textStroke:{optional:!0,type:"string"},textStrokeColor:{optional:!0,type:Hs},textUnderlineOffset:{optional:!0,type:zs,units:Fs},top:{optional:!0,type:zs,units:Fs},transform:{optional:!0,type:"object",props:{translateX:{type:zs,units:Fs,optional:!0},translateY:{type:zs,units:Fs,optional:!0},translateZ:{type:zs,units:Fs,optional:!0},rotate:{type:zs,units:$s,optional:!0},rotateX:{type:zs,units:$s,optional:!0},rotateY:{type:zs,units:$s,optional:!0},rotateZ:{type:zs,units:$s,optional:!0},scale:{type:"number",min:0,optional:!0},scaleX:{type:"number",min:0,optional:!0},scaleY:{type:"number",min:0,optional:!0},scaleZ:{type:"number",min:0,optional:!0},skewX:{type:zs,units:$s,optional:!0},skewY:{type:zs,units:$s,optional:!0},perspective:{type:zs,units:Fs,optional:!0}}},transformOrigin:{optional:!0,type:"string"},verticalAlign:{optional:!0,type:"string"},visibility:{optional:!0,type:"string"},width:{optional:!0,type:zs,units:Fs},wordSpacing:{optional:!0,type:zs,units:Fs},zIndex:{optional:!0,type:"number",integer:!0},zoom:{optional:!0,type:zs,units:["%"],min:0}},transformOrigin:{type:"string"},verticalAlign:{type:"string"},visibility:{type:"string"},width:{type:zs,units:Fs},wordSpacing:{type:zs,units:Fs},zIndex:{type:"number",integer:!0},zoom:{type:zs,units:["%"],min:0}}}}],compositeAttributes:Ls}),Gs=null;function Us(e){Gs=e}var Js=function e(t,n){r(this,e);var i=new Ws.CSSEffect(t,n);return!1===i.result||null!==Gs&&(i.constructor.Incident=Gs),i};o(Js,"targetClass",Ws.CSSEffect.targetClass);var Ks=function(){function e(t){if(r(this,e),!mi(t,"incident"))return Ai.error('Journey constructor expects an Incident on its properties on the key "incident"'),!1;this.memory=t.capsuleMemory,this.stations=[],this.incident=t.incident,this.startMillisecond=1*this.incident.runTimeInfo.currentMillisecond,this.startState="".concat(this.incident.runTimeInfo.state),this.incident.stop()}return a(e,[{key:"station",value:function(e){this.stations.length>0&&this.stations[this.stations.length-1],this.stations.push(e),this.incident.playableProgress(e/this.incident.duration,e)}},{key:"destination",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!=e?this.station(e):e=this.stations[this.stations.length-1],this.incident.playableProgress(e/this.incident.duration,e),"playing"===this.startState||"blocked"===this.startState&&"playing"===this.incident.statusBeforeBlock?this.incident.play():e>=this.incident.duration?this.incident.complete():this.incident.arm(),this.memory.push(this.exportJourneyLog)}},{key:"exportJourneyLog",value:function(){return{startMillisecond:this.startMillisecond,startState:this.startState,stations:this.stations}}}]),e}(),Xs=function(){function e(){r(this,e),this.memory=[]}return a(e,[{key:"startJourney",value:function(e){return e?new Ks({incident:e,capsuleMemory:this.memory}):(Ai.error("startJourney expects an Incident as an argument"),!1)}}]),e}(),Qs=function(e){u(n,e);var t=h(n);function n(){return r(this,n),t.apply(this,arguments)}return a(n,[{key:"onProgress",value:function(e){var t=this;if(!this.element.soundLoaded)return this.setBlock("loading sound"),this.element.pubSub.sub(this.id,(function(){t.unblock()})),!1;if("gain"===this.attributeKey){var n=(this.targetValue-this.initialValue)*e+this.initialValue;this.element.audioNodeSet.gainNode.gain.value=n}else if("pan"===this.attributeKey){var i=(this.targetValue-this.initialValue)*e+this.initialValue;this.element.audioNodeSet.pannerNode.pan.value=i}}},{key:"getScratchValue",value:function(){return"pan"===this.attributeKey?mi(this.element.startValues,"pan")?this.element.startValues.pan:0:"gain"===this.attributeKey?mi(this.element.startValues,"gain")?this.element.startValues.gain:1:void 0}}]),n}(rr),Ys=function(e){u(n,e);var t=h(n);function n(){return r(this,n),t.apply(this,arguments)}return a(n,[{key:"play",value:function(e){var t=this;if(!this.element.soundLoaded)return this.setBlock("loading sound"),this.element.pubSub.sub(this.id,(function(){t.unblock()})),!1;var n=0;return mi(this.props,"startFrom")&&(n=this.props.startFrom),this.audioNode=li.createBufferSource(),this.audioNode.buffer=this.element.buffer,this.audioNode.connect(this.element.audioNodeSet.input),this.audioNode.start(0,(e+n)/1e3),!0}},{key:"stop",value:function(){this.audioNode&&this.audioNode.stop()}}]),n}(Ms),Zs=function(e,t){return e.startsWith("on")&&"function"==typeof t},ea=function(e){return e.substr(2).toLowerCase()},ta=function(e){return"function"==typeof e};function na(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}function ia(e,t){if(!t)return e;for(var n=0,i=Object.entries(t);n<i.length;n++){var r=y(i[n],2),s=r[0],a=r[1];if(Zs(s))e.addEventListener(ea(s),a);else if("class"===s){var o,u=Array.isArray(a)?a:a.split(" ");(o=e.classList).add.apply(o,b(u))}else e.setAttribute(s,a)}return e}var ra=Vs,sa={easings:$n,clipFromDefinition:pr,createDOMElement:function(e,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];if(ta(e))return e(n(n({},t),{},{children:r}));for(var a=ia(document.createElement(e),t),o=r.flat(),u=0;u<o.length;u++){var l=o[u];if(!1!==l){var c=di(l)?l:na(l.toString());null!==c&&a.appendChild(c)}}return a.outerHTML}},aa=ra({npm_name:"@donkeyclip/motorcortex-soundsystem",name:"Internal MotorCortex Soundsystem",incidents:[{exportable:Ys,name:"AudioPlayback"},{exportable:Qs,name:"AudioEffect"}],Clip:{exportable:ds},audio:"only"}),oa=aa.AudioEffect,ua=aa.AudioPlayback,la=aa.Clip,ca=Us,pa={AudioClip:ks,AudioEffect:oa,AudioPlayback:ua,BrowserClip:as,Combo:Es,CoreAudioClip:la,CSSEffect:Js,Effect:rr,Group:Ur,HTMLClip:xs,MediaPlayback:Ms,TimeCapsule:Xs,loadPlugin:ra,setCSSCore:Us,utils:sa,version:hr};e.AudioClip=ks,e.AudioEffect=oa,e.AudioPlayback=ua,e.BrowserClip=as,e.CSSEffect=Js,e.Combo=Es,e.CoreAudioClip=la,e.Effect=rr,e.Group=Ur,e.HTMLClip=xs,e.MediaPlayback=Ms,e.TimeCapsule=Xs,e.default=pa,e.loadPlugin=ra,e.setCSSCore=ca,e.utils=sa,Object.defineProperty(e,"__esModule",{value:!0})}(t)},1560:(e,t,n)=>{"use strict";var i=n(2473),r=(n(3352),n(9217),n(2571),n(8217),n(5623),n(1514),n(2410),n(6056),n(3938),n(2077),n(911),n(266),n(5901),n(8010),n(3238),n(252),n(5849),n(4009),"--mc-player"),s=(n(2759),n(8237),n(4992),n(895),n(1203),n(5163),n(4890),"volume-change"),a="mute-change",o="speed-change",u="loop-change",l="scale-change",c="show-volume-change",p="state-change",d="duration-change",h="mouseup",m="mousedown",f="touchstart",v="mousemove",g="touchend",y="touchmove",b=n(8589),x=n.n(b),k=n(4021),w=n.n(k),C=n(7207),I=n.n(C),E=n(5295),S=n.n(E),P=n(4656),M=n.n(P),A=n(1683),O=n.n(A),T=n(3294),D=n.n(T),_=n(5341),B=n.n(_),q=n(6399),V=n.n(q),j=n(2167),L=n.n(j),N=n(921),R=n.n(N),F=n(4107),$=n.n(F);const z={play:x(),pause:w(),"expand-full":I(),"angle-left":S(),"angle-right":M(),settings:D(),loop:B(),"volume-on":V(),"volume-off":L(),"donkeyclip-logo":R(),spinner:$(),"check-solid":O()};function H(e){return document.getElementById(e)}function W(e,t){return e.getElementsByClassName(t)[0]}function G(e){return document.getElementsByTagName(e)}function U(e){return document.createElement(e)}function J(){var e;return(e=document).addEventListener.apply(e,arguments)}function K(){var e;return(e=document).removeEventListener.apply(e,arguments)}var X=new RegExp("^[+-]?([0-9]+([.][0-9]*)?|[.][0-9]+)","gi");function Q(e){var t,n=e.match(X)[0],i=e.substring(n.length);if("number"==typeof(t=Number(n))&&isFinite(t)&&("%"!==i||"px"!==i))return{number:Number(n),unit:i}}function Y(e,t){document.addEventListener(h,e,!1),document.addEventListener(g,e,!1),document.addEventListener(v,t,!1),document.addEventListener(y,t,!1)}function Z(e,t){document.removeEventListener(h,e,!1),document.removeEventListener(g,e,!1),document.removeEventListener(v,t,!1),document.removeEventListener(y,t,!1)}function ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.addEventListener(m,e,{passive:n},!1),t.addEventListener(f,e,{passive:n},!1)}function te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;t.removeEventListener(m,e,!1),t.removeEventListener(f,e,!1)}function ne(e,t,n){t&&(e.classList.remove("icon-".concat(t)),e.innerHTML=""),n&&(e.classList.add("icon-".concat(n)),e.innerHTML=z[n])}var ie=function(e){var t=e.clip.props.host;if(t.offsetWidth||(t.style.width=e.clip.props.containerParams.width),t.offsetHeight||(t.style.height=e.clip.props.containerParams.height),t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.overflow="hidden",e.clip.props.host.style.position="relative",e.clip.props.host.style.zIndex=0,e.elements.mcPlayer=U("div"),e.elements.mcPlayer.id="".concat(e.name),e.elements.mcPlayer.className="".concat(e.className),e.elements.mcPlayer.innerHTML='<div class="--mcp-background"></div> <div class="--mcp-context"> <div class="--mcp-pointer-events-panel"></div> <div class="--mcp-play-pause-panel"> <div class="--mcp-play-pause-panel-container"></div> </div> <div class="--mcp-listener-helper"></div> <div class="--mcp-controls"> <div class="--mcp-grad"></div> <div class="--mcp-progressbar"> <div class="--mcp-totalbar"> <div class="--mcp-loopbar"> <div class="--mcp-loopbar-color"></div> <div class="--mcp-loop-boundaries --mcp-loopbar-start"></div> <div class="--mcp-loop-boundaries --mcp-loopbar-end"></div> <div class="--mcp-runningbar"> <div class="--mcp-cursor"></div> </div> </div> </div> </div> <div class="--mcp-buttons"> <div class="--mcp-left-buttons"> <div class="--mcp-status"> <span class="--mcp-btn --mcp-status-btn icon-play"></span> <span class="--mcp-indicator">i</span> </div> <div class="--mcp-volume"> <div class="--mcp-btn --mcp-volume-btn icon-volume-on"></div> <div class="--mcp-volumebar"> <div class="--mcp-volumebar-color"> <div class="--mcp-volumebar-color-active"> <div class="--mcp-volume-cursor"></div> </div> </div> </div> </div> <div class="--mcp-time-display"> <span class="--mcp-time-current">00:00</span> <span class="--mcp-time-separator">/</span> <span class="--mcp-time-total">00:00</span> </div> </div> <div class="--mcp-right-buttons"> <div class="--mcp-loop-btn-container"> <div class="--mcp-btn --mcp-loop-btn icon-loop"></div> </div> <div class="--mcp-btn --mcp-settings-btn icon-settings"></div> <div class="--mcp-btn --mcp-dc-btn icon-donkeyclip-logo"></div> <div class="--mcp-btn --mcp-full-screen-btn icon-expand-full"></div> </div> </div> </div> <div class="--mcp-settings-panel"> <ul class="--mcp-main-settings"> <li class="--mcp-settings-pointer-events"> <p>Pointer events</p> <div> <div class="switch settings-switch"> <input class="--mcp-show-pointer-events-checkbox" type="checkbox"/> <span class="slider round"></span> </div> </div> </li> <li class="--mcp-settings-volume"> <p>Show volume</p> <div> <div class="switch settings-switch"> <input class="--mcp-show-volume-checkbox" type="checkbox"/> <span class="slider round"></span> </div> </div> </li> <li class="--mcp-settings-speed-show"> <p>Playback speed</p> <div> <span class="--mcp-speed-current"></span> <div class="--mcp-btn --mcp-speed-btn --mcp-speed-btn-show icon-angle-right"></div> </div> </li> </ul> <ul class="--mcp-speed-settings"> <li class="--mcp-settings-speed-hide"> <div class="--mcp-btn --mcp-speed-btn --mcp-speed-btn-hide icon-angle-left"></div> <p class="--mcp-speed-runtime">Playback speed</p> </li> <li class="--mcp-no-hover"> <ul class="--mcp-speed-values"></ul> </li> </ul> </div> </div> ',"string"==typeof e.options.host){var n=document.querySelectorAll(e.options.host);for(var i in n)isNaN(i)||n[i].appendChild(e.elements.mcPlayer)}else e.options.host.appendChild(e.elements.mcPlayer)},re=function(e){e.elements.volumeBarActive.style.width="".concat(100*e.settings.volume,"%"),e.elements.currentTime.innerHTML=e.timeFormat(0),e.elements.totalTime.innerHTML=e.timeFormat(e.clip.duration),e.elements.timeSeparator.innerHTML="/",e.elements.settingsPanel.classList.add("m-fadeOut","".concat(e.name,"-hide")),e.options.backgroundColor&&(e.elements.background.style.background=e.options.backgroundColor),"scroller"===e.options.type&&(window.document.body.style.overscrollBehaviorY="contain"),e.options.showIndicator?(e.elements.indicator.style.display=void 0,e.elements.statusButton.style.width="35px",e.elements.statusButton.style.height="20px",e.elements.statusButton.style.bottom="5px"):e.elements.indicator.style.display="none",e.elements.indicator.innerHTML=e.clip.runTimeInfo.state,e.elements.settingsSpeedPanel.style.display="none",e.elements.loopBarStart.style.left="0%",e.elements.loopBarStart.classList.add("m-fadeOut","".concat(e.name,"-hide")),e.elements.loopBarEnd.style.left="100%",e.elements.loopBarEnd.classList.add("m-fadeOut","".concat(e.name,"-hide")),e.elements.volumeCheckbox.checked=e.options.showVolume,e.elements.showPointerEventsCheckbox.checked=e.options.pointerEvents,e.options.pointerEvents?e.elements.pointerEventPanel.style.pointerEvents="none":e.elements.pointerEventPanel.style.pointerEvents="auto",e.options.showVolume||e.elements.volumeControl.classList.toggle("m-fadeOut")},se=function(e){var t=function(t){var n;if(0==e.options.speedValues[t])return"continue";var i="check-solid",r="--mcp-selected",s=U("li");s.className="--mcp-speed-value",s.dataset.speedValue=e.options.speedValues[t];var a=document.createElement("span");s.append(a);var o=U("p"),u=1==e.options.speedValues[t];o.innerHTML=u?"Normal":e.options.speedValues[t],o.dataset.zone=t,o.classList.add("--mcp-speed-value-item"),(null!==(n=e.options.speedValues[t]==e.options.speed)&&void 0!==n?n:e.clip.speed)&&(ne(a,null,i),o.classList.add(r)),s.append(o),e.elements.speedBar.append(s),s.onclick=function(){e.options.speed=e.options.speedValues[t],e.clip.speed=e.options.speedValues[t];var n=1==e.clip.speed;e.elements.speedCurrent.innerHTML=n?"Normal":e.clip.speed,ne(W(e.elements.mcPlayer,"icon-check-solid"),i),ne(a,null,i),W(e.elements.mcPlayer,r).classList.remove(r),o.classList.add(r)}};for(var n in e.options.speedValues)t(n)},ae=function(e){!1===e.options.buttons.fullScreen&&e.elements.fullScreenButton.remove(),!1===e.options.buttons.settings&&e.elements.settingsButton.remove(),e.options.buttons.donkeyclip||e.elements.donkeyclipButton.remove(),!1===e.options.buttons.loop&&e.elements.loopButton.remove()};n(5735);var oe="--mcp-force-show-controls",ue="playing",le="volume-off",ce="volume-on",pe=n(5432),de=setTimeout((function(){}),0);function he(e){var t=e.clip.props.host.className.includes("full-screen");e.clip.props.host!==e.options.host&&(t?e.options.host.appendChild(e.elements.mcPlayer):e.clip.props.host.appendChild(e.elements.mcPlayer)),t?e.exitFullscreen():e.launchIntoFullscreen(e.clip.props.host)}const me=function(e){window.addEventListener("wheel",(function(t){e.stepper(t.deltaY)}),{passive:!0}),window.addEventListener("touchmove",(function(t){var n,i=t.touches[0].clientY;null!==(n=e.lastY)&&void 0!==n||(e.lastY=i);var r=-(i-e.lastY);e.stepper(r),e.lastY=i}),{passive:!0}),window.addEventListener("touchend",(function(){e.lastY=null}),{passive:!0}),window.addEventListener("touchstart",(function(){e.cancelAnimation(),e.lastY=null}),{passive:!0})};function fe(e){e.settings.loopActivated=!e.settings.loopActivated,e.eventBroadcast(u,e.settings.loopActivated),e.elements.loopButton.classList.toggle("svg-selected"),e.elements.loopBarStart.classList.toggle("m-fadeOut"),e.elements.loopBarEnd.classList.toggle("m-fadeOut"),e.elements.loopBarStart.classList.toggle("m-fadeIn"),e.elements.loopBarStart.classList.toggle("".concat(e.name,"-hide")),e.elements.loopBarEnd.classList.toggle("m-fadeIn"),e.elements.loopBarEnd.classList.toggle("".concat(e.name,"-hide")),e.settings.needsUpdate=!0,e.settings.loopActivated||(e.elements.loopBar.style.left="0%",e.elements.loopBar.style.width="100%",e.settings.loopStartMillisecond=0,e.settings.loopEndMillisecond=e.clip.duration,e.settings.loopLastPositionXPxls=0,e.settings.loopLastPositionXPercentage=0,e.elements.runningBar.style.width=e.clip.runTimeInfo.currentMillisecond/e.clip.duration*100+"%")}var ve=function(e){e.elements.showPointerEventsCheckbox.checked?(e.elements.showPointerEventsCheckbox.checked=!1,e.elements.mcPlayer.style.pointerEvents="none",e.elements.pointerEventPanel.style.pointerEvents="auto",e.elements.controls.style.pointerEvents="auto",e.elements.settingsPanel.style.pointerEvents="auto"):(e.elements.showPointerEventsCheckbox.checked=!0,e.options.pointerEvents=!1,e.elements.mcPlayer.style.pointerEvents="none",e.elements.pointerEventPanel.style.pointerEvents="none",e.elements.controls.style.pointerEvents="auto",e.elements.settingsPanel.style.pointerEvents="auto"),e.eventBroadcast("show-pointer-events-change",e.elements.showPointerEventsCheckbox.checked)},ge=function(e){e.elements.volumeControl.classList.toggle("m-fadeOut"),e.elements.showVolumeCheckbox.checked?e.elements.showVolumeCheckbox.checked=!1:e.elements.showVolumeCheckbox.checked=!0,e.eventBroadcast(c,e.elements.showVolumeCheckbox.checked)};function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function be(e,t,n){var i=e.elements;void 0!==ye(n)&&(!1===n?(i.volumeBarActive.style.width="".concat(100*e.settings.volume,"%"),e.clip.setVolume(e.settings.previousVolume),e.settings.volumeMute=!1,ne(i.volumeBtn,le,ce)):!0===n&&(e.settings.volumeMute=!0,i.volumeBarActive.style.width="0%",e.clip.setVolume(0),ne(i.volumeBtn,ce,le)),e.options.muted=e.settings.volumeMute,e.eventBroadcast(a,e.settings.volumeMute)),void 0!==ye(t)&&(e.settings.volume=t,e.settings.volume>0&&(e.settings.previousVolume=t),i.volumeBarActive.style.width="".concat(100*e.settings.volume,"%"),e.clip.setVolume(e.settings.volume),e.settings.volume>0?(e.settings.volumeMute=!1,ne(i.volumeBtn,le,ce)):0===e.settings.volume&&(e.settings.volumeMute=!0,ne(i.volumeBtn,le,ce)),e.options.volume=e.settings.volume,e.eventBroadcast(s,e.settings.volume),e.eventBroadcast(a,e.settings.volumeMute))}function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){we(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ce(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n(2189),n(1047),n(5769),n(7460),n(4078);var Ie=new i.TimeCapsule,Ee=function(){function e(t){var n,i=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.options=this.initializeOptions(t),this.className=r,this.id=this.options.id,this.name=r,this.clip=t.clip,this.clipClass=t.clipClass,this.state=this.clip.runTimeInfo.state,this.listeners={},this.settings={volume:1,journey:null,previousVolume:1,volumeMute:!1,needsUpdate:!0,resizeLoop:!1,loopJourney:!1,loopActivated:!1,requestingLoop:!1,playAfterResize:!1,loopStartMillisecond:0,loopLastPositionXPxls:0,loopLastPositionXPercentage:0,loopEndMillisecond:this.clip.duration,controls:!0},function(e){e.elements={},ie(e);var t,n=e.elements.mcPlayer;e.elements.pointerEventPanel=W(n,"--mcp-pointer-events-panel"),e.elements.playPausePanel=W(n,"--mcp-play-pause-panel"),e.elements.playPausePanelContainer=W(n,"--mcp-play-pause-panel-container"),e.elements.listenerHelper=W(n,"--mcp-listener-helper"),e.elements.loopBar=W(n,"--mcp-loopbar"),e.elements.totalBar=W(n,"--mcp-totalbar"),e.elements.indicator=W(n,"--mcp-indicator"),e.elements.loopButton=W(n,"--mcp-loop-btn"),e.elements.volumeBar=W(n,"--mcp-volumebar"),e.elements.totalTime=W(n,"--mcp-time-total"),e.elements.volumeControl=W(n,"--mcp-volume"),e.elements.volumeBtn=W(n,"--mcp-volume-btn"),e.elements.runningBar=W(n,"--mcp-runningbar"),e.elements.loopBarEnd=W(n,"--mcp-loopbar-end"),e.elements.statusButton=W(n,"--mcp-status-btn"),e.elements.speedBar=W(n,"--mcp-speed-values"),e.elements.currentTime=W(n,"--mcp-time-current"),e.elements.timeDisplay=W(n,"--mcp-time-display"),e.elements.speedButtonShow=W(n,"--mcp-speed-btn-show"),e.elements.speedButtonHide=W(n,"--mcp-speed-btn-hide"),e.elements.speedCurrent=W(n,"--mcp-speed-current"),e.elements.loopBarStart=W(n,"--mcp-loopbar-start"),e.elements.volumeCursor=W(n,"--mcp-volume-cursor"),e.elements.settingsButton=W(n,"--mcp-settings-btn"),e.elements.donkeyclipButton=W(n,"--mcp-dc-btn"),e.elements.timeSeparator=W(n,"--mcp-time-separator"),e.elements.settingsPanel=W(n,"--mcp-settings-panel"),e.elements.background=W(n,"--mcp-background"),e.elements.settingsMainPanel=W(n,"--mcp-main-settings"),e.elements.fullScreenButton=W(n,"--mcp-full-screen-btn"),e.elements.volumeBarHelper=W(n,"--mcp-volumebar"),e.elements.volumeBarActive=W(n,"--mcp-volumebar-color-active"),e.elements.settingsSpeedPanel=W(n,"--mcp-speed-settings"),e.elements.settingsShowVolume=W(n,"--mcp-settings-volume"),e.elements.settingsPointerEvents=W(n,"--mcp-settings-pointer-events"),e.elements.settingsSpeedButtonShow=W(n,"--mcp-settings-speed-show"),e.elements.settingsSpeedButtonHide=W(n,"--mcp-settings-speed-hide"),e.elements.controls=W(n,"--mcp-controls"),e.elements.volumeCheckbox=W(n,"--mcp-show-volume-checkbox"),e.elements.showVolumeCheckbox=W(n,"--mcp-show-volume-checkbox"),e.elements.showPointerEventsCheckbox=W(n,"--mcp-show-pointer-events-checkbox"),e.elements.leftButtons=W(n,"--mcp-left-buttons"),(t=e.elements).loopButton.innerHTML=z.loop,t.volumeBtn.innerHTML=z["volume-on"],t.statusButton.innerHTML=z.play,t.settingsButton.innerHTML=z.settings,t.donkeyclipButton.innerHTML=z["donkeyclip-logo"],t.fullScreenButton.innerHTML=z["expand-full"],t.fullScreenButton.innerHTML=z["expand-full"],t.speedButtonShow.innerHTML=z["angle-right"],t.speedButtonHide.innerHTML=z["angle-left"],re(e),se(e),ae(e)}(this),this.setTheme(),this.setSpeed(),this.subscribeToTimer(),this.subscribeToDurationChange(),this.addEventListeners(),this.scaleClipHost(),this.eventBroadcast(p,this.state),"scroller"==this.options.type&&(this.timeBucket=0,this.timeProgress=0,this.sortedSections=null===(n=this.options.sections)||void 0===n?void 0:n.sort((function(e,t){return e-t})));var s=new ResizeObserver((function(){i.options.scaleToFit&&i.scaleClipHost()}));this.changeSettings(t,!0),s.observe(this.options.host),this.options.autoPlay&&this.play()}var t,n;return t=e,n=[{key:"initializeOptions",value:function(e){var t,n,i,r,s,a,o,u,l,c,p,d,h,m,f,v,g,y,b,x,k,w,C,I;if(null!==(t=e.id)&&void 0!==t||(e.id=Date.now()),null!==(n=e.showVolume)&&void 0!==n||(e.showVolume=Object.keys((null===(i=e.clip)||void 0===i||null===(r=i.audioClip)||void 0===r?void 0:r.children)||[]).length||!1),null!==(s=e.showIndicator)&&void 0!==s||(e.showIndicator=!1),null!==(a=e.theme)&&void 0!==a||(e.theme="transparent"),null!==(o=e.host)&&void 0!==o||(e.host=e.clip.props.host),null!==(u=e.buttons)&&void 0!==u||(e.buttons={}),null!==(l=e.timeFormat)&&void 0!==l||(e.timeFormat="ss"),null!==(c=e.backgroundColor)&&void 0!==c||(e.backgroundColor="black"),null!==(p=e.fullscreen)&&void 0!==p||(e.fullscreen=!1),null!==(d=e.scaleToFit)&&void 0!==d||(e.scaleToFit=!0),null!==(h=e.sectionsEasing)&&void 0!==h||(e.sectionsEasing="easeOutQuart"),null!==(m=e.pointerEvents)&&void 0!==m||(e.pointerEvents=!1),null!==(f=e.scrollAnimation)&&void 0!==f||(e.scrollAnimation=!1),null!==(v=e.onMillisecondChange)&&void 0!==v||(e.onMillisecondChange=null),null!==(g=e.speedValues)&&void 0!==g||(e.speedValues=[-1,0,.5,1,2]),null!==(y=e.speed)&&void 0!==y||(e.speed=1),null!==(b=e.muted)&&void 0!==b||(e.muted=!1),null!==(x=e.maxScrollStorage)&&void 0!==x||(e.maxScrollStorage=50),null!==(k=e.controls)&&void 0!==k||(e.controls=!0),null!==(w=e.loop)&&void 0!==w||(e.loop=!1),null!==(C=e.volume)&&void 0!==C||(e.volume=1),null!==(I=e.currentScript)&&void 0!==I||(e.currentScript=null),e.millisecond){var E=this.clip||e.clip;e.millisecond>E.duration&&(e.millisecond=E.duration),e.millisecond<0&&(e.millisecond=0),isFinite(e.millisecond)||(e.millisecond=0),this.createJourney(e.millisecond,{},this.clip||e.clip)}for(var S in e.speedValues)isFinite(e.speedValues[S])||e.speedValues.splice(S,1);return e.speedValues.sort((function(e,t){return e-t})),e}},{key:"play",value:function(){this.clip.play()}},{key:"pause",value:function(){this.clip.pause()}},{key:"changeSettings",value:function(e,t){var n=this;(e=this.initializeOptions(ke(ke({},this.options),e))).clip!==this.options.clip&&(t=!0,this.clip=e.clip,this.options.clip=e.clip),!1===e.controls?this.elements.mcPlayer.style.display="none":!0===e.controls&&(this.elements.mcPlayer.style.display="block");var i={loop:function(){return fe(n)},fullscreen:function(){return he(n)},muted:function(){return be(n,void 0,e.mute)},volume:function(){return be(n,e.volume)},speed:function(){return function(e,t){t=parseFloat(t)||1,e.eventBroadcast(o,t);var n=1==t?"Normal":t;e.clip.executionSpeed=t,e.elements.speedCurrent.innerHTML=n}(n,e.speed)},scaleToFit:function(){n.options.scaleToFit=e.scaleToFit,n.scaleClipHost()},showVolume:function(){return e=n,void("showIndicator"===(t="showVolume")?showIndicator(e):"showPointerEvents"===t?ve(e):"showVolume"===t&&ge(e));var e,t},type:function(){"scroller"===e.type&&me(n)},theme:function(){n.options.theme=e.theme,n.setTheme()},overflow:function(){n.clip.props.host.shadowRoot.children[0].style.overflow=e.overflow},outline:function(){n.clip.props.host.shadowRoot.children[0].style.outline=e.outline},visible:function(){"always"==e.visible?n.elements.controls.classList.add("--mcp-always-show-controls"):"normal"==e.visible&&n.elements.controls.classList.remove("--mcp-always-show-controls")}},r=["fullscreen","muted","volume","speed","scaleToFit","loop","overflow","outline","visible"];for(var s in i)void 0!==e[s]&&(this.options[s]!==e[s]||t&&!1!==this.options[s]&&r.includes(s))&&i[s]();this.options=ke(ke({},this.options),e)}},{key:"scaleClipHost",value:function(){if(this.options.scaleToFit){var e=this.clip.props.containerParams,t=function(e,t){var n,i,r,s,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object.prototype.hasOwnProperty.call(e,"width")&&(r=Q(e.width)),Object.prototype.hasOwnProperty.call(e,"height")&&(s=Q(e.height));var o=1,u=1;"px"===(null===(n=r)||void 0===n?void 0:n.unit)&&r.number!==t.width&&(o=t.width/r.number),"px"===(null===(i=s)||void 0===i?void 0:i.unit)&&s.number!==t.height&&(u=t.height/s.number);var l=(a?u>o:u<=o)?u:o,c={};if(null!==r){var p=r.number*l;"px"!==r.unit&&(p*=t.width/100);var d=t.width-p;c.left=d/2}if(null!==r){var h=s.number*l;"px"!==s.unit&&(h*=t.height/100);var m=t.height-h;c.top=m/2}return{scale:l,position:c}}({width:e.width,height:e.height},{width:this.clip.props.host.offsetWidth,height:this.clip.props.host.offsetHeight-("always"==this.options.visible?50:0)},"cover"===this.options.scaleToFit);this.clip.realClip.rootElement.style.transform="scale(".concat(t.scale),this.clip.realClip.rootElement.style.left="".concat(t.position.left,"px"),this.clip.realClip.rootElement.style.top="".concat(t.position.top,"px")}else this.clip.realClip.rootElement.style.transform="scale(1)",this.clip.realClip.rootElement.style.left="0px",this.clip.realClip.rootElement.style.top="0px";this.eventBroadcast(l,this.options.scaleToFit)}},{key:"createLoop",value:function(e,t){this.settings.loopStartMillisecond=e,this.settings.loopEndMillisecond=t,this.elements.loopBar.style.left="".concat(e/this.clip.duration*100,"%"),this.elements.loopBar.style.width="".concat((t-e)/this.clip.duration*100,"%"),this.createJourney(e),this.elements.runningBar.style.width="0%",!this.settings.loopActivated&&fe(this)}},{key:"createJourney",value:function(e){var t,n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;null!==(t=r)&&void 0!==t||(r=this.clip),setTimeout((function(){if(r.id){var t=i.before,s=void 0===t?null:t,a=i.after,o=void 0===a?null:a;s&&r[s](),n.settings.journey=Ie.startJourney(r),n.settings.journey.station(e),n.settings.journey.destination(),o&&r[o]()}}),0)}},{key:"animateWithEasing",value:function(){if(this.progress=(Date.now()-this.transitionStart)/this.endAnimation,this.progress>=1)return this.cancelAnimation();var e=this.calculateJourneyPosition(this.progress);e<0&&(e=0),e>this.clip.duration&&(e=this.clip.duration),this.createJourney(e),this.requestAnimationID=window.requestAnimationFrame(this.animateWithEasing.bind(this))}},{key:"calculateMinMaxOfTimeProgress",value:function(){this.timeProgress>=this.clip.duration&&(this.timeProgress=this.clip.duration),this.timeProgress<=0&&(this.timeProgress=0)}},{key:"requestAnimation",value:function(){this.requestAnimationID=window.requestAnimationFrame(this.animateTimeBucket.bind(this))}},{key:"cancelAnimation",value:function(){window.cancelAnimationFrame(this.requestAnimationID),this.requestAnimationID=null}},{key:"removeTimeFromBucket",value:function(){var e=Math.log(this.timeBucket),t=Math.pow(e,2);return this.timeBucket-=this.options.scrollAnimation?e:t,t}},{key:"addTimeToProgress",value:function(e){this.timeProgress+=e*this.multiplier*this.clip.speed}},{key:"checkIfBucketHasTime",value:function(){return!(this.timeBucket<=0&&(this.requestAnimationID=null,1))}},{key:"calculateJourneyPosition",value:function(e){var t=i.utils.easings[this.options.sectionsEasing](e);return this.startPosition+t*this.options.speed*this.multiplier*this.endAnimationTime}},{key:"animateTimeBucket",value:function(){if(this.checkIfBucketHasTime){if(this.addTimeToProgress(this.removeTimeFromBucket()),this.calculateMinMaxOfTimeProgress(),this.options.sections){var e=(Date.now()-this.startAnimationTime)/this.endAnimationTime;if(e>=1||0===this.endAnimationTime)return this.cancelAnimation();var t=this.calculateJourneyPosition(e);this.createJourney(Math.ceil(t))}else this.createJourney(this.timeProgress);this.requestAnimation()}}},{key:"setUpTimeBucket",value:function(e){var t=e>0?1:-1;e=Math.ceil(Math.abs(e))*t,this.timeBucket+=Math.abs(e),t!=this.multiplier&&(this.timeBucket=Math.abs(e)),this.timeBucket>this.options.maxScrollStorage&&(this.timeBucket=this.options.maxScrollStorage),this.multiplier=t}},{key:"getSectionTime",value:function(e){var t;if(e>0){for(var n,i=this.startPosition+this.timeBucket,r=0;r<this.sortedSections.length;r++)if(i<this.sortedSections[r]){t=r;break}null!==(n=t)&&void 0!==n||(t=this.sortedSections.length-1)}else{for(var s,a=this.startPosition-this.timeBucket,o=this.sortedSections.length-1;o>=0;o--)if(a>this.sortedSections[o]){t=o;break}null!==(s=t)&&void 0!==s||(t=0)}return t}},{key:"initializeSections",value:function(){this.startAnimationTime=Date.now(),this.startPosition=this.clip.runTimeInfo.currentMillisecond,this.currentSectionIndex=this.getSectionTime(this.multiplier),this.endAnimationTime=Math.abs(this.startPosition-this.sortedSections[this.currentSectionIndex])}},{key:"stepper",value:function(e){this.setUpTimeBucket(e),this.options.sections&&this.initializeSections(),this.requestAnimationID||this.animateTimeBucket()}},{key:"millisecondChange",value:function(e,t,n,i){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this.state!==t&&(this.state=t,this.eventBroadcast(p,t)),!this.settings.needsUpdate)return this.clip.pause(),1;var s=this.settings.loopActivated;s&&this.clip.speed&&this.calculateJourney(e);var a=this.clip.duration,o=this.elements,u=o.totalBar,l=o.loopBar,c=l.offsetWidth,d=l.offsetLeft/u.offsetWidth,h=e-a*d,m=a/u.offsetWidth*c;i&&this.createJourney(e,{after:this.settings.playAfterResize?"play":null}),this.elements.runningBar.style.width=h/m*100+"%",this.elements.currentTime.innerHTML=this.timeFormat(e),this.options.onMillisecondChange&&r&&this.options.onMillisecondChange(e)}},{key:"calculateJourney",value:function(e){var t=this.settings,n=t.loopEndMillisecond,i=t.loopStartMillisecond,r=e>n||e===this.clip.duration,s=e<i||0===e,a=this.clip.speed>0;if(this.clip.runTimeInfo.state===ue)if(a){if(r)return this.createJourney(i+1,{after:"play"}),!0}else if(s)return this.createJourney(n-1,{after:"play"}),!0;return!1}},{key:"broadcastNotPlaying",value:function(e){this.elements.controls.classList.value.includes(oe)||this.elements.controls.classList.toggle(oe),ne(this.elements.statusButton,"pause","play"),this.elements.indicator.innerHTML="".concat(e.charAt(0).toUpperCase()+e.slice(1)),"blocked"==e?this.addSpinner():"idle"!==e&&this.removeSpinner()}},{key:"changeInitParams",value:function(e){this.clip.pause();var t=this.clip.exportLiveDefinition();for(var n in t.props.host=this.clip.props.host,t.props.initParams=e,this.clip.realClip.context.unmount(),this.clip)delete this.clip[n];this.clip=i.utils.clipFromDefinition(t),this.options.clip=this.clip,this.changeSettings(this.options,!0),this.subscribeToTimer(),this.subscribeToDurationChange()}},{key:"addSpinner",value:function(){ne(this.elements.pointerEventPanel,null,"spinner"),this.elements.pointerEventPanel.classList.add("loading")}},{key:"addPlayIcon",value:function(){ne(this.elements.playPausePanelContainer,null,"play")}},{key:"addPauseIcon",value:function(){ne(this.elements.playPausePanelContainer,null,"pause")}},{key:"removeSpinner",value:function(){ne(this.elements.pointerEventPanel,"spinner",null),this.elements.pointerEventPanel.classList.remove("loading")}},{key:"broadcastPlaying",value:function(e){this.removeSpinner(),this.elements.controls.classList.value.includes(oe)&&this.elements.controls.classList.toggle(oe),this.elements.indicator.innerHTML="Playing",ne(this.elements.statusButton,"play","pause"),e===ue&&(this.clip.runTimeInfo.currentMillisecond===this.clip.duration&&this.clip.speed>=0?this.createJourney(1,{after:"play"}):(this.clip.runTimeInfo.currentMillisecond===this.clip.duration||0===this.clip.runTimeInfo.currentMillisecond)&&this.clip.speed<0&&this.createJourney(this.clip.duration-1,{after:"play"}))}},{key:"broadcastDurationChange",value:function(){this.elements.totalTime.innerHTML=this.timeFormat(this.clip.duration),this.settings.loopEndMillisecond=this.clip.duration,this.elements.pointerEventPanel.innerHTML="",this.millisecondChange(this.clip.runTimeInfo.currentMillisecond)}},{key:"broadcastVolumeChange",value:function(e){this.options.volume=e,this.options.currentScript.dataset.volume=e}},{key:"broadcastSpeedChange",value:function(e){this.options.speed=e,this.options.currentScript.dataset.speed=e}},{key:"broadcastMuteChange",value:function(e){e?(this.options.muted=!0,this.options.currentScript.dataset.muted=""):(this.options.muted=!1,delete this.options.currentScript.dataset.muted)}},{key:"broadcastLoopChange",value:function(e){e?(this.options.loop=!0,this.options.currentScript.dataset.loop=""):(this.options.loop=!1,delete this.options.currentScript.dataset.loop)}},{key:"broadcastScaleChange",value:function(e){e?(this.options.scaleToFit=!0,this.options.currentScript.dataset.scaleToFit=""):(this.options.scaleToFit=!1,delete this.options.currentScript.dataset.scaleToFit)}},{key:"broadcastShowVolumeChange",value:function(e){e?(this.options.showVolume=!0,this.options.currentScript.dataset.showVolume=""):(this.options.showVolume=!1,delete this.options.currentScript.dataset.showVolume)}},{key:"broadcastToScript",value:function(e,t){e===s?this.broadcastVolumeChange(t):e===o?this.broadcastSpeedChange(t):e===a?this.broadcastMuteChange(t):e===u?this.broadcastLoopChange(t):e===l?this.broadcastScaleChange(t):e===c&&this.broadcastShowVolumeChange(t)}},{key:"calculateThumbnail",value:function(e){var t=this.options.thumbnail||this.options.thumbnailColor,n=0===this.clip.runTimeInfo.currentMillisecond&&this.clip.speed>0,i=this.options.autoPlay;"idle"==e&&i?this.elements.playPausePanel.classList.add("hide"):"idle"==e&&n&&t?(this.addPlayIcon(),this.elements.playPausePanel.style.backgroundColor=this.options.thumbnailColor||"black",this.elements.playPausePanel.style.backgroundImage=this.options.thumbnail&&"url(".concat(this.options.thumbnail,")"),this.elements.playPausePanel.classList.add("initial"),this.elements.pointerEventPanel.classList.add("initial")):"idle"===e&&!t&&n?this.elements.playPausePanel.classList.add("hide"):(this.elements.playPausePanel.style.backgroundColor="transparent",this.elements.playPausePanel.style.backgroundImage="none",this.elements.pointerEventPanel.classList.remove("initial"),this.elements.playPausePanel.classList.remove("initial"))}},{key:"eventBroadcast",value:function(e,t){e===p?(this.options.currentScript&&(this.options.currentScript.dataset.status=t),this.calculateThumbnail(t),["paused","idle","transitional","armed","blocked"].includes(t)?this.broadcastNotPlaying(t):this.broadcastPlaying(t)):e===d?this.broadcastDurationChange():this.options.currentScript&&this.broadcastToScript(e,t)}},{key:"subscribeToDurationChange",value:function(){this.clip.subscribeToDurationChange(this.subscribeToDurationChangeCallback.bind(this))}},{key:"subscribeToDurationChangeCallback",value:function(){this.eventBroadcast(d)}},{key:"subscribeToTimer",value:function(){this.clip.subscribe(this.id,this.millisecondChange.bind(this))}},{key:"handleDragStart",value:function(){this.settings.needsUpdate=!0,this.settings.journey=Ie.startJourney(this.clip)}},{key:"timeFormat",value:function(e){if("ss"===this.options.timeFormat){var t=e/1e3/60/60,n=t%1*60,i=n%1*60,r=("0"+parseInt(t.toFixed(50))).slice(-2),s=("0"+parseInt(n.toFixed(50))).slice(-2),a=("0"+parseInt(i.toFixed(50))).slice(-2);return"".concat("00"===r?"":r+":").concat(s,":").concat(a)}return e}},{key:"handleDrag",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];isFinite(e)||(e=0);var n=this.clip.duration,i=this.settings.journey,r=this.elements,s=r.loopBar,a=r.totalBar,o=r.runningBar,u=r.currentTime,l=e+s.offsetLeft,c=Math.round(n*l/a.offsetWidth);u.innerHTML=this.timeFormat(c),o.style.width=e/s.offsetWidth*100+"%",i.station(c),this.options.onMillisecondChange&&t&&this.options.onMillisecondChange(c)}},{key:"handleDragEnd",value:function(){this.settings.journey.destination()}},{key:"createProgressDrag",value:function(e){this.handleDragStart(),this.handleDrag(e),this.handleDragEnd()}},{key:"addEventListeners",value:function(){var e;(e=this).listeners.onCursorMoveLoopEnd=function(t){var n=(t.clientX||((t.touches||[])[0]||{}).clientX)-e.elements.totalBar.getBoundingClientRect().left;n<0?n=0:n>e.elements.totalBar.offsetWidth&&(n=e.elements.totalBar.offsetWidth),e.elements.runningBar.offsetWidth>=e.elements.loopBar.offsetWidth&&(e.elements.runningBar.style.width=e.elements.loopBar.offsetWidth+"px"),e.settings.loopLastPositionXPxls-n<0?e.elements.loopBar.style.width=Math.abs(e.settings.loopLastPositionXPxls-n)+"px":(e.elements.loopBar.style.left=n+"px",e.settings.loopLastPositionXPxls=n),e.settings.loopEndMillisecond=Math.round(e.clip.duration*((parseFloat(e.elements.loopBar.style.left)||0)+parseFloat(e.elements.loopBar.style.width))/e.elements.totalBar.offsetWidth),e.settings.loopEndMillisecond<e.clip.runTimeInfo.currentMillisecond&&(e.settings.loopJourney=!0),e.settings.loopStartMillisecond>e.settings.loopEndMillisecond&&(e.settings.loopStartMillisecond=e.settings.loopEndMillisecond,e.settings.loopJourney=!0)},e.listeners.onMouseUpLoopEnd=function(){e.elements.listenerHelper.style.pointerEvents="none",e.settings.resizeLoop=!1;var t,n=e.elements,i=n.loopBar,r=n.totalBar,s=n.runningBar;s.style.width=s.offsetWidth/i.offsetWidth*100+"%",i.style.left="".concat(i.offsetLeft/r.offsetWidth*100,"%"),i.style.width="".concat(i.offsetWidth/r.offsetWidth*100,"%"),e.settings.loopJourney&&(e.createProgressDrag(s.offsetWidth),e.settings.loopJourney=!1),Z(e.listeners.onMouseUpLoopEnd,e.listeners.onCursorMoveLoopEnd),ee(e.listeners.onMouseDown,i,!0),e.settings.playAfterResize&&("idle"===e.clip.runTimeInfo.state||"completed"===e.clip.runTimeInfo.state?(t=e.clip.speed>=0?e.settings.loopStartMillisecond+1:e.settings.loopEndMillisecond-1,e.settings.needsUpdate=!0,e.createJourney(t,{before:"pause",after:"play"})):e.clip.play(),e.settings.playAfterResize=!1)},e.listeners.onMouseDownLoopEnd=function(t){e.elements.listenerHelper.style.pointerEvents="auto",e.settings.resizeLoop=!0,e.settings.needsUpdate=!0,"playing"===e.clip.runTimeInfo.state&&(e.clip.pause(),e.settings.playAfterResize=!0),e.elements.runningBar.style.width="".concat(e.elements.runningBar.offsetWidth,"px");var n=e.elements.loopBar;n.style.left="".concat(n.offsetLeft,"px"),n.style.width="".concat(n.offsetWidth,"px"),te(e.listeners.onMouseDown,n),e.listeners.onCursorMoveLoopEnd(t),Y(e.listeners.onMouseUpLoopEnd,e.listeners.onCursorMoveLoopEnd)},ee(e.listeners.onMouseDownLoopEnd,e.elements.loopBarEnd,!1),function(e){e.listeners.onCursorMove=function(t){var n=(t.clientX||((t.touches||[])[0]||{}).clientX)-e.elements.loopBar.getBoundingClientRect().left;n<0?n=0:n>e.elements.loopBar.offsetWidth&&(n=e.elements.loopBar.offsetWidth),e.handleDrag(n)},e.listeners.onMouseUp=function(){e.elements.listenerHelper.style.pointerEvents="none",Z(e.listeners.onMouseUp,e.listeners.onCursorMove),e.handleDragEnd(e.settings)},e.listeners.onMouseDown=function(t){e.elements.listenerHelper.style.pointerEvents="auto","playing"===e.clip.runTimeInfo.state&&(e.settings.playAfterResize=!0),e.handleDragStart(e.clip),e.listeners.onCursorMove(t),Y(e.listeners.onMouseUp,e.listeners.onCursorMove)},ee(e.listeners.onMouseDown,e.elements.loopBar)}(this),function(e){e.listeners.onCursorMoveLoopStart=function(t){var n=t.clientX||((t.touches||[])[0]||{}).clientX,i=e.elements.totalBar.getBoundingClientRect(),r=Math.round(n-i.left),s=Math.round(e.settings.loopEndMillisecond/e.clip.duration*e.elements.totalBar.offsetWidth);r<0?r=0:r>e.elements.totalBar.offsetWidth&&(r=e.elements.totalBar.offsetWidth);var a=e.clip.runTimeInfo.currentMillisecond/e.clip.duration*e.elements.totalBar.offsetWidth-r;e.elements.loopBar.style.left=r+"px",e.elements.loopBar.style.width=s-r+"px",e.elements.runningBar.style.width=a+"px",e.settings.loopLastPositionXPxls=r,e.settings.loopStartMillisecond=Math.round(e.clip.duration*e.elements.loopBar.offsetLeft/e.elements.totalBar.offsetWidth),e.settings.loopEndMillisecond<e.settings.loopStartMillisecond&&(e.settings.loopEndMillisecond=e.settings.loopStartMillisecond,e.elements.loopBar.style.width="0px",e.elements.runningBar.style.width="0px"),e.settings.loopStartMillisecond>e.clip.runTimeInfo.currentMillisecond&&(e.settings.loopJourney=!0)},e.listeners.onMouseUpLoopStart=function(){var t;e.elements.listenerHelper.style.pointerEvents="none",e.settings.resizeLoop=!1,e.settings.loopJourney&&(e.createProgressDrag(e.elements.runningBar.offsetWidth),e.settings.loopJourney=!1),e.elements.loopBar.style.left=e.elements.loopBar.offsetLeft/e.elements.totalBar.offsetWidth*100+"%",e.elements.loopBar.style.width=e.elements.loopBar.offsetWidth/e.elements.totalBar.offsetWidth*100+"%",e.settings.loopStartMillisecond=Math.round(e.clip.duration*e.elements.loopBar.offsetLeft/e.elements.totalBar.offsetWidth),e.elements.runningBar.style.width=e.elements.runningBar.offsetWidth/e.elements.loopBar.offsetWidth*100+"%",Z(e.listeners.onMouseUpLoopStart,e.listeners.onCursorMoveLoopStart),ee(e.listeners.onMouseDown,e.elements.loopBar,!0),e.settings.playAfterResize&&("idle"===e.clip.runTimeInfo.state?(t=e.clip.speed>=0?e.settings.loopStartMillisecond+1:e.settings.loopEndMillisecond-1,e.settings.needsUpdate=!0,e.createJourney(t,{before:"pause",after:"play"})):e.clip.play(),e.settings.playAfterResize=!1)},e.listeners.onMouseDownLoopStart=function(t){e.elements.listenerHelper.style.pointerEvents="auto",e.settings.resizeLoop=!0,e.settings.needsUpdate=!0,"playing"===e.clip.runTimeInfo.state&&(e.clip.pause(),e.settings.playAfterResize=!0),te(e.listeners.onMouseDown,e.elements.loopBar),e.listeners.onCursorMoveLoopStart(t),Y(e.listeners.onMouseUpLoopStart,e.listeners.onCursorMoveLoopStart)},ee(e.listeners.onMouseDownLoopStart,e.elements.loopBarStart)}(this),function(e){var t=e.elements,n=!1;t.volumeBtn.onclick=function(){e.settings.volumeMute?(t.volumeBarActive.style.width="".concat(100*e.settings.volume,"%"),e.clip.setVolume(e.settings.previousVolume),t.volumeBarActive.style.width="".concat(100*e.settings.previousVolume,"%"),e.settings.volumeMute=!1,ne(t.volumeBtn,le,ce)):(e.settings.volumeMute=!0,ne(t.volumeBtn,ce,le),t.volumeBarActive.style.width="0%",e.clip.setVolume(0)),e.eventBroadcast(s,e.settings.previousVolume),e.eventBroadcast(a,e.settings.volumeMute)};var i=!1;t.volumeBtn.onmouseover=function(){i=!0},e.elements.leftButtons.onmouseout=function(){if(i&&!n){var t=event.toElement||event.relatedTarget||event.target;t===e.elements.leftButtons||function(e,t){for(var n=t.parentNode;null!=n;){if(n==e)return!0;n=n.parentNode}return!1}(e.elements.leftButtons,t)||(i=!1)}};var r=e.listeners;r.onCursorMoveVolumeBar=function(n){var i=(n.clientX||((n.touches||[])[0]||{}).clientX)-t.volumeBarHelper.getBoundingClientRect().left;if(i<0?i=0:i>t.volumeBarHelper.offsetWidth&&(i=t.volumeBarHelper.offsetWidth),e.settings.volume=Number((i/t.volumeBarHelper.offsetWidth).toFixed(2)),t.volumeBarActive.style.width="".concat(100*e.settings.volume,"%"),e.clip.setVolume(e.settings.volume),e.settings.volume>=0){var r=0===e.settings.volume;e.settings.volumeMute=r,r?ne(t.volumeBtn,ce,le):ne(t.volumeBtn,le,ce)}e.eventBroadcast(s,e.settings.volume),e.eventBroadcast(a,e.settings.volumeMute)},r.onMouseUpVolumeBar=function(){n=!1,t.listenerHelper.style.pointerEvents="none",e.settings.volume>0&&(e.settings.previousVolume=e.settings.volume),Z(r.onMouseUpVolumeBar,r.onCursorMoveVolumeBar)},r.onMouseDownVolumeBar=function(e){n=!0,t.listenerHelper.style.pointerEvents="auto",r.onCursorMoveVolumeBar(e),Y(r.onMouseUpVolumeBar,r.onCursorMoveVolumeBar)},ee(r.onMouseDownVolumeBar,t.volumeBarHelper),ee(r.onMouseDownVolumeBar,t.volumeCursor)}(this),function(e){e.elements.statusButton.onclick=function(){switch(e.clip.runTimeInfo.state){case"playing":e.clip.pause();break;case"paused":case"idle":case"transitional":case"armed":e.clip.play()}return!1}}(this),function(e){e.elements.settingsPointerEvents.onclick=function(){return ve(e)},e.elements.settingsShowVolume.onclick=function(){return ge(e)},e.elements.settingsButton.onclick=function(){var t=function t(n){if(e.elements.settingsPanel.contains(n.target))return!0;e.elements.settingsPanel.classList.toggle("".concat(e.name,"-hide")),e.elements.settingsPanel.classList.toggle("m-fadeOut"),e.elements.settingsPanel.classList.toggle("m-fadeIn"),e.elements.settingsPanel.className.includes("m-fadeOut")&&(K("click",t,!1),e.eventBroadcast(p,e.state))};e.elements.settingsPanel.className.includes("m-fadeOut")?(e.elements.controls.classList.value.includes("--mcp-force-show-controls")||e.elements.controls.classList.toggle("--mcp-force-show-controls"),J("click",t,!1)):K("click",t,!1)}}(this),function(e){e.elements.settingsSpeedButtonShow.onclick=e.elements.settingsSpeedButtonHide.onclick=function(){e.elements.settingsPanel.classList.toggle("".concat(e.name,"-settings-speed-panel")),e.elements.settingsPanel.className.includes("".concat(e.name,"-settings-speed-panel"))?(e.elements.settingsMainPanel.style.display="none",e.elements.settingsSpeedPanel.style.display="block"):(e.elements.settingsSpeedPanel.style.display="none",e.elements.settingsMainPanel.style.display="block")}}(this),function(e){e.elements.loopButton.onclick=function(){return fe(e)}}(this),function(e){e.elements.fullScreenButton.onclick=function(){return he(e)}}(this),function(e){e.elements.pointerEventPanel.onclick=function(){return function(e){clearTimeout(de),e.elements.playPausePanel.classList.remove("animate"),e.elements.playPausePanel.classList.add("hide"),e.elements.playPausePanel.classList.remove("hide"),e.elements.playPausePanel.classList.add("remove-animation"),e.elements.playPausePanel.classList.remove("remove-animation"),"playing"!==e.clip.runTimeInfo.state?(e.play(),e.addPlayIcon()):(e.pause(),e.addPauseIcon()),e.elements.playPausePanel.classList.add("animate"),de=setTimeout((function(){e.elements.playPausePanel.classList.remove("animate"),e.elements.playPausePanel.classList.add("hide")}),800)}(e)}}(this),function(e){e.elements.donkeyclipButton.addEventListener("click",(function(){var t,n=(t=(new Date).getTime(),"xxxxxxxx-xxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;t=Math.floor(t/16);var i=Math.random()>.5,r=("x"==e?n:3&n|8).toString(16);return i?r.toUpperCase():r}))),i=window.open("https://donkeyclip.com?u=".concat(n)),r=e.clip.exportDefinition(),s=e.clipClass;window.addEventListener("message",(function(e){e.data===n&&i.postMessage(JSON.stringify({definition:r,clipClass:s,u:n}),"*")}),!1)}))}(this),function(e){function t(){e.elements.mcPlayer.classList.toggle("full-screen"),e.clip.props.host.classList.toggle("full-screen")}J("fullscreenchange",t),J("webkitfullscreenchange",t),J("mozfullscreenchange",t),J("MSFullscreenChange",t)}(this),"scroller"===this.options.type&&me(this)}},{key:"launchIntoFullscreen",value:function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}},{key:"exitFullscreen",value:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}},{key:"setTheme",value:function(){if(this.options.theme.replace(/\s\s+/g," "),this.options.theme.trim(),"default"===this.options.theme)this.elements.mcPlayer.classList.add("theme-default");else if("transparent"===this.options.theme)this.elements.mcPlayer.classList.add("theme-transparent");else if("whiteGold"===this.options.theme)this.elements.mcPlayer.classList.add("theme-whiteGold");else if("darkGold"===this.options.theme)this.elements.mcPlayer.classList.add("theme-darkGold");else if("green"===this.options.theme)this.elements.mcPlayer.classList.add("theme-green");else if("blue"===this.options.theme)this.elements.mcPlayer.classList.add("theme-blue");else if("dark"===this.options.theme)this.elements.mcPlayer.classList.add("theme-dark");else if("yellow"===this.options.theme)this.elements.mcPlayer.classList.add("theme-yellow");else if(this.options.themeCSS&&!H("--mc-player-style-custom")){this.options.themeCSS=this.options.themeCSS.replace(/(behaviour|javascript|expression)/gm,"");var e=U("style");e.id="--mc-player-style-custom",e.styleSheet?e.styleSheet.cssText=this.options.themeCSS:e.appendChild(document.createTextNode(this.options.themeCSS)),G("head")[0].appendChild(e),this.elements.mcPlayer.classList.add(this.options.theme)}if(!H("--mc-player-style")){var t=U("style");t.id="--mc-player-style",t.styleSheet?t.styleSheet.cssText=pe.Z:t.appendChild(document.createTextNode(pe.Z)),G("head")[0].appendChild(t)}this.eventBroadcast("theme-change",this.options.theme)}},{key:"setSpeed",value:function(){var e=1==this.clip.speed?"Normal":this.clip.speed;this.elements.speedCurrent.innerHTML=e}},{key:"calculateSpeed",value:function(e,t,n){var i=Math.floor(n/e);if(i===t.length-1)return t[i].toFixed(1);var r=(n/e%1*Math.abs(t[i]-t[i+1])+t[i]).toFixed(1);return 0==r?"0.0":r}}],n&&Ce(t.prototype,n),e}();const Se=Ee;var Pe=document.getElementById("app"),Me=new i.HTMLClip({css:"\ndiv[data-motorocortex-container]{\n  background:white;\n}\n.test{\n  color:black !important;\n  width:100%;\n  position:absolute;\n  width:200px;\n  height:100px;\n  left:0px;\n  top:0px;\n  color:red;\n  margin:auto;\n  font-size:20px;\n}\n",html:'\n<div>\n<div class="test">\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam leo dui, posuere blandit luctus in, posuere sollicitudin urna. Pellentesque vulputate quis velit ut tempor. Cras sollicitudin aliquam turpis non feugiat. Mauris enim felis, dictum vestibulum purus in, dignissim lobortis felis. Morbi tincidunt sagittis vehicula. Curabitur id scelerisque tellus. Pellentesque purus leo, porta egestas maximus in, volutpat nec neque. Praesent pellentesque enim sit amet facilisis pretium. Nulla dapibus orci dapibus ipsum commodo, ut pretium ex aliquet.\n\nNam enim arcu, pretium vehicula mauris at, accumsan condimentum sem. Quisque eu leo in velit porta malesuada. Etiam aliquet euismod nisi vel accumsan. Nulla posuere turpis quis risus sodales, eget facilisis dolor gravida. Mauris at tincidunt urna, vel tempor tortor. Mauris et odio vitae quam fringilla elementum vel sed ligula. Nam eget magna maximus, malesuada nisi et, iaculis magna. Maecenas fermentum ipsum eget purus hendrerit cursus. Sed eu ligula luctus, sollicitudin nunc non, faucibus felis. Nunc ullamcorper convallis neque, sit amet lacinia ligula laoreet ut. Sed vestibulum nisi ac neque rhoncus efficitur. Integer efficitur ultrices sagittis.\n\nNulla quis libero nec nisl finibus convallis ac a diam. Suspendisse dignissim massa sed quam feugiat pretium. Morbi nec ultrices urna. Aenean eget dolor mi. Nulla pulvinar nulla nec dolor accumsan, nec accumsan elit consectetur. Praesent lorem erat, dignissim at mauris sed, condimentum sagittis orci. Vivamus a venenatis nibh. Maecenas porttitor orci varius turpis tristique, in semper ipsum egestas.\n\nNam pulvinar lacinia ante sed dapibus. Donec eleifend iaculis dictum. Etiam ultrices leo turpis. Cras vitae orci sed libero finibus dictum. Vestibulum faucibus ultricies tortor, vel molestie nulla posuere non. In mattis ullamcorper augue, eu dignissim sem accumsan ac. Aenean posuere sem id commodo placerat. Nunc ut augue ultricies, scelerisque libero ut, fermentum enim. Integer nunc velit, cursus et sodales vel, pulvinar id enim. Aliquam aliquam, ex quis pulvinar auctor, libero libero venenatis eros, ac sollicitudin odio lacus sed nibh. Suspendisse potenti. Nunc luctus odio nec pellentesque lobortis. In scelerisque erat in diam pulvinar pellentesque. Proin justo dui, semper eget magna eu, convallis porttitor tortor. Duis ac nisi et enim consectetur consectetur.\n\nProin congue mi vitae elit posuere, sit amet tincidunt felis semper. Integer ut augue at erat varius dignissim eu id libero. Cras ligula leo, ornare et nibh ac, vehicula ultricies tortor. Suspendisse ultricies volutpat diam quis consequat. Integer magna dui, efficitur vel aliquam ut, posuere ut ex. Nulla et vehicula dolor. Praesent sed pellentesque ligula. Mauris tincidunt nibh fringilla, tincidunt sapien at, porta velit. Donec id diam vel sem vulputate ultricies.\n\nCurabitur eleifend sagittis neque, sed scelerisque est commodo et. Sed vitae nunc dapibus orci elementum porttitor. Fusce at nibh et nulla laoreet vulputate. Etiam mattis pulvinar massa, ullamcorper imperdiet magna gravida a. Nullam congue ultricies massa, non tristique nisi fermentum feugiat. In eleifend ante ac diam feugiat ultricies. Donec egestas, felis id tristique suscipit, ligula nisl tempor ex, in varius risus leo a ante. Vivamus porta nisi in dolor dictum pretium. Proin arcu urna, gravida quis nibh lobortis, luctus convallis lorem. Ut in risus molestie, faucibus enim a, auctor erat. Ut turpis est, congue non cursus eu, volutpat et leo. Phasellus ut libero sit amet eros facilisis volutpat non sed justo.\n\nCurabitur tincidunt mollis massa, vitae tempus magna finibus sit amet. Aliquam ut nisi quis dui pretium dignissim. Cras tincidunt, nisi ut consectetur dapibus, mauris purus porta mi, id faucibus dui lectus et lectus. Cras vulputate felis at lacus suscipit fermentum. Aenean sed luctus erat. Fusce hendrerit posuere odio, ut efficitur risus lacinia sit amet. Morbi eget ultrices lorem. Sed finibus commodo leo, vel mattis dui ultrices sit amet. Cras sed dignissim nulla, ut consequat lacus. Morbi scelerisque justo tempus felis sollicitudin tempor nec quis orci. Donec lacinia diam sit amet ex sollicitudin congue. Nunc urna massa, sodales a consequat eget, maximus at felis. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Fusce et leo urna.\n\nVivamus imperdiet interdum maximus. Nam nec nunc ac leo euismod ultrices nec eget ante. Quisque ligula est, luctus et urna eu, tincidunt blandit dui. Mauris maximus vehicula orci. Ut sem urna, pulvinar et aliquam vel, rhoncus vitae turpis. Sed sit amet volutpat tortor. Maecenas faucibus, quam sed placerat fermentum, odio libero suscipit eros, nec euismod felis ex sit amet lectus.\n\nAenean vel justo vel arcu dapibus rhoncus at a urna. Vestibulum a mattis tellus. Nam ut cursus elit, in mollis mauris. Donec consequat mi dui, ac egestas diam dapibus vitae. Quisque justo metus, semper eu sem et, aliquam efficitur dui. Nam blandit venenatis magna, rhoncus fringilla enim varius quis. Proin non bibendum orci. Fusce libero sapien, pretium a aliquet eget, sagittis et justo.\n\nPhasellus commodo ligula elit, vitae elementum erat pulvinar iaculis. Sed suscipit arcu vitae justo pretium eleifend. Integer metus sem, venenatis eu dui ut, venenatis ultricies quam. Quisque gravida volutpat leo vel viverra. Aenean sollicitudin nunc in lorem lacinia, vel dignissim diam maximus. Vivamus malesuada ac ante ac pulvinar. Mauris tincidunt dictum feugiat. Sed egestas quam dui, vel rhoncus ipsum tempus at. Interdum et malesuada fames ac ante ipsum primis in faucibus. Quisque est eros, rhoncus vitae nisi sed, gravida ultricies neque. Integer nec convallis purus. Nullam feugiat mi et elit convallis, at tincidunt turpis iaculis. Mauris sagittis nibh quis quam porta, non blandit elit iaculis. Phasellus vehicula semper mattis. Aenean interdum malesuada iaculis.\n\nProin id euismod turpis. Fusce id augue feugiat, scelerisque metus a, varius diam. Nulla auctor quam nec venenatis imperdiet. Curabitur blandit fringilla erat tincidunt aliquam. Aliquam dictum dapibus velit, in rutrum erat hendrerit ac. Sed tellus felis, porttitor eget eleifend quis, consequat ac libero. Pellentesque nunc leo, ornare eget tortor quis, gravida malesuada ante. Vivamus gravida, libero nec viverra eleifend, turpis enim consequat ipsum, vitae sodales erat libero at metus. Curabitur condimentum neque dui, eu rutrum nisi placerat sed. Nunc id condimentum urna, at egestas diam. Vivamus elementum tincidunt tristique. Curabitur tincidunt vitae sapien at dictum. Donec volutpat nisi vitae tristique blandit. Pellentesque sodales, purus vel commodo varius, est mauris sodales sem, vitae luctus quam nisi ac erat. Maecenas quis metus urna.\n\nVestibulum luctus nisi et viverra varius. Duis non lacinia mi, id aliquam ex. Praesent lobortis dignissim sem. Mauris interdum, lectus in consectetur pretium, tellus enim consectetur orci, quis gravida nibh diam ut lacus. Curabitur mollis neque a auctor sodales. Morbi ac sollicitudin neque. Suspendisse porta laoreet pharetra. Sed mauris eros, tincidunt eget rhoncus vitae, sollicitudin nec metus. Praesent et odio placerat, congue sem ut, ultricies magna. Sed sit amet eros dui. Cras lacinia id nunc a hendrerit.\n\nPraesent sed nisl id justo pharetra luctus a at ante. Vestibulum nec sem dictum, tempus libero nec, scelerisque leo. Sed nec ipsum cursus, laoreet mi in, sollicitudin erat. Phasellus mattis tortor vitae ornare pharetra. Donec purus ex, lacinia at eros et, euismod tincidunt nulla. Integer imperdiet eu nisl vitae cursus. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Fusce in tincidunt elit.\n\nEtiam diam mi, malesuada nec nisl a, tincidunt feugiat neque. Cras gravida porta risus rhoncus rhoncus. In vulputate interdum nunc eu fermentum. Maecenas commodo in metus non vehicula. Fusce a dui vel nisl finibus rhoncus vel vitae justo. Curabitur lorem neque, viverra at ornare eget, pharetra ac nulla. Suspendisse a varius ligula. Nunc sapien lectus, dapibus venenatis euismod sed, tempus at sapien. Vestibulum pretium eleifend nulla hendrerit malesuada. Donec sollicitudin tempor vestibulum.\n\nDonec nunc nulla, iaculis eu tortor at, pretium sagittis augue. Sed lacinia venenatis elit, eu condimentum quam tempor eu. Vestibulum quis feugiat nibh, non lobortis velit. Integer convallis, metus vel suscipit tempus, ipsum ligula pulvinar risus, sed imperdiet nunc nulla id mi. Integer egestas odio sagittis molestie maximus. Nulla semper est vehicula enim convallis consequat. Vestibulum quis tincidunt neque. Nam gravida ac odio ac ullamcorper.\n\nPraesent purus urna, accumsan ac tempus vel, luctus a neque. Quisque pharetra placerat turpis, non eleifend nibh egestas sed. Curabitur massa arcu, faucibus sit amet orci lacinia, suscipit fermentum diam. Aliquam erat volutpat. Nam viverra venenatis velit condimentum interdum. Donec ac placerat lorem. Duis sed massa dapibus, porttitor lacus nec, aliquam dui.\n\nAenean sed finibus tellus, tristique pretium nunc. In turpis dolor, consequat et elit eu, dictum scelerisque risus. Aliquam eget erat odio. Nulla facilisi. Pellentesque porttitor quam in elit lobortis sollicitudin. Donec venenatis, tortor ac ornare eleifend, risus velit ornare velit, nec aliquet massa ante quis odio. Praesent id convallis augue. Phasellus pretium est ligula, sit amet finibus arcu lobortis ac. Sed id vestibulum nulla. Integer in dui velit. Aenean iaculis porttitor porttitor. Curabitur sed eleifend mauris.\n\nCras et convallis est. Quisque id erat viverra, tempus urna non, pharetra nunc. Phasellus lacus elit, ultrices et diam sit amet, sollicitudin elementum libero. Aenean at venenatis lacus, eu placerat metus. Vivamus quis dapibus lorem. Fusce vel gravida magna. Donec ullamcorper diam ac dui tempus, ut pellentesque sapien tempor. Integer pharetra sapien sit amet pellentesque tincidunt. Donec semper eros vel metus imperdiet pulvinar.\n\nDonec sed mauris a ipsum lobortis eleifend. Duis ultricies dolor pharetra dolor varius accumsan. Maecenas commodo porta dapibus. In accumsan ultrices lorem maximus finibus. Aenean eu urna eros. Morbi viverra blandit eros vel porttitor. Praesent mattis nunc risus. Nulla euismod luctus purus quis egestas. Aliquam erat volutpat.\n\nMauris vel fringilla quam, vitae vehicula est. Pellentesque scelerisque, massa vel accumsan dictum, metus nisi hendrerit nisl, sed pretium diam mauris in mauris. Aliquam non gravida risus. Interdum et malesuada fames ac ante ipsum primis in faucibus. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Aliquam luctus tincidunt libero vitae mollis. Suspendisse pretium sapien semper, lobortis nibh sed, hendrerit justo. Maecenas vitae dui sit amet nibh venenatis laoreet in ut metus. Donec eu ultricies erat, vel interdum purus. Pellentesque ac eros in nunc tincidunt sagittis. Nam malesuada lectus ut erat pulvinar, interdum posuere ipsum mattis. Morbi varius odio ac convallis egestas. Fusce congue a eros non luctus.\n\nCurabitur accumsan urna a vehicula tempor. Pellentesque non ligula id augue pellentesque venenatis nec eu ligula. Ut eget mattis dolor. Proin nisi mi, pharetra quis finibus in, sagittis vitae orci. Suspendisse potenti. Mauris non vulputate mi. Fusce vulputate sollicitudin nisi, non viverra sapien cursus laoreet. Aenean in ante nibh. Curabitur tincidunt sed risus quis porttitor. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae;\n\nDuis dictum condimentum ante. Integer ac nunc et ante laoreet mollis. Duis elementum ipsum est, eget ultricies nulla pulvinar in. Sed condimentum hendrerit pretium. Donec lorem lorem, congue a enim imperdiet, lacinia feugiat quam. Cras viverra ornare lectus vitae viverra. Proin venenatis nibh a nisl tempor fermentum. Duis volutpat lacus ut eros dapibus ultrices. Vestibulum a dignissim turpis. Praesent suscipit convallis pharetra. Duis nisi mauris, aliquet ac sollicitudin sit amet, molestie id velit. Curabitur posuere a est eu vestibulum. Curabitur vestibulum feugiat finibus. Duis fermentum fringilla vestibulum.\n\nSuspendisse finibus, tellus id malesuada commodo, dolor augue venenatis neque, ullamcorper consectetur tellus libero at metus. Nulla id interdum ante. Interdum et malesuada fames ac ante ipsum primis in faucibus. Mauris varius vulputate lacinia. Maecenas eget nisl maximus, maximus nunc ac, feugiat est. Nam sed tincidunt ex, ut condimentum ex. Morbi laoreet pretium arcu, eu lacinia velit pulvinar sed.\n\nIn aliquet nibh nec pharetra eleifend. Donec ac fermentum est. Curabitur vitae urna magna. Donec non fringilla orci. Nam a massa porttitor, posuere nisl nec, vehicula leo. Duis condimentum ac nunc a mollis. Vestibulum ut facilisis ex. Nullam ut leo sed justo malesuada lobortis. Nunc elementum purus nec iaculis porta. Nullam rhoncus lectus ac bibendum suscipit. Proin non mauris eu ante luctus lobortis. Donec eget erat arcu. Mauris eu nisi dapibus, varius magna non, egestas enim. Vivamus auctor odio sit amet purus convallis maximus. Duis ut aliquam ex, ut ornare tellus. Mauris vestibulum accumsan nunc, vitae commodo mi consectetur dapibus.\n\nUt fermentum auctor eros at aliquam. Donec euismod iaculis nunc, in tristique enim molestie vitae. Nunc vitae augue iaculis, imperdiet risus a, scelerisque sem. Vivamus porttitor, elit non ultrices dignissim, orci dolor ornare justo, sed elementum arcu enim eget magna. Aenean accumsan urna vestibulum, posuere nisl eget, rutrum nisl. Quisque vitae mollis leo, in commodo purus. Donec eget dui porta, maximus felis eu, maximus risus. Sed scelerisque lectus turpis, nec tempor purus elementum ut. Sed interdum euismod orci, nec dapibus leo egestas eu. Mauris eu venenatis nisi. Praesent fringilla blandit nunc nec finibus. In fermentum eget urna nec egestas. Ut eu magna sollicitudin, lobortis turpis posuere, iaculis est. Quisque vitae lectus eu leo iaculis sollicitudin quis eget nunc. Proin sit amet est dictum, hendrerit erat vel, egestas lectus. Aenean varius mauris eget mollis aliquam.\n\nMorbi eget ante fermentum, venenatis ligula sed, dapibus quam. In nisi leo, accumsan at varius vitae, egestas sit amet enim. Mauris vitae bibendum orci. Donec eget ornare elit. Nunc imperdiet nisi et consectetur vestibulum. Donec eu dui non quam suscipit interdum. Phasellus id neque quis velit auctor molestie ac quis lacus. Sed vel lacinia urna.\n\nQuisque porttitor ultricies lectus vitae tempor. Sed quis auctor dolor. Nunc nec arcu dictum, viverra metus sit amet, ullamcorper diam. Sed condimentum, dui sed egestas lacinia, lacus sapien accumsan urna, in aliquet orci ante eu neque. Morbi at eleifend ex. Integer mollis nulla vitae lectus iaculis volutpat. Nulla eros justo, feugiat ac egestas ut, lobortis et nibh. Fusce at nibh porta, laoreet nibh sit amet, rhoncus felis. Nulla sed nisl id nulla condimentum tempor. Sed fringilla nunc nec dolor condimentum ultricies.\n\nDonec ultrices, sem vitae luctus pharetra, lacus sem sollicitudin odio, a rutrum velit lorem a mauris. Aliquam et enim tincidunt, varius turpis in, blandit ligula. Proin fringilla id eros ut pulvinar. Nulla laoreet venenatis metus. Nam interdum sit amet elit sit amet condimentum. Donec vel nisl sit amet lacus tempor consectetur vel sed sem. Maecenas interdum mi quis nulla ultrices, id tempus purus tempor. Duis suscipit odio mi, at viverra enim imperdiet a. Pellentesque malesuada libero lacinia luctus vulputate. Aliquam at pretium tortor. Donec molestie ante et consequat imperdiet. In ultricies fringilla enim eu tristique. Cras nulla orci, consequat vel tincidunt in, venenatis nec magna. Vestibulum fringilla consectetur pellentesque.\n\nPraesent ante massa, laoreet quis odio sed, tristique malesuada dui. Aenean tellus sapien, hendrerit sit amet dolor in, maximus sagittis mi. Donec varius augue non magna lobortis consequat. Quisque suscipit, erat ac pretium aliquet, arcu nunc auctor odio, et tristique mauris tortor nec felis. Sed semper erat aliquam scelerisque volutpat. Fusce vel purus cursus, cursus lectus in, tempus felis. Proin luctus consectetur est, nec placerat tellus congue nec. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Curabitur lacinia augue odio. Nam rutrum eros dignissim, scelerisque eros quis, tempor sem. Aliquam cursus mi eu erat pellentesque, vel feugiat tellus dictum. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.\n\nPraesent sed lobortis libero. Sed at convallis lacus, ut mattis purus. Mauris sit amet dolor neque. Duis a erat quis ex condimentum rutrum. Vivamus laoreet malesuada leo ullamcorper egestas. Maecenas rhoncus, sapien in venenatis tempor, mi sapien porttitor urna, non eleifend odio diam ac ante. Duis commodo leo sit amet eros bibendum, a faucibus enim iaculis. Duis tincidunt venenatis felis sit amet rhoncus. Fusce sollicitudin tortor eu diam maximus pulvinar. Phasellus sit amet eros efficitur, laoreet ante vitae, placerat nibh. Etiam laoreet libero sed massa semper ultrices. Praesent vestibulum, mi ut rutrum eleifend, nunc justo rhoncus enim, id posuere velit diam vel lorem. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Donec rutrum ante sit amet sem hendrerit convallis. Maecenas porttitor dignissim nisl, eu convallis ex iaculis id. Proin tempus suscipit dolor vel hendrerit.\n\nEtiam vehicula leo vel tortor luctus pharetra. Donec orci libero, suscipit et placerat ut, malesuada ut neque. Fusce et elit in arcu finibus bibendum. Aenean quis nunc a nisi dignissim blandit. Nunc non mauris mauris. Fusce eleifend mi non dui placerat, sit amet lobortis nibh facilisis. Quisque ultricies ante non varius scelerisque. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Etiam laoreet nunc diam, vel congue ante sodales nec.\n\nVivamus est felis, pulvinar sed nunc id, tempor convallis tortor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Morbi ultricies eros vitae tortor blandit aliquam. Nulla est orci, congue id ante non, convallis consequat diam. Etiam porttitor pharetra sapien non sagittis. In non eros at augue mollis molestie. Maecenas vestibulum gravida velit eget molestie. Maecenas vestibulum commodo dui non fermentum. Duis odio ipsum, accumsan nec nibh eu, vehicula dictum turpis. Cras fermentum tempor urna. Duis vehicula volutpat iaculis. Curabitur mollis sollicitudin nulla. Phasellus bibendum mollis risus vitae porttitor. Phasellus non tortor a mauris laoreet tincidunt. Nunc vel magna sed libero malesuada dignissim vitae nec turpis. Cras in magna suscipit, volutpat sapien sed, mollis mi.\n\nPellentesque eget neque vitae elit tincidunt vestibulum. Curabitur imperdiet rutrum metus, et suscipit mi finibus vel. Vivamus lacinia pretium metus. Donec eget velit eget tellus viverra consequat. Donec vel ex posuere, pellentesque justo non, porta ligula. Nulla dictum felis ut lectus aliquet viverra. Quisque pretium diam ut fringilla mollis. Maecenas gravida, magna pharetra consectetur porttitor, felis ante imperdiet diam, ut luctus quam lacus vitae lacus. Donec nec porta urna, vel tempus neque. Mauris id sem hendrerit, malesuada magna ac, accumsan mi. Proin tortor elit, auctor et nisl vitae, porttitor convallis eros. Duis auctor ultrices laoreet. Nulla facilisi. Proin ullamcorper egestas urna, in malesuada nisl sodales ut. Aliquam auctor leo sit amet faucibus molestie. In venenatis nibh a nisl pellentesque, sit amet blandit elit fermentum.\n\nMaecenas sollicitudin facilisis sem sit amet varius. Interdum et malesuada fames ac ante ipsum primis in faucibus. Curabitur est diam, consectetur sed massa nec, hendrerit lacinia purus. Proin mollis felis enim, at commodo ex dictum eu. Fusce at nisi vel erat euismod commodo quis at tortor. Aenean mauris orci, viverra non lobortis nec, tincidunt quis velit. Duis id tempus diam. Morbi nec risus congue, pulvinar velit in, iaculis lorem. Sed placerat scelerisque neque sit amet eleifend. In felis leo, mollis non varius in, placerat eu leo. Duis quis mattis diam. Sed in tristique sem.\n\nPhasellus placerat, est vitae hendrerit egestas, nibh libero ultricies leo, a blandit diam libero nec nibh. Vestibulum arcu tortor, placerat non ultricies a, faucibus sed mauris. Integer vestibulum leo felis, vitae feugiat lacus aliquet et. Proin dapibus risus ut nibh bibendum, eu volutpat tortor cursus. Nunc congue, mi in ornare efficitur, orci urna placerat arcu, eu luctus libero dui et turpis. Proin non metus vel turpis pulvinar elementum. Suspendisse potenti.\n\nSed dignissim ullamcorper nisl. Ut vitae augue nisi. Aliquam vulputate sagittis elit, et tincidunt diam hendrerit nec. Ut sapien justo, ultricies non lorem eget, convallis facilisis tellus. Fusce ultricies ornare leo sit amet sollicitudin. Duis pretium commodo purus, sit amet ullamcorper massa suscipit vel. Integer eget eros eros. Curabitur varius, mauris eget lacinia sollicitudin, nibh est facilisis leo, eget luctus leo orci quis urna. Sed malesuada faucibus augue at auctor. Nunc vestibulum rhoncus neque, nec eleifend est cursus ac. Quisque placerat posuere tempor. Nullam non turpis porta, ornare dui id, luctus ante. Quisque in congue massa. Duis vulputate ex ut eros tristique, et convallis quam scelerisque. Nunc mollis orci posuere nisi dictum, at laoreet ligula porta.\n\nEtiam dignissim in ante at suscipit. Vivamus malesuada laoreet erat vitae tincidunt. Donec eget est ac massa fringilla posuere et in urna. Sed blandit erat elementum urna placerat, at mattis turpis vestibulum. Morbi euismod ullamcorper ipsum, et ornare dolor convallis quis. Donec vel nisi enim. Etiam sit amet nunc risus. Nulla vitae metus tincidunt dui lacinia ultricies. Sed at purus et sem malesuada tempus eget at erat. Morbi at tellus semper, efficitur tellus a, facilisis elit.\n\nAenean metus nibh, hendrerit ac felis sed, porttitor imperdiet diam. Donec pretium malesuada purus, nec lacinia tortor feugiat id. Donec placerat, libero eu pharetra blandit, neque elit pretium turpis, sed mattis nunc neque id mi. Mauris viverra commodo placerat. Maecenas semper, magna et commodo accumsan, nunc odio gravida ipsum, nec fringilla libero arcu in mauris. Cras tristique, ipsum non eleifend ultrices, felis ante interdum ligula, ac fringilla velit nulla in purus. Interdum et malesuada fames ac ante ipsum primis in faucibus. Mauris vel malesuada dolor. Sed vitae velit velit. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Mauris feugiat, odio ac aliquet porta, lectus massa condimentum est, dictum sodales dui risus sit amet diam.\n\nProin aliquet non quam eu ultricies. Sed at enim ut orci consequat maximus in et purus. Maecenas a pellentesque velit, nec feugiat nisl. Pellentesque suscipit sem vel efficitur molestie. Donec non felis mattis, faucibus mi quis, porttitor augue. Aenean pulvinar elit in laoreet volutpat. Sed vel eros turpis. Nunc convallis, magna sed porttitor maximus, lorem arcu dapibus metus, eu ullamcorper metus mi quis tortor. Suspendisse quis pellentesque quam. Sed mi lacus, euismod sit amet purus sit amet, cursus consectetur ex. Phasellus venenatis blandit enim, id tincidunt magna tempus ac.\n\nSed sit amet pellentesque velit, ut consequat nisl. Maecenas nec pellentesque lectus. Phasellus fringilla augue vitae nisl vehicula pretium. Proin sit amet risus vitae quam accumsan dignissim. Praesent sagittis in turpis ac fringilla. Sed pretium, dolor in suscipit rhoncus, mi velit vestibulum orci, sed fringilla quam sem fringilla sapien. Ut vitae nisi metus. Pellentesque urna ipsum, pretium ut quam nec, rutrum tristique lorem. Etiam sed rhoncus diam. Donec vel commodo arcu.\n\nPraesent placerat tortor auctor mi posuere, sed posuere ligula sodales. Proin eu tristique sem. Pellentesque sit amet viverra neque. Donec lobortis elit nec cursus sodales. Morbi tincidunt, ligula a luctus eleifend, dolor enim hendrerit ex, eu scelerisque dui ligula at ipsum. Vivamus venenatis enim quam, accumsan auctor ipsum finibus id. Aliquam nisl felis, lobortis sed sem a, euismod accumsan ante. Fusce laoreet lacus convallis urna pretium, et fringilla erat maximus. Mauris eu felis eleifend leo lacinia consequat.\n\nQuisque ac ipsum eget est consequat molestie nec eget nulla. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. In egestas orci eu mi tristique, vitae tincidunt turpis varius. Suspendisse bibendum magna lorem. Cras luctus varius tempus. Proin ut velit eu neque mattis suscipit. Nam sollicitudin, mi mattis congue fringilla, enim felis rutrum odio, quis ullamcorper diam justo eu magna. Morbi nisl justo, elementum vitae hendrerit sed, lobortis vel nunc. Nunc tellus ipsum, elementum quis odio ac, pharetra commodo lectus. Quisque vel sem tristique, euismod enim a, luctus ante. Nulla luctus vel magna ac consectetur. Praesent eleifend turpis eu pellentesque ornare. Nulla convallis malesuada nulla, ac mattis sapien malesuada in. Etiam sagittis enim ut interdum hendrerit. In velit tellus, vehicula at tempus quis, posuere in dolor.\n\nAenean iaculis cursus tempus. Etiam lorem tortor, blandit varius metus quis, pulvinar faucibus nunc. Etiam laoreet venenatis eros in aliquet. Suspendisse sodales ante eget efficitur faucibus. Nunc molestie viverra velit, at imperdiet quam tristique vel. Curabitur nisi tellus, aliquet in euismod in, viverra nec lorem. Mauris mollis non massa vitae gravida. Cras nec dictum orci, sed cursus elit. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Sed quis lorem ipsum. Aliquam lectus tortor, posuere in eros sit amet, volutpat facilisis arcu. Aliquam eu ante id est venenatis ullamcorper. Nulla facilisi.\n\nAliquam condimentum id nunc eget tristique. Vivamus sagittis consectetur magna vel convallis. Fusce purus erat, elementum eget risus vitae, feugiat faucibus leo. Vestibulum rutrum odio at tincidunt sollicitudin. Maecenas a dictum nisi. Etiam condimentum justo neque, in accumsan diam pharetra nec. Suspendisse sollicitudin, arcu eu blandit gravida, ex odio malesuada nisi, vel feugiat magna neque id velit. Duis cursus enim congue convallis tincidunt. Ut vulputate sit amet dolor vel volutpat. Donec et aliquam turpis, eu malesuada lacus. Quisque id congue eros.\n\nNam sagittis enim elit, vitae viverra est posuere a. Duis fermentum, elit nec malesuada suscipit, urna nulla tincidunt leo, vitae tempus orci est sed justo. Pellentesque a eros hendrerit, bibendum mauris ac, imperdiet ligula. Sed semper luctus vehicula. Curabitur rutrum tortor nec nisl vulputate ultrices. Etiam turpis neque, efficitur id suscipit eu, efficitur ac nisi. Aenean sit amet augue semper, accumsan dui ut, pharetra nulla. Donec varius blandit venenatis. Donec non nunc nisi. Pellentesque sagittis sapien tellus, a tristique est ullamcorper faucibus. Sed ut sollicitudin massa, sed dignissim diam. Aenean tincidunt tincidunt ipsum, suscipit laoreet tortor dignissim eu. Proin pulvinar augue eu tellus mollis varius.\n\nDuis sem ligula, posuere eu malesuada sit amet, scelerisque vitae turpis. Aenean et sodales purus. Phasellus tempor vitae tellus fringilla maximus. Mauris augue augue, placerat sit amet libero vitae, finibus lobortis tortor. Mauris finibus eleifend finibus. In vitae rhoncus lorem, quis pellentesque urna. Nunc sed cursus erat. Fusce lobortis leo non est suscipit vehicula. Quisque dapibus lacus massa, ac dapibus tortor porttitor eget. Aenean consequat mollis massa, at commodo nisi imperdiet ultricies. Sed quis orci nibh. Mauris hendrerit consequat leo. Integer nec viverra sapien, vel aliquet sem. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae;\n\nFusce malesuada ligula non dui sollicitudin molestie. Donec nulla ligula, auctor ut maximus ac, ultrices a tortor. Proin tempor ipsum vitae risus tempor, eu lobortis elit viverra. Ut feugiat nibh sed ornare laoreet. Donec lobortis mollis nunc sit amet porttitor. Morbi eleifend tortor metus. Pellentesque volutpat efficitur nisl quis suscipit.\n\nSed dapibus purus ut eleifend vulputate. Suspendisse potenti. Sed ultrices mi quis ante aliquam condimentum. Fusce laoreet vestibulum elit, et porttitor eros laoreet sit amet. Nullam non efficitur ex. Praesent feugiat tempus turpis, in euismod nulla. Vestibulum aliquet nulla eget ante commodo, laoreet fringilla sem facilisis. Aliquam nec finibus dui. Vivamus quis purus erat. Suspendisse imperdiet lectus sit amet metus facilisis, eu auctor dui pulvinar. Sed nec sem vitae augue laoreet tempus eget sed mauris. Praesent vel ipsum augue.\n\nPhasellus iaculis nunc ac tellus consequat suscipit. Vivamus ac vehicula diam. Suspendisse sem lacus, vehicula in risus sit amet, faucibus sodales velit. Morbi molestie viverra elit ut luctus. Cras at faucibus orci, quis viverra nibh. Aenean luctus varius tortor eget vehicula. Pellentesque luctus interdum ligula, ut pharetra purus tempor eu. Nulla ut quam quam. Duis eget odio pretium, accumsan ex in, tristique massa. Morbi sed ipsum aliquet, eleifend nisl non, ullamcorper lacus. Quisque malesuada tincidunt blandit. Phasellus non turpis sit amet purus dapibus venenatis. Mauris convallis, augue a elementum iaculis, eros odio condimentum eros, quis ultricies dui massa eu velit. Nullam ac diam velit.\n\nMauris ut sollicitudin leo. Etiam bibendum, orci sit amet cursus pellentesque, risus nisi tempus leo, commodo suscipit diam sapien non justo. Sed pulvinar est ac bibendum placerat. Duis non turpis purus. In at neque ac lorem venenatis tincidunt in in ex. Proin nec cursus neque. Aliquam lorem orci, viverra vitae mattis eget, congue a ligula. Sed imperdiet sapien ut urna tempor, quis lacinia metus mattis. Aliquam placerat, libero eu malesuada volutpat, ipsum purus suscipit sapien, at condimentum urna lectus at augue. In ut leo malesuada, imperdiet lectus id, vulputate purus. Donec consectetur accumsan lacinia.\n\nVivamus egestas nunc sit amet odio molestie, ut sodales sem consequat. Ut euismod mauris in orci ultricies tempor. Pellentesque at nunc vitae sapien pellentesque tempor sed et quam. In quis sollicitudin sem. Curabitur posuere egestas risus, quis porta sapien elementum a. Sed ipsum nunc, condimentum ac magna non, tempor imperdiet sapien. Suspendisse sagittis tortor ac ante imperdiet, ac vestibulum quam rutrum. Sed eget elementum lacus, sit amet accumsan nulla. Donec rhoncus posuere mauris eget varius. Curabitur ultricies, sem a aliquam ultricies, arcu ipsum mattis nunc, non rhoncus nunc risus non lorem. Duis in est diam. Integer nec ornare velit.\n\nSed fermentum condimentum tempus. In sodales velit ligula. Sed faucibus urna sit amet iaculis mollis. Aliquam eu diam ac dui fermentum tristique vitae vitae enim. Integer ultrices consectetur tellus vel ultricies. Cras varius eros et nisl fermentum semper sit amet id ante. Maecenas tempus est vel purus aliquet, ac varius felis placerat. Suspendisse eget sodales sapien. Vivamus vitae est eu ligula ultricies ullamcorper. In tincidunt, massa sed viverra sollicitudin, diam elit dignissim mauris, nec tempor nisl diam sed eros. Pellentesque vel pellentesque sem. Curabitur tristique libero quis dapibus cursus. Sed interdum vulputate porta.\n\nAenean vel tortor at nibh cursus porttitor. Aliquam ullamcorper viverra erat maximus vestibulum. Proin aliquet, nunc et faucibus viverra, ante eros lacinia ligula, nec tincidunt elit erat non arcu. Integer fermentum eros ac orci bibendum euismod sit amet varius risus. Curabitur ullamcorper interdum finibus. Pellentesque vel magna sit amet mauris posuere aliquam et quis mauris. Quisque rutrum eros cursus dictum consectetur. Nulla auctor quam a orci pretium scelerisque. Suspendisse tortor nisi, scelerisque quis magna nec, fringilla congue arcu. Aenean vitae tellus vitae mi laoreet scelerisque. Suspendisse tempor dui ac consectetur gravida. Curabitur in rutrum dolor, ut sodales risus. Morbi pharetra, tortor id sollicitudin sodales, massa sem iaculis erat, ullamcorper posuere ex sem quis mauris. Pellentesque et luctus magna. Cras tellus justo, semper a vulputate euismod, molestie et erat.\n\nNam sit amet convallis justo. Ut dapibus dolor a ultrices pretium. Nam lobortis volutpat mollis. Phasellus laoreet placerat porta. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Cras in lacinia velit. Donec congue tortor nec purus tempor consequat. Pellentesque et pharetra sapien. Nam orci sem, facilisis non interdum sit amet, bibendum id risus. Pellentesque vitae finibus quam, vitae mollis lectus. Phasellus mollis rutrum ipsum, ut ultrices elit. Integer ligula purus, interdum ut urna eget, consectetur sagittis arcu. Ut maximus blandit commodo.\n\nUt libero nisl, lacinia et ligula ut, auctor faucibus nulla. Integer non elementum elit, vel rutrum mauris. Nulla facilisi. Etiam scelerisque nisl a urna fringilla, vel placerat risus molestie. Pellentesque bibendum elit nunc, sed lobortis erat facilisis nec. Quisque vitae lectus vel tortor dignissim vulputate ut sed eros. Donec quis lacinia dui. Interdum et malesuada fames ac ante ipsum primis in faucibus. Vestibulum tincidunt neque quis urna suscipit vestibulum. In vitae elementum mi.\n\nPraesent congue leo ac purus viverra, ac convallis nisi iaculis. Proin ullamcorper semper lectus. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Aliquam egestas ligula at eleifend ultricies. Cras in neque eget dui elementum viverra sed a leo. Nulla fermentum sagittis dolor vitae sagittis. Proin ultricies mi enim, non tincidunt justo rutrum non. Phasellus at ornare metus. Nunc dignissim consectetur arcu quis rutrum. Sed accumsan ligula id ipsum ullamcorper, quis.\n</div>\n</div>\n',host:Pe,containerParams:{width:"612px",height:"800px"}}),Ae=new i.CSSEffect({animatedAttrs:{top:"-7000px"}},{selector:".test",duration:1e4});Me.addIncident(Ae,0),window.player=new Se({clip:Me,volume:0,speed:1,pointerEvents:!0,type:"scroller",maxScrollStorage:100})},5089:(e,t,n)=>{var i=n(2086),r=n(930),s=n(9268),a=i.TypeError;e.exports=function(e){if(r(e))return e;throw a(s(e)+" is not a function")}},1378:(e,t,n)=>{var i=n(2086),r=n(930),s=i.String,a=i.TypeError;e.exports=function(e){if("object"==typeof e||r(e))return e;throw a("Can't set "+s(e)+" as a prototype")}},8669:(e,t,n)=>{var i=n(211),r=n(4710),s=n(7826),a=i("unscopables"),o=Array.prototype;null==o[a]&&s.f(o,a,{configurable:!0,value:r(null)}),e.exports=function(e){o[a][e]=!0}},9966:(e,t,n)=>{"use strict";var i=n(3448).charAt;e.exports=function(e,t,n){return t+(n?i(e,t).length:1)}},6112:(e,t,n)=>{var i=n(2086),r=n(8759),s=i.String,a=i.TypeError;e.exports=function(e){if(r(e))return e;throw a(s(e)+" is not an object")}},1984:(e,t,n)=>{"use strict";var i=n(8062).forEach,r=n(2802)("forEach");e.exports=r?[].forEach:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}},6198:(e,t,n)=>{var i=n(4088),r=n(7740),s=n(2871),a=function(e){return function(t,n,a){var o,u=i(t),l=s(u),c=r(a,l);if(e&&n!=n){for(;l>c;)if((o=u[c++])!=o)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},8062:(e,t,n)=>{var i=n(8516),r=n(8240),s=n(5974),a=n(3060),o=n(2871),u=n(5574),l=r([].push),c=function(e){var t=1==e,n=2==e,r=3==e,c=4==e,p=6==e,d=7==e,h=5==e||p;return function(m,f,v,g){for(var y,b,x=a(m),k=s(x),w=i(f,v),C=o(k),I=0,E=g||u,S=t?E(m,C):n||d?E(m,0):void 0;C>I;I++)if((h||I in k)&&(b=w(y=k[I],I,x),e))if(t)S[I]=b;else if(b)switch(e){case 3:return!0;case 5:return y;case 6:return I;case 2:l(S,y)}else switch(e){case 4:return!1;case 7:l(S,y)}return p?-1:r||c?c:S}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},9955:(e,t,n)=>{var i=n(3677),r=n(211),s=n(1448),a=r("species");e.exports=function(e){return s>=51||!i((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},2802:(e,t,n)=>{"use strict";var i=n(3677);e.exports=function(e,t){var n=[][e];return!!n&&i((function(){n.call(null,t||function(){throw 1},1)}))}},3329:(e,t,n)=>{var i=n(2086),r=n(7740),s=n(2871),a=n(9720),o=i.Array,u=Math.max;e.exports=function(e,t,n){for(var i=s(e),l=r(t,i),c=r(void 0===n?i:n,i),p=o(u(c-l,0)),d=0;l<c;l++,d++)a(p,d,e[l]);return p.length=d,p}},745:(e,t,n)=>{var i=n(8240);e.exports=i([].slice)},1147:(e,t,n)=>{var i=n(3329),r=Math.floor,s=function(e,t){var n=e.length,u=r(n/2);return n<8?a(e,t):o(e,s(i(e,0,u),t),s(i(e,u),t),t)},a=function(e,t){for(var n,i,r=e.length,s=1;s<r;){for(i=s,n=e[s];i&&t(e[i-1],n)>0;)e[i]=e[--i];i!==s++&&(e[i]=n)}return e},o=function(e,t,n,i){for(var r=t.length,s=n.length,a=0,o=0;a<r||o<s;)e[a+o]=a<r&&o<s?i(t[a],n[o])<=0?t[a++]:n[o++]:a<r?t[a++]:n[o++];return e};e.exports=s},8789:(e,t,n)=>{var i=n(2086),r=n(6526),s=n(1956),a=n(8759),o=n(211)("species"),u=i.Array;e.exports=function(e){var t;return r(e)&&(t=e.constructor,(s(t)&&(t===u||r(t.prototype))||a(t)&&null===(t=t[o]))&&(t=void 0)),void 0===t?u:t}},5574:(e,t,n)=>{var i=n(8789);e.exports=function(e,t){return new(i(e))(0===t?0:t)}},2306:(e,t,n)=>{var i=n(8240),r=i({}.toString),s=i("".slice);e.exports=function(e){return s(r(e),8,-1)}},375:(e,t,n)=>{var i=n(2086),r=n(2371),s=n(930),a=n(2306),o=n(211)("toStringTag"),u=i.Object,l="Arguments"==a(function(){return arguments}());e.exports=r?a:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=u(e),o))?n:l?a(t):"Object"==(i=a(t))&&s(t.callee)?"Arguments":i}},8474:(e,t,n)=>{var i=n(9606),r=n(6095),s=n(4399),a=n(7826);e.exports=function(e,t){for(var n=r(t),o=a.f,u=s.f,l=0;l<n.length;l++){var c=n[l];i(e,c)||o(e,c,u(t,c))}}},5469:(e,t,n)=>{var i=n(211)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,"/./"[e](t)}catch(e){}}return!1}},7209:(e,t,n)=>{var i=n(3677);e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},471:(e,t,n)=>{"use strict";var i=n(3083).IteratorPrototype,r=n(4710),s=n(5736),a=n(914),o=n(7719),u=function(){return this};e.exports=function(e,t,n){var l=t+" Iterator";return e.prototype=r(i,{next:s(1,n)}),a(e,l,!1,!0),o[l]=u,e}},2585:(e,t,n)=>{var i=n(5283),r=n(7826),s=n(5736);e.exports=i?function(e,t,n){return r.f(e,t,s(1,n))}:function(e,t,n){return e[t]=n,e}},5736:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},9720:(e,t,n)=>{"use strict";var i=n(2258),r=n(7826),s=n(5736);e.exports=function(e,t,n){var a=i(t);a in e?r.f(e,a,s(0,n)):e[a]=n}},8432:(e,t,n)=>{"use strict";var i=n(1695),r=n(9413),s=n(3296),a=n(4398),o=n(930),u=n(471),l=n(2130),c=n(7530),p=n(914),d=n(2585),h=n(1007),m=n(211),f=n(7719),v=n(3083),g=a.PROPER,y=a.CONFIGURABLE,b=v.IteratorPrototype,x=v.BUGGY_SAFARI_ITERATORS,k=m("iterator"),w="keys",C="values",I="entries",E=function(){return this};e.exports=function(e,t,n,a,m,v,S){u(n,t,a);var P,M,A,O=function(e){if(e===m&&q)return q;if(!x&&e in _)return _[e];switch(e){case w:case C:case I:return function(){return new n(this,e)}}return function(){return new n(this)}},T=t+" Iterator",D=!1,_=e.prototype,B=_[k]||_["@@iterator"]||m&&_[m],q=!x&&B||O(m),V="Array"==t&&_.entries||B;if(V&&(P=l(V.call(new e)))!==Object.prototype&&P.next&&(s||l(P)===b||(c?c(P,b):o(P[k])||h(P,k,E)),p(P,T,!0,!0),s&&(f[T]=E)),g&&m==C&&B&&B.name!==C&&(!s&&y?d(_,"name",C):(D=!0,q=function(){return r(B,this)})),m)if(M={values:O(C),keys:v?q:O(w),entries:O(I)},S)for(A in M)(x||D||!(A in _))&&h(_,A,M[A]);else i({target:t,proto:!0,forced:x||D},M);return s&&!S||_[k]===q||h(_,k,q,{name:m}),f[t]=q,M}},4145:(e,t,n)=>{var i=n(9775),r=n(9606),s=n(9251),a=n(7826).f;e.exports=function(e){var t=i.Symbol||(i.Symbol={});r(t,e)||a(t,e,{value:s.f(e)})}},5283:(e,t,n)=>{var i=n(3677);e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},821:(e,t,n)=>{var i=n(2086),r=n(8759),s=i.document,a=r(s)&&r(s.createElement);e.exports=function(e){return a?s.createElement(e):{}}},933:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},3526:(e,t,n)=>{var i=n(821)("span").classList,r=i&&i.constructor&&i.constructor.prototype;e.exports=r===Object.prototype?void 0:r},1799:(e,t,n)=>{var i=n(4999).match(/firefox\/(\d+)/i);e.exports=!!i&&+i[1]},4172:(e,t,n)=>{var i=n(4999);e.exports=/MSIE|Trident/.test(i)},4999:(e,t,n)=>{var i=n(563);e.exports=i("navigator","userAgent")||""},1448:(e,t,n)=>{var i,r,s=n(2086),a=n(4999),o=s.process,u=s.Deno,l=o&&o.versions||u&&u.version,c=l&&l.v8;c&&(r=(i=c.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!r&&a&&(!(i=a.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=a.match(/Chrome\/(\d+)/))&&(r=+i[1]),e.exports=r},9804:(e,t,n)=>{var i=n(4999).match(/AppleWebKit\/(\d+)\./);e.exports=!!i&&+i[1]},8684:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1695:(e,t,n)=>{var i=n(2086),r=n(4399).f,s=n(2585),a=n(1007),o=n(3648),u=n(8474),l=n(7189);e.exports=function(e,t){var n,c,p,d,h,m=e.target,f=e.global,v=e.stat;if(n=f?i:v?i[m]||o(m,{}):(i[m]||{}).prototype)for(c in t){if(d=t[c],p=e.noTargetGet?(h=r(n,c))&&h.value:n[c],!l(f?c:m+(v?".":"#")+c,e.forced)&&void 0!==p){if(typeof d==typeof p)continue;u(d,p)}(e.sham||p&&p.sham)&&s(d,"sham",!0),a(n,c,d,e)}}},3677:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},2331:(e,t,n)=>{"use strict";n(2077);var i=n(8240),r=n(1007),s=n(4861),a=n(3677),o=n(211),u=n(2585),l=o("species"),c=RegExp.prototype;e.exports=function(e,t,n,p){var d=o(e),h=!a((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),m=h&&!a((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[l]=function(){return n},n.flags="",n[d]=/./[d]),n.exec=function(){return t=!0,null},n[d](""),!t}));if(!h||!m||n){var f=i(/./[d]),v=t(d,""[e],(function(e,t,n,r,a){var o=i(e),u=t.exec;return u===s||u===c.exec?h&&!a?{done:!0,value:f(t,n,r)}:{done:!0,value:o(n,t,r)}:{done:!1}}));r(String.prototype,e,v[0]),r(c,d,v[1])}p&&u(c[d],"sham",!0)}},7258:e=>{var t=Function.prototype,n=t.apply,i=t.bind,r=t.call;e.exports="object"==typeof Reflect&&Reflect.apply||(i?r.bind(n):function(){return r.apply(n,arguments)})},8516:(e,t,n)=>{var i=n(8240),r=n(5089),s=i(i.bind);e.exports=function(e,t){return r(e),void 0===t?e:s?s(e,t):function(){return e.apply(t,arguments)}}},9413:e=>{var t=Function.prototype.call;e.exports=t.bind?t.bind(t):function(){return t.apply(t,arguments)}},4398:(e,t,n)=>{var i=n(5283),r=n(9606),s=Function.prototype,a=i&&Object.getOwnPropertyDescriptor,o=r(s,"name"),u=o&&"something"===function(){}.name,l=o&&(!i||i&&a(s,"name").configurable);e.exports={EXISTS:o,PROPER:u,CONFIGURABLE:l}},8240:e=>{var t=Function.prototype,n=t.bind,i=t.call,r=n&&n.bind(i);e.exports=n?function(e){return e&&r(i,e)}:function(e){return e&&function(){return i.apply(e,arguments)}}},563:(e,t,n)=>{var i=n(2086),r=n(930),s=function(e){return r(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?s(i[e]):i[e]&&i[e][t]}},2964:(e,t,n)=>{var i=n(5089);e.exports=function(e,t){var n=e[t];return null==n?void 0:i(n)}},8509:(e,t,n)=>{var i=n(8240),r=n(3060),s=Math.floor,a=i("".charAt),o=i("".replace),u=i("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,c=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,i,p,d){var h=n+e.length,m=i.length,f=c;return void 0!==p&&(p=r(p),f=l),o(d,f,(function(r,o){var l;switch(a(o,0)){case"$":return"$";case"&":return e;case"`":return u(t,0,n);case"'":return u(t,h);case"<":l=p[u(o,1,-1)];break;default:var c=+o;if(0===c)return r;if(c>m){var d=s(c/10);return 0===d?r:d<=m?void 0===i[d-1]?a(o,1):i[d-1]+a(o,1):r}l=i[c-1]}return void 0===l?"":l}))}},2086:(e,t,n)=>{var i=function(e){return e&&e.Math==Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},9606:(e,t,n)=>{var i=n(8240),r=n(3060),s=i({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return s(r(e),t)}},7153:e=>{e.exports={}},5963:(e,t,n)=>{var i=n(563);e.exports=i("document","documentElement")},6761:(e,t,n)=>{var i=n(5283),r=n(3677),s=n(821);e.exports=!i&&!r((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},5974:(e,t,n)=>{var i=n(2086),r=n(8240),s=n(3677),a=n(2306),o=i.Object,u=r("".split);e.exports=s((function(){return!o("z").propertyIsEnumerable(0)}))?function(e){return"String"==a(e)?u(e,""):o(e)}:o},5070:(e,t,n)=>{var i=n(930),r=n(8759),s=n(7530);e.exports=function(e,t,n){var a,o;return s&&i(a=t.constructor)&&a!==n&&r(o=a.prototype)&&o!==n.prototype&&s(e,o),e}},9277:(e,t,n)=>{var i=n(8240),r=n(930),s=n(4489),a=i(Function.toString);r(s.inspectSource)||(s.inspectSource=function(e){return a(e)}),e.exports=s.inspectSource},3278:(e,t,n)=>{var i,r,s,a=n(9316),o=n(2086),u=n(8240),l=n(8759),c=n(2585),p=n(9606),d=n(4489),h=n(8944),m=n(7153),f="Object already initialized",v=o.TypeError,g=o.WeakMap;if(a||d.state){var y=d.state||(d.state=new g),b=u(y.get),x=u(y.has),k=u(y.set);i=function(e,t){if(x(y,e))throw new v(f);return t.facade=e,k(y,e,t),t},r=function(e){return b(y,e)||{}},s=function(e){return x(y,e)}}else{var w=h("state");m[w]=!0,i=function(e,t){if(p(e,w))throw new v(f);return t.facade=e,c(e,w,t),t},r=function(e){return p(e,w)?e[w]:{}},s=function(e){return p(e,w)}}e.exports={set:i,get:r,has:s,enforce:function(e){return s(e)?r(e):i(e,{})},getterFor:function(e){return function(t){var n;if(!l(t)||(n=r(t)).type!==e)throw v("Incompatible receiver, "+e+" required");return n}}}},6526:(e,t,n)=>{var i=n(2306);e.exports=Array.isArray||function(e){return"Array"==i(e)}},930:e=>{e.exports=function(e){return"function"==typeof e}},1956:(e,t,n)=>{var i=n(8240),r=n(3677),s=n(930),a=n(375),o=n(563),u=n(9277),l=function(){},c=[],p=o("Reflect","construct"),d=/^\s*(?:class|function)\b/,h=i(d.exec),m=!d.exec(l),f=function(e){if(!s(e))return!1;try{return p(l,c,e),!0}catch(e){return!1}};e.exports=!p||r((function(){var e;return f(f.call)||!f(Object)||!f((function(){e=!0}))||e}))?function(e){if(!s(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return m||!!h(d,u(e))}:f},7189:(e,t,n)=>{var i=n(3677),r=n(930),s=/#|\.prototype\./,a=function(e,t){var n=u[o(e)];return n==c||n!=l&&(r(t)?i(t):!!t)},o=a.normalize=function(e){return String(e).replace(s,".").toLowerCase()},u=a.data={},l=a.NATIVE="N",c=a.POLYFILL="P";e.exports=a},8759:(e,t,n)=>{var i=n(930);e.exports=function(e){return"object"==typeof e?null!==e:i(e)}},3296:e=>{e.exports=!1},7994:(e,t,n)=>{var i=n(8759),r=n(2306),s=n(211)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==r(e))}},2071:(e,t,n)=>{var i=n(2086),r=n(563),s=n(930),a=n(5516),o=n(1876),u=i.Object;e.exports=o?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return s(t)&&a(t.prototype,u(e))}},3083:(e,t,n)=>{"use strict";var i,r,s,a=n(3677),o=n(930),u=n(4710),l=n(2130),c=n(1007),p=n(211),d=n(3296),h=p("iterator"),m=!1;[].keys&&("next"in(s=[].keys())?(r=l(l(s)))!==Object.prototype&&(i=r):m=!0),null==i||a((function(){var e={};return i[h].call(e)!==e}))?i={}:d&&(i=u(i)),o(i[h])||c(i,h,(function(){return this})),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:m}},7719:e=>{e.exports={}},2871:(e,t,n)=>{var i=n(4005);e.exports=function(e){return i(e.length)}},3193:(e,t,n)=>{var i=n(1448),r=n(3677);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},9316:(e,t,n)=>{var i=n(2086),r=n(930),s=n(9277),a=i.WeakMap;e.exports=r(a)&&/native code/.test(s(a))},7725:(e,t,n)=>{var i=n(2086),r=n(7994),s=i.TypeError;e.exports=function(e){if(r(e))throw s("The method doesn't accept regular expressions");return e}},4710:(e,t,n)=>{var i,r=n(6112),s=n(7711),a=n(8684),o=n(7153),u=n(5963),l=n(821),c=n(8944)("IE_PROTO"),p=function(){},d=function(e){return"<script>"+e+"<\/script>"},h=function(e){e.write(d("")),e.close();var t=e.parentWindow.Object;return e=null,t},m=function(){try{i=new ActiveXObject("htmlfile")}catch(e){}var e,t;m="undefined"!=typeof document?document.domain&&i?h(i):((t=l("iframe")).style.display="none",u.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(d("document.F=Object")),e.close(),e.F):h(i);for(var n=a.length;n--;)delete m.prototype[a[n]];return m()};o[c]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(p.prototype=r(e),n=new p,p.prototype=null,n[c]=e):n=m(),void 0===t?n:s(n,t)}},7711:(e,t,n)=>{var i=n(5283),r=n(7826),s=n(6112),a=n(4088),o=n(8779);e.exports=i?Object.defineProperties:function(e,t){s(e);for(var n,i=a(t),u=o(t),l=u.length,c=0;l>c;)r.f(e,n=u[c++],i[n]);return e}},7826:(e,t,n)=>{var i=n(2086),r=n(5283),s=n(6761),a=n(6112),o=n(2258),u=i.TypeError,l=Object.defineProperty;t.f=r?l:function(e,t,n){if(a(e),t=o(t),a(n),s)try{return l(e,t,n)}catch(e){}if("get"in n||"set"in n)throw u("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},4399:(e,t,n)=>{var i=n(5283),r=n(9413),s=n(7446),a=n(5736),o=n(4088),u=n(2258),l=n(9606),c=n(6761),p=Object.getOwnPropertyDescriptor;t.f=i?p:function(e,t){if(e=o(e),t=u(t),c)try{return p(e,t)}catch(e){}if(l(e,t))return a(!r(s.f,e,t),e[t])}},3226:(e,t,n)=>{var i=n(2306),r=n(4088),s=n(62).f,a=n(3329),o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return o&&"Window"==i(e)?function(e){try{return s(e)}catch(e){return a(o)}}(e):s(r(e))}},62:(e,t,n)=>{var i=n(1352),r=n(8684).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},6952:(e,t)=>{t.f=Object.getOwnPropertySymbols},2130:(e,t,n)=>{var i=n(2086),r=n(9606),s=n(930),a=n(3060),o=n(8944),u=n(7209),l=o("IE_PROTO"),c=i.Object,p=c.prototype;e.exports=u?c.getPrototypeOf:function(e){var t=a(e);if(r(t,l))return t[l];var n=t.constructor;return s(n)&&t instanceof n?n.prototype:t instanceof c?p:null}},5516:(e,t,n)=>{var i=n(8240);e.exports=i({}.isPrototypeOf)},1352:(e,t,n)=>{var i=n(8240),r=n(9606),s=n(4088),a=n(6198).indexOf,o=n(7153),u=i([].push);e.exports=function(e,t){var n,i=s(e),l=0,c=[];for(n in i)!r(o,n)&&r(i,n)&&u(c,n);for(;t.length>l;)r(i,n=t[l++])&&(~a(c,n)||u(c,n));return c}},8779:(e,t,n)=>{var i=n(1352),r=n(8684);e.exports=Object.keys||function(e){return i(e,r)}},7446:(e,t)=>{"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!n.call({1:2},1);t.f=r?function(e){var t=i(this,e);return!!t&&t.enumerable}:n},7530:(e,t,n)=>{var i=n(8240),r=n(6112),s=n(1378);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=i(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return r(n),s(i),t?e(n,i):n.__proto__=i,n}}():void 0)},999:(e,t,n)=>{"use strict";var i=n(2371),r=n(375);e.exports=i?{}.toString:function(){return"[object "+r(this)+"]"}},7999:(e,t,n)=>{var i=n(2086),r=n(9413),s=n(930),a=n(8759),o=i.TypeError;e.exports=function(e,t){var n,i;if("string"===t&&s(n=e.toString)&&!a(i=r(n,e)))return i;if(s(n=e.valueOf)&&!a(i=r(n,e)))return i;if("string"!==t&&s(n=e.toString)&&!a(i=r(n,e)))return i;throw o("Can't convert object to primitive value")}},6095:(e,t,n)=>{var i=n(563),r=n(8240),s=n(62),a=n(6952),o=n(6112),u=r([].concat);e.exports=i("Reflect","ownKeys")||function(e){var t=s.f(o(e)),n=a.f;return n?u(t,n(e)):t}},9775:(e,t,n)=>{var i=n(2086);e.exports=i},1007:(e,t,n)=>{var i=n(2086),r=n(930),s=n(9606),a=n(2585),o=n(3648),u=n(9277),l=n(3278),c=n(4398).CONFIGURABLE,p=l.get,d=l.enforce,h=String(String).split("String");(e.exports=function(e,t,n,u){var l,p=!!u&&!!u.unsafe,m=!!u&&!!u.enumerable,f=!!u&&!!u.noTargetGet,v=u&&void 0!==u.name?u.name:t;r(n)&&("Symbol("===String(v).slice(0,7)&&(v="["+String(v).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!s(n,"name")||c&&n.name!==v)&&a(n,"name",v),(l=d(n)).source||(l.source=h.join("string"==typeof v?v:""))),e!==i?(p?!f&&e[t]&&(m=!0):delete e[t],m?e[t]=n:a(e,t,n)):m?e[t]=n:o(t,n)})(Function.prototype,"toString",(function(){return r(this)&&p(this).source||u(this)}))},1189:(e,t,n)=>{var i=n(2086),r=n(9413),s=n(6112),a=n(930),o=n(2306),u=n(4861),l=i.TypeError;e.exports=function(e,t){var n=e.exec;if(a(n)){var i=r(n,e,t);return null!==i&&s(i),i}if("RegExp"===o(e))return r(u,e,t);throw l("RegExp#exec called on incompatible receiver")}},4861:(e,t,n)=>{"use strict";var i,r,s=n(9413),a=n(8240),o=n(4059),u=n(4276),l=n(4930),c=n(9197),p=n(4710),d=n(3278).get,h=n(2582),m=n(2910),f=c("native-string-replace",String.prototype.replace),v=RegExp.prototype.exec,g=v,y=a("".charAt),b=a("".indexOf),x=a("".replace),k=a("".slice),w=(r=/b*/g,s(v,i=/a/,"a"),s(v,r,"a"),0!==i.lastIndex||0!==r.lastIndex),C=l.BROKEN_CARET,I=void 0!==/()??/.exec("")[1];(w||I||C||h||m)&&(g=function(e){var t,n,i,r,a,l,c,h=this,m=d(h),E=o(e),S=m.raw;if(S)return S.lastIndex=h.lastIndex,t=s(g,S,E),h.lastIndex=S.lastIndex,t;var P=m.groups,M=C&&h.sticky,A=s(u,h),O=h.source,T=0,D=E;if(M&&(A=x(A,"y",""),-1===b(A,"g")&&(A+="g"),D=k(E,h.lastIndex),h.lastIndex>0&&(!h.multiline||h.multiline&&"\n"!==y(E,h.lastIndex-1))&&(O="(?: "+O+")",D=" "+D,T++),n=new RegExp("^(?:"+O+")",A)),I&&(n=new RegExp("^"+O+"$(?!\\s)",A)),w&&(i=h.lastIndex),r=s(v,M?n:h,D),M?r?(r.input=k(r.input,T),r[0]=k(r[0],T),r.index=h.lastIndex,h.lastIndex+=r[0].length):h.lastIndex=0:w&&r&&(h.lastIndex=h.global?r.index+r[0].length:i),I&&r&&r.length>1&&s(f,r[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(r[a]=void 0)})),r&&P)for(r.groups=l=p(null),a=0;a<P.length;a++)l[(c=P[a])[0]]=r[c[1]];return r}),e.exports=g},4276:(e,t,n)=>{"use strict";var i=n(6112);e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},4930:(e,t,n)=>{var i=n(3677),r=n(2086).RegExp,s=i((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),a=s||i((function(){return!r("a","y").sticky})),o=s||i((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:o,MISSED_STICKY:a,UNSUPPORTED_Y:s}},2582:(e,t,n)=>{var i=n(3677),r=n(2086).RegExp;e.exports=i((function(){var e=r(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},2910:(e,t,n)=>{var i=n(3677),r=n(2086).RegExp;e.exports=i((function(){var e=r("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},9586:(e,t,n)=>{var i=n(2086).TypeError;e.exports=function(e){if(null==e)throw i("Can't call method on "+e);return e}},3648:(e,t,n)=>{var i=n(2086),r=Object.defineProperty;e.exports=function(e,t){try{r(i,e,{value:t,configurable:!0,writable:!0})}catch(n){i[e]=t}return t}},7420:(e,t,n)=>{"use strict";var i=n(563),r=n(7826),s=n(211),a=n(5283),o=s("species");e.exports=function(e){var t=i(e),n=r.f;a&&t&&!t[o]&&n(t,o,{configurable:!0,get:function(){return this}})}},914:(e,t,n)=>{var i=n(7826).f,r=n(9606),s=n(211)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,s)&&i(e,s,{configurable:!0,value:t})}},8944:(e,t,n)=>{var i=n(9197),r=n(5422),s=i("keys");e.exports=function(e){return s[e]||(s[e]=r(e))}},4489:(e,t,n)=>{var i=n(2086),r=n(3648),s="__core-js_shared__",a=i[s]||r(s,{});e.exports=a},9197:(e,t,n)=>{var i=n(3296),r=n(4489);(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.19.2",mode:i?"pure":"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})},3448:(e,t,n)=>{var i=n(8240),r=n(9502),s=n(4059),a=n(9586),o=i("".charAt),u=i("".charCodeAt),l=i("".slice),c=function(e){return function(t,n){var i,c,p=s(a(t)),d=r(n),h=p.length;return d<0||d>=h?e?"":void 0:(i=u(p,d))<55296||i>56319||d+1===h||(c=u(p,d+1))<56320||c>57343?e?o(p,d):i:e?l(p,d,d+2):c-56320+(i-55296<<10)+65536}};e.exports={codeAt:c(!1),charAt:c(!0)}},8992:(e,t,n)=>{"use strict";var i=n(2086),r=n(9502),s=n(4059),a=n(9586),o=i.RangeError;e.exports=function(e){var t=s(a(this)),n="",i=r(e);if(i<0||i==1/0)throw o("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},4274:(e,t,n)=>{var i=n(4398).PROPER,r=n(3677),s=n(9439);e.exports=function(e){return r((function(){return!!s[e]()||""!==""[e]()||i&&s[e].name!==e}))}},4080:(e,t,n)=>{var i=n(8240),r=n(9586),s=n(4059),a=n(9439),o=i("".replace),u="["+a+"]",l=RegExp("^"+u+u+"*"),c=RegExp(u+u+"*$"),p=function(e){return function(t){var n=s(r(t));return 1&e&&(n=o(n,l,"")),2&e&&(n=o(n,c,"")),n}};e.exports={start:p(1),end:p(2),trim:p(3)}},5773:(e,t,n)=>{var i=n(8240);e.exports=i(1..valueOf)},7740:(e,t,n)=>{var i=n(9502),r=Math.max,s=Math.min;e.exports=function(e,t){var n=i(e);return n<0?r(n+t,0):s(n,t)}},4088:(e,t,n)=>{var i=n(5974),r=n(9586);e.exports=function(e){return i(r(e))}},9502:e=>{var t=Math.ceil,n=Math.floor;e.exports=function(e){var i=+e;return i!=i||0===i?0:(i>0?n:t)(i)}},4005:(e,t,n)=>{var i=n(9502),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},3060:(e,t,n)=>{var i=n(2086),r=n(9586),s=i.Object;e.exports=function(e){return s(r(e))}},1288:(e,t,n)=>{var i=n(2086),r=n(9413),s=n(8759),a=n(2071),o=n(2964),u=n(7999),l=n(211),c=i.TypeError,p=l("toPrimitive");e.exports=function(e,t){if(!s(e)||a(e))return e;var n,i=o(e,p);if(i){if(void 0===t&&(t="default"),n=r(i,e,t),!s(n)||a(n))return n;throw c("Can't convert object to primitive value")}return void 0===t&&(t="number"),u(e,t)}},2258:(e,t,n)=>{var i=n(1288),r=n(2071);e.exports=function(e){var t=i(e,"string");return r(t)?t:t+""}},2371:(e,t,n)=>{var i={};i[n(211)("toStringTag")]="z",e.exports="[object z]"===String(i)},4059:(e,t,n)=>{var i=n(2086),r=n(375),s=i.String;e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return s(e)}},9268:(e,t,n)=>{var i=n(2086).String;e.exports=function(e){try{return i(e)}catch(e){return"Object"}}},5422:(e,t,n)=>{var i=n(8240),r=0,s=Math.random(),a=i(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++r+s,36)}},1876:(e,t,n)=>{var i=n(3193);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},9251:(e,t,n)=>{var i=n(211);t.f=i},211:(e,t,n)=>{var i=n(2086),r=n(9197),s=n(9606),a=n(5422),o=n(3193),u=n(1876),l=r("wks"),c=i.Symbol,p=c&&c.for,d=u?c:c&&c.withoutSetter||a;e.exports=function(e){if(!s(l,e)||!o&&"string"!=typeof l[e]){var t="Symbol."+e;o&&s(c,e)?l[e]=c[e]:l[e]=u&&p?p(t):d(t)}return l[e]}},9439:e=>{e.exports="\t\n\v\f\r \u2028\u2029\ufeff"},3938:(e,t,n)=>{"use strict";var i=n(1695),r=n(2086),s=n(3677),a=n(6526),o=n(8759),u=n(3060),l=n(2871),c=n(9720),p=n(5574),d=n(9955),h=n(211),m=n(1448),f=h("isConcatSpreadable"),v=9007199254740991,g="Maximum allowed index exceeded",y=r.TypeError,b=m>=51||!s((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),x=d("concat"),k=function(e){if(!o(e))return!1;var t=e[f];return void 0!==t?!!t:a(e)};i({target:"Array",proto:!0,forced:!b||!x},{concat:function(e){var t,n,i,r,s,a=u(this),o=p(a,0),d=0;for(t=-1,i=arguments.length;t<i;t++)if(k(s=-1===t?a:arguments[t])){if(d+(r=l(s))>v)throw y(g);for(n=0;n<r;n++,d++)n in s&&c(o,d,s[n])}else{if(d>=v)throw y(g);c(o,d++,s)}return o.length=d,o}})},8010:(e,t,n)=>{"use strict";var i=n(1695),r=n(8062).filter;i({target:"Array",proto:!0,forced:!n(9955)("filter")},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},5623:(e,t,n)=>{"use strict";var i=n(1695),r=n(6198).includes,s=n(8669);i({target:"Array",proto:!0},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},5769:(e,t,n)=>{"use strict";var i=n(4088),r=n(8669),s=n(7719),a=n(3278),o=n(8432),u="Array Iterator",l=a.set,c=a.getterFor(u);e.exports=o(Array,"Array",(function(e,t){l(this,{type:u,target:i(e),index:0,kind:t})}),(function(){var e=c(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values"),s.Arguments=s.Array,r("keys"),r("values"),r("entries")},2410:(e,t,n)=>{"use strict";var i=n(1695),r=n(2086),s=n(6526),a=n(1956),o=n(8759),u=n(7740),l=n(2871),c=n(4088),p=n(9720),d=n(211),h=n(9955),m=n(745),f=h("slice"),v=d("species"),g=r.Array,y=Math.max;i({target:"Array",proto:!0,forced:!f},{slice:function(e,t){var n,i,r,d=c(this),h=l(d),f=u(e,h),b=u(void 0===t?h:t,h);if(s(d)&&(n=d.constructor,(a(n)&&(n===g||s(n.prototype))||o(n)&&null===(n=n[v]))&&(n=void 0),n===g||void 0===n))return m(d,f,b);for(i=new(void 0===n?g:n)(y(b-f,0)),r=0;f<b;f++,r++)f in d&&p(i,r,d[f]);return i.length=r,i}})},9217:(e,t,n)=>{"use strict";var i=n(1695),r=n(8240),s=n(5089),a=n(3060),o=n(2871),u=n(4059),l=n(3677),c=n(1147),p=n(2802),d=n(1799),h=n(4172),m=n(1448),f=n(9804),v=[],g=r(v.sort),y=r(v.push),b=l((function(){v.sort(void 0)})),x=l((function(){v.sort(null)})),k=p("sort"),w=!l((function(){if(m)return m<70;if(!(d&&d>3)){if(h)return!0;if(f)return f<603;var e,t,n,i,r="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)v.push({k:t+i,v:n})}for(v.sort((function(e,t){return t.v-e.v})),i=0;i<v.length;i++)t=v[i].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}}));i({target:"Array",proto:!0,forced:b||!x||!k||!w},{sort:function(e){void 0!==e&&s(e);var t=a(this);if(w)return void 0===e?g(t):g(t,e);var n,i,r=[],l=o(t);for(i=0;i<l;i++)i in t&&y(r,t[i]);for(c(r,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:u(t)>u(n)?1:-1}}(e)),n=r.length,i=0;i<n;)t[i]=r[i++];for(;i<l;)delete t[i++];return t}})},8217:(e,t,n)=>{"use strict";var i=n(1695),r=n(2086),s=n(7740),a=n(9502),o=n(2871),u=n(3060),l=n(5574),c=n(9720),p=n(9955)("splice"),d=r.TypeError,h=Math.max,m=Math.min,f=9007199254740991,v="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!p},{splice:function(e,t){var n,i,r,p,g,y,b=u(this),x=o(b),k=s(e,x),w=arguments.length;if(0===w?n=i=0:1===w?(n=0,i=x-k):(n=w-2,i=m(h(a(t),0),x-k)),x+n-i>f)throw d(v);for(r=l(b,i),p=0;p<i;p++)(g=k+p)in b&&c(r,p,b[g]);if(r.length=i,n<i){for(p=k;p<x-i;p++)y=p+n,(g=p+i)in b?b[y]=b[g]:delete b[y];for(p=x;p>x-i+n;p--)delete b[p-1]}else if(n>i)for(p=x-i;p>k;p--)y=p+n-1,(g=p+i-1)in b?b[y]=b[g]:delete b[y];for(p=0;p<n;p++)b[p+k]=arguments[p+2];return b.length=x-i+n,r}})},3352:(e,t,n)=>{var i=n(5283),r=n(4398).EXISTS,s=n(8240),a=n(7826).f,o=Function.prototype,u=s(o.toString),l=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,c=s(l.exec);i&&!r&&a(o,"name",{configurable:!0,get:function(){try{return c(l,u(this))[1]}catch(e){return""}}})},5735:(e,t,n)=>{var i=n(1695),r=n(2086),s=n(563),a=n(7258),o=n(8240),u=n(3677),l=r.Array,c=s("JSON","stringify"),p=o(/./.exec),d=o("".charAt),h=o("".charCodeAt),m=o("".replace),f=o(1..toString),v=/[\uD800-\uDFFF]/g,g=/^[\uD800-\uDBFF]$/,y=/^[\uDC00-\uDFFF]$/,b=function(e,t,n){var i=d(n,t-1),r=d(n,t+1);return p(g,e)&&!p(y,r)||p(y,e)&&!p(g,i)?"\\u"+f(h(e,0),16):e},x=u((function(){return'"\\udf06\\ud834"'!==c("\udf06\ud834")||'"\\udead"'!==c("\udead")}));c&&i({target:"JSON",stat:!0,forced:x},{stringify:function(e,t,n){for(var i=0,r=arguments.length,s=l(r);i<r;i++)s[i]=arguments[i];var o=a(c,null,s);return"string"==typeof o?m(o,v,b):o}})},5163:(e,t,n)=>{"use strict";var i=n(5283),r=n(2086),s=n(8240),a=n(7189),o=n(1007),u=n(9606),l=n(5070),c=n(5516),p=n(2071),d=n(1288),h=n(3677),m=n(62).f,f=n(4399).f,v=n(7826).f,g=n(5773),y=n(4080).trim,b="Number",x=r.Number,k=x.prototype,w=r.TypeError,C=s("".slice),I=s("".charCodeAt),E=function(e){var t=d(e,"number");return"bigint"==typeof t?t:S(t)},S=function(e){var t,n,i,r,s,a,o,u,l=d(e,"number");if(p(l))throw w("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=y(l),43===(t=I(l,0))||45===t){if(88===(n=I(l,2))||120===n)return NaN}else if(48===t){switch(I(l,1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+l}for(a=(s=C(l,2)).length,o=0;o<a;o++)if((u=I(s,o))<48||u>r)return NaN;return parseInt(s,i)}return+l};if(a(b,!x(" 0o1")||!x("0b1")||x("+0x1"))){for(var P,M=function(e){var t=arguments.length<1?0:x(E(e)),n=this;return c(k,n)&&h((function(){g(n)}))?l(Object(t),n,M):t},A=i?m(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),O=0;A.length>O;O++)u(x,P=A[O])&&!u(M,P)&&v(M,P,f(x,P));M.prototype=k,k.constructor=M,o(r,b,M)}},6056:(e,t,n)=>{"use strict";var i=n(1695),r=n(2086),s=n(8240),a=n(9502),o=n(5773),u=n(8992),l=n(3677),c=r.RangeError,p=r.String,d=Math.floor,h=s(u),m=s("".slice),f=s(1..toFixed),v=function(e,t,n){return 0===t?n:t%2==1?v(e,t-1,n*e):v(e*e,t/2,n)},g=function(e,t,n){for(var i=-1,r=n;++i<6;)r+=t*e[i],e[i]=r%1e7,r=d(r/1e7)},y=function(e,t){for(var n=6,i=0;--n>=0;)i+=e[n],e[n]=d(i/t),i=i%t*1e7},b=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var i=p(e[t]);n=""===n?i:n+h("0",7-i.length)+i}return n};i({target:"Number",proto:!0,forced:l((function(){return"0.000"!==f(8e-5,3)||"1"!==f(.9,0)||"1.25"!==f(1.255,2)||"1000000000000000128"!==f(0xde0b6b3a7640080,0)}))||!l((function(){f({})}))},{toFixed:function(e){var t,n,i,r,s=o(this),u=a(e),l=[0,0,0,0,0,0],d="",f="0";if(u<0||u>20)throw c("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return p(s);if(s<0&&(d="-",s=-s),s>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(s*v(2,69,1))-69)<0?s*v(2,-t,1):s/v(2,t,1),n*=4503599627370496,(t=52-t)>0){for(g(l,0,n),i=u;i>=7;)g(l,1e7,0),i-=7;for(g(l,v(10,i,1),0),i=t-1;i>=23;)y(l,1<<23),i-=23;y(l,1<<i),g(l,1,1),y(l,2),f=b(l)}else g(l,0,n),g(l,1<<-t,0),f=b(l)+h("0",u);return u>0?d+((r=f.length)<=u?"0."+h("0",u-r)+f:m(f,0,r-u)+"."+m(f,r-u)):d+f}})},252:(e,t,n)=>{var i=n(1695),r=n(3677),s=n(4088),a=n(4399).f,o=n(5283),u=r((function(){a(1)}));i({target:"Object",stat:!0,forced:!o||u,sham:!o},{getOwnPropertyDescriptor:function(e,t){return a(s(e),t)}})},4009:(e,t,n)=>{var i=n(1695),r=n(5283),s=n(6095),a=n(4088),o=n(4399),u=n(9720);i({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(e){for(var t,n,i=a(e),r=o.f,l=s(i),c={},p=0;l.length>p;)void 0!==(n=r(i,t=l[p++]))&&u(c,t,n);return c}})},2571:(e,t,n)=>{var i=n(1695),r=n(3060),s=n(8779);i({target:"Object",stat:!0,forced:n(3677)((function(){s(1)}))},{keys:function(e){return s(r(e))}})},3238:(e,t,n)=>{var i=n(2371),r=n(1007),s=n(999);i||r(Object.prototype,"toString",s,{unsafe:!0})},2759:(e,t,n)=>{var i=n(5283),r=n(2086),s=n(8240),a=n(7189),o=n(5070),u=n(2585),l=n(7826).f,c=n(62).f,p=n(5516),d=n(7994),h=n(4059),m=n(4276),f=n(4930),v=n(1007),g=n(3677),y=n(9606),b=n(3278).enforce,x=n(7420),k=n(211),w=n(2582),C=n(2910),I=k("match"),E=r.RegExp,S=E.prototype,P=r.SyntaxError,M=s(m),A=s(S.exec),O=s("".charAt),T=s("".replace),D=s("".indexOf),_=s("".slice),B=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,q=/a/g,V=/a/g,j=new E(q)!==q,L=f.MISSED_STICKY,N=f.UNSUPPORTED_Y;if(a("RegExp",i&&(!j||L||w||C||g((function(){return V[I]=!1,E(q)!=q||E(V)==V||"/a/i"!=E(q,"i")}))))){for(var R=function(e,t){var n,i,r,s,a,l,c=p(S,this),m=d(e),f=void 0===t,v=[],g=e;if(!c&&m&&f&&e.constructor===R)return e;if((m||p(S,e))&&(e=e.source,f&&(t="flags"in g?g.flags:M(g))),e=void 0===e?"":h(e),t=void 0===t?"":h(t),g=e,w&&"dotAll"in q&&(i=!!t&&D(t,"s")>-1)&&(t=T(t,/s/g,"")),n=t,L&&"sticky"in q&&(r=!!t&&D(t,"y")>-1)&&N&&(t=T(t,/y/g,"")),C&&(s=function(e){for(var t,n=e.length,i=0,r="",s=[],a={},o=!1,u=!1,l=0,c="";i<=n;i++){if("\\"===(t=O(e,i)))t+=O(e,++i);else if("]"===t)o=!1;else if(!o)switch(!0){case"["===t:o=!0;break;case"("===t:A(B,_(e,i+1))&&(i+=2,u=!0),r+=t,l++;continue;case">"===t&&u:if(""===c||y(a,c))throw new P("Invalid capture group name");a[c]=!0,s[s.length]=[c,l],u=!1,c="";continue}u?c+=t:r+=t}return[r,s]}(e),e=s[0],v=s[1]),a=o(E(e,t),c?this:S,R),(i||r||v.length)&&(l=b(a),i&&(l.dotAll=!0,l.raw=R(function(e){for(var t,n=e.length,i=0,r="",s=!1;i<=n;i++)"\\"!==(t=O(e,i))?s||"."!==t?("["===t?s=!0:"]"===t&&(s=!1),r+=t):r+="[\\s\\S]":r+=t+O(e,++i);return r}(e),n)),r&&(l.sticky=!0),v.length&&(l.groups=v)),e!==g)try{u(a,"source",""===g?"(?:)":g)}catch(e){}return a},F=function(e){e in R||l(R,e,{configurable:!0,get:function(){return E[e]},set:function(t){E[e]=t}})},$=c(E),z=0;$.length>z;)F($[z++]);S.constructor=R,R.prototype=S,v(r,"RegExp",R)}x("RegExp")},8237:(e,t,n)=>{var i=n(2086),r=n(5283),s=n(2582),a=n(2306),o=n(7826).f,u=n(3278).get,l=RegExp.prototype,c=i.TypeError;r&&s&&o(l,"dotAll",{configurable:!0,get:function(){if(this!==l){if("RegExp"===a(this))return!!u(this).dotAll;throw c("Incompatible receiver, RegExp required")}}})},2077:(e,t,n)=>{"use strict";var i=n(1695),r=n(4861);i({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},4992:(e,t,n)=>{var i=n(2086),r=n(5283),s=n(4930).MISSED_STICKY,a=n(2306),o=n(7826).f,u=n(3278).get,l=RegExp.prototype,c=i.TypeError;r&&s&&o(l,"sticky",{configurable:!0,get:function(){if(this!==l){if("RegExp"===a(this))return!!u(this).sticky;throw c("Incompatible receiver, RegExp required")}}})},4890:(e,t,n)=>{"use strict";n(2077);var i,r,s=n(1695),a=n(2086),o=n(9413),u=n(8240),l=n(930),c=n(8759),p=(i=!1,(r=/[ac]/).exec=function(){return i=!0,/./.exec.apply(this,arguments)},!0===r.test("abc")&&i),d=a.Error,h=u(/./.test);s({target:"RegExp",proto:!0,forced:!p},{test:function(e){var t=this.exec;if(!l(t))return h(this,e);var n=o(t,this,e);if(null!==n&&!c(n))throw new d("RegExp exec method returned something other than an Object or null");return!!n}})},895:(e,t,n)=>{"use strict";var i=n(8240),r=n(4398).PROPER,s=n(1007),a=n(6112),o=n(5516),u=n(4059),l=n(3677),c=n(4276),p="toString",d=RegExp.prototype,h=d.toString,m=i(c),f=l((function(){return"/a/b"!=h.call({source:"a",flags:"b"})})),v=r&&h.name!=p;(f||v)&&s(RegExp.prototype,p,(function(){var e=a(this),t=u(e.source),n=e.flags;return"/"+t+"/"+u(void 0===n&&o(d,e)&&!("flags"in d)?m(e):n)}),{unsafe:!0})},1514:(e,t,n)=>{"use strict";var i=n(1695),r=n(8240),s=n(7725),a=n(9586),o=n(4059),u=n(5469),l=r("".indexOf);i({target:"String",proto:!0,forced:!u("includes")},{includes:function(e){return!!~l(o(a(this)),o(s(e)),arguments.length>1?arguments[1]:void 0)}})},7460:(e,t,n)=>{"use strict";var i=n(3448).charAt,r=n(4059),s=n(3278),a=n(8432),o="String Iterator",u=s.set,l=s.getterFor(o);a(String,"String",(function(e){u(this,{type:o,string:r(e),index:0})}),(function(){var e,t=l(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=i(n,r),t.index+=e.length,{value:e,done:!1})}))},1203:(e,t,n)=>{"use strict";var i=n(9413),r=n(2331),s=n(6112),a=n(4005),o=n(4059),u=n(9586),l=n(2964),c=n(9966),p=n(1189);r("match",(function(e,t,n){return[function(t){var n=u(this),r=null==t?void 0:l(t,e);return r?i(r,t,n):new RegExp(t)[e](o(n))},function(e){var i=s(this),r=o(e),u=n(t,i,r);if(u.done)return u.value;if(!i.global)return p(i,r);var l=i.unicode;i.lastIndex=0;for(var d,h=[],m=0;null!==(d=p(i,r));){var f=o(d[0]);h[m]=f,""===f&&(i.lastIndex=c(r,a(i.lastIndex),l)),m++}return 0===m?null:h}]}))},911:(e,t,n)=>{"use strict";var i=n(7258),r=n(9413),s=n(8240),a=n(2331),o=n(3677),u=n(6112),l=n(930),c=n(9502),p=n(4005),d=n(4059),h=n(9586),m=n(9966),f=n(2964),v=n(8509),g=n(1189),y=n(211)("replace"),b=Math.max,x=Math.min,k=s([].concat),w=s([].push),C=s("".indexOf),I=s("".slice),E="$0"==="a".replace(/./,"$0"),S=!!/./[y]&&""===/./[y]("a","$0");a("replace",(function(e,t,n){var s=S?"$":"$0";return[function(e,n){var i=h(this),s=null==e?void 0:f(e,y);return s?r(s,e,i,n):r(t,d(i),e,n)},function(e,r){var a=u(this),o=d(e);if("string"==typeof r&&-1===C(r,s)&&-1===C(r,"$<")){var h=n(t,a,o,r);if(h.done)return h.value}var f=l(r);f||(r=d(r));var y=a.global;if(y){var E=a.unicode;a.lastIndex=0}for(var S=[];;){var P=g(a,o);if(null===P)break;if(w(S,P),!y)break;""===d(P[0])&&(a.lastIndex=m(o,p(a.lastIndex),E))}for(var M,A="",O=0,T=0;T<S.length;T++){for(var D=d((P=S[T])[0]),_=b(x(c(P.index),o.length),0),B=[],q=1;q<P.length;q++)w(B,void 0===(M=P[q])?M:String(M));var V=P.groups;if(f){var j=k([D],B,_,o);void 0!==V&&w(j,V);var L=d(i(r,void 0,j))}else L=v(D,o,_,B,V,r);_>=O&&(A+=I(o,O,_)+L,O=_+D.length)}return A+I(o,O)}]}),!!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!E||S)},266:(e,t,n)=>{"use strict";var i=n(1695),r=n(4080).trim;i({target:"String",proto:!0,forced:n(4274)("trim")},{trim:function(){return r(this)}})},2189:(e,t,n)=>{"use strict";var i=n(1695),r=n(5283),s=n(2086),a=n(8240),o=n(9606),u=n(930),l=n(5516),c=n(4059),p=n(7826).f,d=n(8474),h=s.Symbol,m=h&&h.prototype;if(r&&u(h)&&(!("description"in m)||void 0!==h().description)){var f={},v=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:c(arguments[0]),t=l(m,this)?new h(e):void 0===e?h():h(e);return""===e&&(f[t]=!0),t};d(v,h),v.prototype=m,m.constructor=v;var g="Symbol(test)"==String(h("test")),y=a(m.toString),b=a(m.valueOf),x=/^Symbol\((.*)\)[^)]+$/,k=a("".replace),w=a("".slice);p(m,"description",{configurable:!0,get:function(){var e=b(this),t=y(e);if(o(f,e))return"";var n=g?w(t,7,-1):k(t,x,"$1");return""===n?void 0:n}}),i({global:!0,forced:!0},{Symbol:v})}},1047:(e,t,n)=>{n(4145)("iterator")},5901:(e,t,n)=>{"use strict";var i=n(1695),r=n(2086),s=n(563),a=n(7258),o=n(9413),u=n(8240),l=n(3296),c=n(5283),p=n(3193),d=n(3677),h=n(9606),m=n(6526),f=n(930),v=n(8759),g=n(5516),y=n(2071),b=n(6112),x=n(3060),k=n(4088),w=n(2258),C=n(4059),I=n(5736),E=n(4710),S=n(8779),P=n(62),M=n(3226),A=n(6952),O=n(4399),T=n(7826),D=n(7446),_=n(745),B=n(1007),q=n(9197),V=n(8944),j=n(7153),L=n(5422),N=n(211),R=n(9251),F=n(4145),$=n(914),z=n(3278),H=n(8062).forEach,W=V("hidden"),G="Symbol",U=N("toPrimitive"),J=z.set,K=z.getterFor(G),X=Object.prototype,Q=r.Symbol,Y=Q&&Q.prototype,Z=r.TypeError,ee=r.QObject,te=s("JSON","stringify"),ne=O.f,ie=T.f,re=M.f,se=D.f,ae=u([].push),oe=q("symbols"),ue=q("op-symbols"),le=q("string-to-symbol-registry"),ce=q("symbol-to-string-registry"),pe=q("wks"),de=!ee||!ee.prototype||!ee.prototype.findChild,he=c&&d((function(){return 7!=E(ie({},"a",{get:function(){return ie(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=ne(X,t);i&&delete X[t],ie(e,t,n),i&&e!==X&&ie(X,t,i)}:ie,me=function(e,t){var n=oe[e]=E(Y);return J(n,{type:G,tag:e,description:t}),c||(n.description=t),n},fe=function(e,t,n){e===X&&fe(ue,t,n),b(e);var i=w(t);return b(n),h(oe,i)?(n.enumerable?(h(e,W)&&e[W][i]&&(e[W][i]=!1),n=E(n,{enumerable:I(0,!1)})):(h(e,W)||ie(e,W,I(1,{})),e[W][i]=!0),he(e,i,n)):ie(e,i,n)},ve=function(e,t){b(e);var n=k(t),i=S(n).concat(xe(n));return H(i,(function(t){c&&!o(ge,n,t)||fe(e,t,n[t])})),e},ge=function(e){var t=w(e),n=o(se,this,t);return!(this===X&&h(oe,t)&&!h(ue,t))&&(!(n||!h(this,t)||!h(oe,t)||h(this,W)&&this[W][t])||n)},ye=function(e,t){var n=k(e),i=w(t);if(n!==X||!h(oe,i)||h(ue,i)){var r=ne(n,i);return!r||!h(oe,i)||h(n,W)&&n[W][i]||(r.enumerable=!0),r}},be=function(e){var t=re(k(e)),n=[];return H(t,(function(e){h(oe,e)||h(j,e)||ae(n,e)})),n},xe=function(e){var t=e===X,n=re(t?ue:k(e)),i=[];return H(n,(function(e){!h(oe,e)||t&&!h(X,e)||ae(i,oe[e])})),i};if(p||(B(Y=(Q=function(){if(g(Y,this))throw Z("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?C(arguments[0]):void 0,t=L(e),n=function(e){this===X&&o(n,ue,e),h(this,W)&&h(this[W],t)&&(this[W][t]=!1),he(this,t,I(1,e))};return c&&de&&he(X,t,{configurable:!0,set:n}),me(t,e)}).prototype,"toString",(function(){return K(this).tag})),B(Q,"withoutSetter",(function(e){return me(L(e),e)})),D.f=ge,T.f=fe,O.f=ye,P.f=M.f=be,A.f=xe,R.f=function(e){return me(N(e),e)},c&&(ie(Y,"description",{configurable:!0,get:function(){return K(this).description}}),l||B(X,"propertyIsEnumerable",ge,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!p,sham:!p},{Symbol:Q}),H(S(pe),(function(e){F(e)})),i({target:G,stat:!0,forced:!p},{for:function(e){var t=C(e);if(h(le,t))return le[t];var n=Q(t);return le[t]=n,ce[n]=t,n},keyFor:function(e){if(!y(e))throw Z(e+" is not a symbol");if(h(ce,e))return ce[e]},useSetter:function(){de=!0},useSimple:function(){de=!1}}),i({target:"Object",stat:!0,forced:!p,sham:!c},{create:function(e,t){return void 0===t?E(e):ve(E(e),t)},defineProperty:fe,defineProperties:ve,getOwnPropertyDescriptor:ye}),i({target:"Object",stat:!0,forced:!p},{getOwnPropertyNames:be,getOwnPropertySymbols:xe}),i({target:"Object",stat:!0,forced:d((function(){A.f(1)}))},{getOwnPropertySymbols:function(e){return A.f(x(e))}}),te&&i({target:"JSON",stat:!0,forced:!p||d((function(){var e=Q();return"[null]"!=te([e])||"{}"!=te({a:e})||"{}"!=te(Object(e))}))},{stringify:function(e,t,n){var i=_(arguments),r=t;if((v(t)||void 0!==e)&&!y(e))return m(t)||(t=function(e,t){if(f(r)&&(t=o(r,this,e,t)),!y(t))return t}),i[1]=t,a(te,null,i)}}),!Y[U]){var ke=Y.valueOf;B(Y,U,(function(e){return o(ke,this)}))}$(Q,G),j[W]=!0},5849:(e,t,n)=>{var i=n(2086),r=n(933),s=n(3526),a=n(1984),o=n(2585),u=function(e){if(e&&e.forEach!==a)try{o(e,"forEach",a)}catch(t){e.forEach=a}};for(var l in r)r[l]&&u(i[l]&&i[l].prototype);u(s)},4078:(e,t,n)=>{var i=n(2086),r=n(933),s=n(3526),a=n(5769),o=n(2585),u=n(211),l=u("iterator"),c=u("toStringTag"),p=a.values,d=function(e,t){if(e){if(e[l]!==p)try{o(e,l,p)}catch(t){e[l]=p}if(e[c]||o(e,c,t),r[t])for(var n in a)if(e[n]!==a[n])try{o(e,n,a[n])}catch(t){e[n]=a[n]}}};for(var h in r)d(i[h]&&i[h].prototype,h);d(s,"DOMTokenList")},3300:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var i=n(4933),r=n.n(i),s=n(3476),a=n.n(s)()(r());a.push([e.id,'.--mc-player.theme-default {\n  --activeColor: 136, 136, 136;\n  --defaultColor: 255, 255, 255;\n  --backgroundColor: 29, 31, 37, 1;\n  --backgroundSettingsColor: rgba(29, 31, 37, 0.9);\n  --loopBarColor: rgba(var(--activeColor), 0.2);\n  --grad-display: none;\n}\n\n.--mc-player.theme-yellow {\n  --activeColor: 255, 235, 59;\n  --defaultColor: 255, 255, 255;\n  --backgroundColor: 29, 31, 37, 1;\n  --backgroundSettingsColor: rgba(29, 31, 37, 0.9);\n  --loopBarColor: rgba(var(--activeColor), 0.2);\n  --grad-display: none;\n}\n\n.--mc-player.theme-dark {\n  --activeColor: 136, 136, 136;\n  --defaultColor: 136, 136, 136;\n  --backgroundColor: 0, 0, 0, 1;\n  --backgroundSettingsColor: rgba(0, 0, 0, 0.9);\n  --loopBarColor: rgba(var(--activeColor), 0.2);\n  --grad-display: none;\n}\n\n.--mc-player.theme-whiteGold {\n  --activeColor: 161, 127, 26;\n  --defaultColor: 136, 136, 136;\n  --backgroundColor: 245, 245, 245, 1;\n  --backgroundSettingsColor: rgba(245, 245, 245, 0.9);\n  --loopBarColor: rgba(var(--activeColor), 0.2);\n  --grad-display: none;\n}\n\n.--mc-player.theme-darkGold {\n  --activeColor: 161, 127, 26;\n  --defaultColor: 136, 136, 136;\n  --backgroundColor: 0, 0, 0, 1;\n  --backgroundSettingsColor: rgba(0, 0, 0, 0.9);\n  --loopBarColor: rgba(var(--activeColor), 0.2);\n  --grad-display: none;\n}\n.--mc-player.theme-transparent {\n  --activeColor: 255, 0, 0;\n  --defaultColor: 239, 238, 236;\n  --backgroundColor: 0, 0, 0, 0;\n  --backgroundSettingsColor: rgba(0, 0, 0, 0.9);\n  --loopBarColor: rgba(var(--defaultColor), 0.2);\n  --grad-display: block;\n}\n\n.--mc-player.theme-green {\n  --activeColor: 0, 184, 139;\n  --defaultColor: 255, 255, 255;\n  --backgroundColor: 29, 31, 37, 1;\n  --backgroundSettingsColor: rgba(29, 31, 37, 0.9);\n  --loopBarColor: rgba(var(--activeColor), 0.2);\n  --grad-display: none;\n}\n.--mc-player.theme-blue {\n  --activeColor: 0, 153, 225;\n  --defaultColor: 255, 255, 255;\n  --backgroundColor: 29, 31, 37, 1;\n  --backgroundSettingsColor: rgba(29, 31, 37, 0.9);\n  --loopBarColor: rgba(var(--activeColor), 0.2);\n  --grad-display: none;\n}\n.--mc-player * {\n  color: rgb(var(--defaultColor));\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,\n    Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n  font-size: 13px;\n  cursor: default;\n  user-select: none;\n}\n.--mc-player svg {\n  width: 22px;\n}\n.--mcp-settings-panel svg {\n  width: 10px;\n}\n.--mc-player svg,\n.--mc-player svg * {\n  fill: rgb(var(--defaultColor)) !important;\n}\n\n.--mc-player {\n  overscroll-behavior: none;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  pointer-events: none;\n}\n\n.--mc-player * {\n  box-sizing: border-box;\n}\n\n.--mcp-background,\n.--mcp-context {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  pointer-events: none;\n}\n.--mcp-background {\n  background: black;\n  z-index: -1000;\n}\n\n.--mcp-pointer-events-panel.initial {\n  width: 100%;\n  min-height: 100%;\n  z-index: 100;\n}\n\n.--mcp-pointer-events-panel {\n  width: 100%;\n  min-height: calc(100% - 50px);\n}\n\n.--mcp-pointer-events-panel.loading {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: rgba(0, 0, 0, 0.8);\n}\n.--mcp-pointer-events-panel.loading svg {\n  animation: spin 4s linear infinite;\n}\n\n@keyframes spin {\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n.--mcp-grad {\n  display: var(--grad-display);\n  position: absolute;\n  bottom: 0px;\n  left: 0px;\n  width: 100%;\n  height: 200px;\n  z-index: 0;\n  pointer-events: none !important;\n  background-image: linear-gradient(\n    rgba(0, 0, 0, 00.001),\n    rgba(0, 0, 0, 00.004),\n    rgba(0, 0, 0, 00.007),\n    rgba(0, 0, 0, 00.01),\n    rgba(0, 0, 0, 0.04),\n    rgba(0, 0, 0, 0.07),\n    rgba(0, 0, 0, 0.1),\n    rgba(0, 0, 0, 0.15),\n    rgba(0, 0, 0, 0.2),\n    rgba(0, 0, 0, 0.25),\n    rgba(0, 0, 0, 0.3),\n    rgba(0, 0, 0, 0.35),\n    rgba(0, 0, 0, 0.4),\n    rgba(0, 0, 0, 0.45),\n    rgba(0, 0, 0, 0.5),\n    rgba(0, 0, 0, 0.55),\n    rgba(0, 0, 0, 0.6),\n    rgba(0, 0, 0, 0.65),\n    rgba(0, 0, 0, 0.7),\n    rgba(0, 0, 0, 0.75),\n    rgba(0, 0, 0, 0.8),\n    rgba(0, 0, 0, 0.88)\n  );\n}\n\n.--mc-player:hover .--mcp-controls {\n  opacity: 1 !important;\n}\n.--mcp-controls:active {\n  opacity: 1 !important;\n}\n.--mcp-controls {\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  z-index: -0;\n  background: rgba(var(--backgroundColor));\n  height: 50px;\n  padding: 0 15px;\n  opacity: 0;\n  transition: all ease 0.2s;\n  pointer-events: auto;\n}\n.--mcp-play-pause-panel #play-svg {\n  margin-left: 4px;\n}\n.--mcp-force-show-controls {\n  opacity: 1 !important;\n}\n\n.--mcp-always-show-controls {\n  opacity: 1 !important;\n}\n\n.--mcp-progressbar {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.--mcp-totalbar,\n.--mcp-loopbar,\n.--mcp-runningbar {\n  position: relative;\n  height: 5px;\n}\n\n.--mcp-cursor {\n  width: 14px;\n  height: 14px;\n  background-color: rgb(var(--activeColor));\n  border-radius: 100%;\n  position: absolute;\n  top: -5px;\n  right: -8px;\n  z-index: 10;\n}\n\n.--mcp-totalbar {\n  min-width: 100%;\n  background-color: rgba(var(--defaultColor), 0.3);\n}\n\n.--mcp-loopbar {\n  width: 100%;\n  padding: 10px 0px;\n  top: -10px;\n  position: relative;\n}\n.--mcp-loopbar-color {\n  position: absolute;\n  left: 0px;\n  bottom: 5px;\n  background-color: var(--loopBarColor);\n  width: 100%;\n  height: 5px;\n}\n.--mcp-runningbar {\n  background-color: rgb(var(--activeColor));\n  width: 0px;\n}\n\n.--mcp-buttons,\n.--mcp-left-buttons,\n.--mcp-right-buttons,\n.--mcp-left-buttons > div,\n.--mcp-right-buttons > div {\n  z-index: 1;\n  display: flex;\n  align-items: center;\n  gap: 5px;\n}\n\n.--mcp-buttons,\n.--mcp-left-buttons,\n.--mcp-right-buttons {\n  flex: 1;\n  height: 100%;\n  gap: 20px;\n}\n\n.--mcp-left-buttons {\n  justify-content: flex-start;\n}\n\n.--mcp-right-buttons {\n  justify-content: flex-end;\n}\n\n.--mcp-prevent-point-events {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 100;\n}\n\n.--mcp-play-pause-panel {\n  pointer-events: none;\n  position: absolute;\n  z-index: 2;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-repeat: no-repeat !important;\n  background-size: contain !important;\n  background-position: center !important;\n}\n.--mcp-play-pause-panel.initial {\n  background-color: black;\n}\n.--mcp-play-pause-panel.initial svg {\n  width: 32px;\n  height: 32px;\n}\n.--mcp-play-pause-panel.initial .--mcp-play-pause-panel-container {\n  width: 80px;\n  height: 80px;\n}\n.--mcp-play-pause-panel.hide {\n  opacity: 0;\n}\n.remove-animation * {\n  animation-name: none !important;\n}\n\n.--mcp-play-pause-panel-container {\n  background-color: #000000c7;\n  width: 60px;\n  height: 60px;\n  border-radius: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.--mcp-play-pause-panel.animate .--mcp-play-pause-panel-container {\n  animation-name: scale-and-opaque;\n  animation-duration: 0.8s;\n  transform-origin: center center;\n}\n@keyframes scale-and-opaque {\n  from {\n    opacity: 0.5;\n    transform: scale(1);\n  }\n  to {\n    opacity: 0;\n    transform: scale(2);\n  }\n}\n\n.--mcp-loop-boundaries {\n  position: relative;\n}\n.--mcp-loop-boundaries:after {\n  content: "";\n  top: -4px;\n  left: -6px;\n  width: 13px;\n  height: 13px;\n  background-color: #aeaeae;\n  position: absolute;\n  border-radius: 100%;\n  z-index: 100;\n}\n.--mcp-loopbar-start {\n  left: -5px;\n}\n.--mcp-loopbar-end {\n  right: 5px;\n}\n.--mcp-loopbar,\n.--mcp-loopbar-color,\n.--mcp-runningbar,\n.--mcp-status-btn,\n.--mcp-loop-boundaries,\n.--mcp-cursor,\n.--mcp-btn,\n.--mcp-volume *,\n.--mc-player svg,\n.--mc-player svg * {\n  cursor: pointer;\n}\n.--mcp-btn {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.--mcp-status-btn {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 3px;\n}\n.--mcp-indicator {\n  font-size: 12px;\n}\n.--mcp-listener-helper {\n  pointer-events: none;\n}\n\n.--mcp-btn {\n  font-size: 20px;\n}\n\n.--mcp-volume-btn {\n  font-size: 15px;\n}\n.--mcp-volumebar {\n  width: 0;\n  padding-left: 0px;\n  padding-right: 0px;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  transition: all ease 0.2s;\n}\n.--mcp-volume {\n  height: 100%;\n}\n.--mcp-volume:hover {\n  padding-right: 10px;\n}\n.--mcp-volume:hover .--mcp-volumebar,\n.--mcp-volume:active .--mcp-volumebar {\n  width: 52px;\n  padding-left: 5px;\n}\n.--mcp-volume:hover .--mcp-volume-cursor,\n.--mcp-volume:active .--mcp-volume-cursor {\n  display: block;\n}\n\n.--mcp-btn::before {\n  color: var(--defaultColor) !important;\n}\n.--mcp-btn::before:hover {\n  filter: brightness(40);\n}\n.--mcp-settings-speed-hide {\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n}\nul.--mcp-speed-values {\n  padding: 0px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\nul.--mcp-speed-values li {\n  width: 100%;\n}\nul.--mcp-speed-values li p {\n  width: 100%;\n}\n.--mcp-settings-panel ul {\n  list-style-type: none;\n  display: flex;\n  flex-direction: column;\n  padding: 5px 0px;\n  margin: 0px;\n  flex: 1;\n}\n\n.--mcp-settings-panel ul li {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  min-height: 40px;\n  padding: 0px 21px;\n}\n.--mcp-settings-panel ul li * {\n  cursor: pointer;\n}\n.--mcp-settings-panel ul li:not(.--mcp-no-hover):hover {\n  background-color: rgba(var(--activeColor), 0.2);\n}\n\n.--mcp-settings-panel ul li > div {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  width: 48px;\n  flex: 1;\n  gap: 10px;\n}\n\n.--mcp-settings-panel {\n  width: 251px;\n  position: absolute;\n  background-color: var(--backgroundSettingsColor);\n  right: 15px;\n  bottom: 60px;\n  transition: all ease 0.2s;\n  z-index: 1000;\n  pointer-events: auto;\n}\n\n.--mcp-speed-values {\n  padding: 0px;\n}\n.--mcp-no-hover {\n  padding: 0px !important;\n}\n.--mcp-speed-value-item:not(.--mcp-selected) {\n  padding-left: 15px;\n}\n.--mcp-speed-value-item.--mcp-selected {\n  padding-left: 10px;\n}\n.--mcp-speed-value .icon-check-solid {\n  margin-left: -5px;\n}\n.--mcp-settings-panel ul.--mcp-speed-settings li > div {\n  justify-content: flex-start;\n  flex: unset;\n  width: 20px;\n}\n\n.--mcp-main-settings ul li > p {\n  display: flex;\n  align-items: center;\n  padding-left: 10px;\n  flex: 1;\n}\n\n/* \n\nSliders \n\n*/\n.--mc-player .switch {\n  position: relative;\n  display: inline-block;\n  width: 36px;\n  height: 14px;\n}\n\n.--mc-player .switch input {\n  display: none;\n}\n\n.--mc-player .settings-switch::after {\n  clear: both;\n}\n\n.--mc-player .slider {\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #999;\n  -webkit-transition: 0.4s;\n  transition: 0.4s;\n}\n\n.--mc-player .slider:before {\n  position: absolute;\n  content: "";\n  height: 20px;\n  width: 20px;\n  left: 0px;\n  bottom: -3px;\n  background-color: #cfcfcf;\n  -webkit-transition: 0.4s;\n  transition: 0.4s;\n}\n\n.--mc-player input:checked + .slider {\n  background-color: rgb(var(--activeColor));\n}\n.--mc-player input:checked + .slider:before {\n  background-color: white;\n}\n\n.--mc-player input:focus + .slider {\n  box-shadow: 0 0 1px rgb(var(--activeColor));\n}\n\n.--mc-player input:checked + .slider:before {\n  -webkit-transform: translateX(16px);\n  -ms-transform: translateX(16px);\n  transform: translateX(16px);\n}\n\n.--mc-player .slider.round {\n  border-radius: 34px;\n}\n\n.--mc-player .slider.round:before {\n  border-radius: 50%;\n}\n\n.--mc-player .m-fadeOut {\n  visibility: hidden !important;\n  opacity: 0 !important;\n  display: none !important;\n}\n\n.--mc-player .m-fadeIn {\n  display: unset;\n  visibility: visible !important;\n  opacity: 1 !important;\n}\n\n.--mcp-volume-cursor {\n  position: absolute;\n  width: 14px;\n  height: 14px;\n  background-color: rgb(var(--defaultColor));\n  right: -8px;\n  border-radius: 100%;\n  display: none;\n}\n.--mcp-volumebar-color {\n  width: 100%;\n  height: 3px;\n  background-color: rgba(var(--defaultColor), 0.3);\n}\n.--mcp-volumebar-color-active {\n  width: 100%;\n  height: 100%;\n  background-color: rgb(var(--defaultColor));\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n}\n',""]);const o=a},3476:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,r,s){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(i)for(var o=0;o<this.length;o++){var u=this[o][0];null!=u&&(a[u]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);i&&a[c[0]]||(void 0!==s&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=s),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),r&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=r):c[4]="".concat(r)),t.push(c))}},t}},4933:e=>{"use strict";e.exports=function(e){return e[1]}},5432:(e,t,n)=>{"use strict";n.d(t,{Z:()=>x});var i=n(1892),r=n.n(i),s=n(5760),a=n.n(s),o=n(8311),u=n.n(o),l=n(8192),c=n.n(l),p=n(8060),d=n.n(p),h=n(4865),m=n.n(h),f=n(3300),v={};v.styleTagTransform=m(),v.setAttributes=c(),v.insert=u().bind(null,"head"),v.domAPI=a(),v.insertStyleElement=d();var g=r()(f.default,v);if(!f.default.locals||e.hot.invalidate){var y=!f.default.locals,b=y?f:f.default.locals;e.hot.accept(3300,(t=>{f=n(3300),function(e,t,n){if(!e&&t||e&&!t)return!1;var i;for(i in e)if((!n||"default"!==i)&&e[i]!==t[i])return!1;for(i in t)if(!(n&&"default"===i||e[i]))return!1;return!0}(b,y?f:f.default.locals,y)?(b=y?f:f.default.locals,g(f.default)):e.hot.invalidate()}))}e.hot.dispose((function(){g()}));const x=f.default&&f.default.locals?f.default.locals:void 0},1892:e=>{"use strict";var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var s={},a=[],o=0;o<e.length;o++){var u=e[o],l=i.base?u[0]+i.base:u[0],c=s[l]||0,p="".concat(l," ").concat(c);s[l]=c+1;var d=n(p),h={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==d)t[d].references++,t[d].updater(h);else{var m=r(h,i);i.byIndex=o,t.splice(o,0,{identifier:p,updater:m,references:1})}a.push(p)}return a}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var s=i(e=e||[],r=r||{});return function(e){e=e||[];for(var a=0;a<s.length;a++){var o=n(s[a]);t[o].references--}for(var u=i(e,r),l=0;l<s.length;l++){var c=n(s[l]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}s=u}}},8311:e=>{"use strict";var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},8060:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},8192:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},5760:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4865:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},5295:e=>{e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 32"><title>angle-left</title><path d="M1.981 14.938l8.5-8.5c0.588-0.588 1.537-0.588 2.119 0l1.412 1.412c0.588 0.588 0.588 1.537 0 2.119l-6.019 6.031 6.025 6.025c0.588 0.587 0.588 1.538 0 2.119l-1.412 1.419c-0.588 0.587-1.537 0.587-2.119 0l-8.5-8.5c-0.594-0.587-0.594-1.537-0.006-2.125z"></path></svg>'},4656:e=>{e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 32"><title>angle-right</title><path d="M14.019 17.063l-8.5 8.5c-0.588 0.587-1.538 0.587-2.119 0l-1.413-1.413c-0.587-0.587-0.587-1.538 0-2.119l6.019-6.031-6.025-6.025c-0.587-0.588-0.587-1.537 0-2.119l1.413-1.419c0.587-0.588 1.538-0.588 2.119 0l8.5 8.5c0.594 0.588 0.594 1.538 0.006 2.125z"></path></svg>'},1683:e=>{e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title>check-solid</title><path d="M10.869 27.463l-10.4-10.4c-0.625-0.625-0.625-1.638 0-2.263l2.263-2.263c0.625-0.625 1.638-0.625 2.263 0l7.006 7.006 15.006-15.006c0.625-0.625 1.638-0.625 2.263 0l2.263 2.263c0.625 0.625 0.625 1.638 0 2.263l-18.4 18.4c-0.625 0.625-1.638 0.625-2.263-0z"></path></svg>'},921:e=>{e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title>donkeyclip-logo</title><path fill="#777" d="M25.811 3.454v11.010h-3.479c-0.696-2.447-2.974-4.246-5.638-4.246-3.238 0-5.877 2.638-5.877 5.877s2.638 5.877 5.877 5.877c2.686 0 4.942-1.799 5.638-4.246h3.334c-0.767 4.246-4.485 7.509-8.972 7.509-5.014 0-9.115-4.078-9.115-9.115 0-5.014 4.078-9.115 9.115-9.115 2.231 0 4.294 0.815 5.877 2.159v-7.652c-1.992-0.912-4.222-1.415-6.572-1.415-8.779 0-15.904 7.125-15.904 15.904s7.125 15.904 15.904 15.904c8.779 0 15.904-7.125 15.904-15.904 0.024-5.109-2.375-9.644-6.093-12.546z"></path></svg>'},7207:e=>{e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title>expand-full</title><path fill="#999" d="M31.667 3.271c-0.004-1.619-1.315-2.93-2.934-2.934h-7.642c-0.921 0-1.667 0.747-1.667 1.667s0.747 1.667 1.667 1.667h6.909c0.185 0 0.333 0.148 0.333 0.332v4.359c0 0.921 0.747 1.667 1.667 1.667s1.667-0.746 1.667-1.667v0-5.091zM0.333 8.362c0 0.921 0.746 1.667 1.667 1.667s1.667-0.746 1.667-1.667v0-4.362c0-0.001 0-0.001 0-0.002 0-0.184 0.148-0.333 0.332-0.333h6.909c0.898-0.029 1.614-0.764 1.614-1.667s-0.717-1.637-1.612-1.666l-0.003-0h-7.635c-1.619 0.005-2.931 1.315-2.934 2.936l-0.007 5.095zM31.667 28.726v-5.091c0-0.921-0.747-1.667-1.667-1.667s-1.667 0.747-1.667 1.667v0 4.365c0 0.185-0.148 0.333-0.332 0.333h-6.909c-0.921 0-1.667 0.747-1.667 1.667s0.747 1.667 1.667 1.667v0h7.635c1.624-0.002 2.941-1.319 2.941-2.942zM0.333 28.726c0.004 1.621 1.319 2.934 2.941 2.934 0 0 0 0 0 0h7.635c0.016 0.001 0.034 0.001 0.053 0.001 0.921 0 1.667-0.747 1.667-1.667s-0.746-1.667-1.667-1.667c-0.019 0-0.037 0-0.056 0.001l0.003-0h-6.909c-0 0-0 0-0 0-0.182 0-0.33-0.145-0.333-0.326v-4.366c0-0.921-0.747-1.667-1.667-1.667s-1.667 0.747-1.667 1.667v0 5.091z"></path><path fill="#999" d="M10.321 10.848h11.357c1.818 0 3.291 1.473 3.291 3.291v3.72c0 1.818-1.473 3.291-3.291 3.291h-11.357c-1.818 0-3.291-1.473-3.291-3.291v-3.72c0-1.818 1.473-3.291 3.291-3.291z"></path></svg>'},5341:e=>{e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title>loop</title><path fill="#999" d="M22.364 21.968h-0.631c-0.92 0-1.667 0.746-1.667 1.667s0.746 1.667 1.667 1.667h0.637c0.013 0 0.028 0 0.044 0 5.113 0 9.259-4.145 9.259-9.259 0-4.668-3.454-8.529-7.946-9.166l-0.049-0.006c-0.158-0.028-0.276-0.164-0.277-0.328v-2.636c-0-0.92-0.746-1.666-1.667-1.666-0.357 0-0.689 0.112-0.96 0.304l0.005-0.003-6.371 4.455c-0.432 0.305-0.711 0.803-0.711 1.365 0 0.92 0.746 1.667 1.667 1.667 0 0 0 0 0 0h6.352c3.772 0 6.617 2.567 6.617 5.971-0.004 3.295-2.674 5.966-5.969 5.969h-0zM8.329 25.127c0.16 0.027 0.277 0.165 0.277 0.328v2.635c0 0.001 0 0.001 0 0.002 0 0.92 0.746 1.665 1.665 1.665 0.358 0 0.69-0.113 0.961-0.305l-0.005 0.003 6.364-4.453c0.432-0.306 0.71-0.803 0.71-1.365 0-0.92-0.746-1.667-1.666-1.668h-6.352c-3.772 0-6.617-2.567-6.617-5.968 0.002-3.296 2.673-5.968 5.969-5.972h0.638c0.92 0 1.667-0.746 1.667-1.667s-0.746-1.667-1.667-1.667v0h-0.637c-0.010-0-0.022-0-0.034-0-5.114 0-9.26 4.146-9.26 9.26 0 4.665 3.45 8.524 7.937 9.166l0.049 0.006z"></path></svg>'},4021:e=>{e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title>pause</title><path d="M6.059 4.639h8.521v22.722h-8.521zM18.84 4.639h8.521v22.722h-8.521z"></path></svg>'},8589:e=>{e.exports='<svg id="play-svg" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title>play</title><path fill="#999" d="M27.558 13.624l-21.827-13.232c-0.402-0.248-0.89-0.395-1.411-0.395-1.502 0-2.72 1.218-2.72 2.72 0 0.002 0 0.004 0 0.006v-0 26.461c0 0.001 0 0.002 0 0.003 0 1.502 1.218 2.72 2.72 2.72 0.522 0 1.009-0.147 1.423-0.401l-0.012 0.007 21.827-13.232c0.792-0.485 1.313-1.346 1.313-2.328s-0.521-1.843-1.301-2.321l-0.012-0.007z"></path></svg>'},3294:e=>{e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title>settings</title><path fill="#999" d="M29.999 12.665h-2.483c-0.275-0.938-0.621-1.751-1.048-2.512l0.031 0.060 1.757-1.755c0.362-0.362 0.587-0.862 0.587-1.415s-0.224-1.053-0.587-1.415l-1.886-1.883c-0.362-0.362-0.862-0.586-1.415-0.586s-1.053 0.224-1.415 0.586l-1.757 1.755c-0.701-0.397-1.514-0.743-2.366-0.996l-0.084-0.021v-2.483c0.002-1.107-0.894-2.001-1.999-2.001h-2.668c-1.105 0-1.999 0.896-1.999 2.001v2.483c-0.938 0.275-1.751 0.621-2.513 1.048l0.060-0.031-1.757-1.755c-0.362-0.362-0.862-0.587-1.415-0.587s-1.053 0.224-1.415 0.587l-1.886 1.886c-0.362 0.362-0.586 0.862-0.586 1.415s0.224 1.053 0.586 1.415v0l1.758 1.755c-0.431 0.775-0.771 1.598-1.017 2.451h-2.483c-1.107-0.002-2.001 0.894-2.001 1.999v2.668c0 1.105 0.896 1.999 2.001 1.999h2.483c0.246 0.854 0.586 1.676 1.017 2.452l-1.762 1.758c-0.362 0.362-0.586 0.862-0.586 1.415s0.224 1.053 0.586 1.415v0l1.886 1.885c0.368 0.348 0.866 0.563 1.415 0.563s1.047-0.214 1.416-0.564l-0.001 0.001 1.757-1.757c0.778 0.429 1.6 0.771 2.454 1.019v2.479c0 1.105 0.894 2.001 1.999 2.001h2.668c1.105 0 1.999-0.896 1.999-2.001v-2.479c0.852-0.248 1.676-0.589 2.452-1.017l1.757 1.757c0.362 0.362 0.862 0.586 1.415 0.586s1.053-0.224 1.415-0.586v0l1.885-1.886c0.362-0.362 0.586-0.862 0.586-1.414s-0.224-1.052-0.586-1.414l-1.757-1.757c0.431-0.776 0.771-1.6 1.017-2.452h2.483c0 0 0.001 0 0.002 0 1.105 0 2.001-0.896 2.001-2.001 0-0.002 0-0.004 0-0.005v0-2.663c0-1.105-0.896-1.999-2.001-1.999zM16 22.668c-3.682 0-6.666-2.985-6.666-6.666s2.985-6.666 6.666-6.666v0c3.682 0 6.666 2.985 6.666 6.666s-2.985 6.666-6.666 6.666v0z"></path></svg>'},4107:e=>{e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title>spinner</title><path fill="#999" d="M16 0.43c0.992 0 1.796 1.287 1.796 2.875v1.437c0 1.588-0.804 2.875-1.796 2.875s-1.796-1.287-1.796-2.875v-1.437c0-1.588 0.804-2.875 1.796-2.875z"></path><path fill="#999" d="M23.785 2.516c0.859 0.496 0.913 2.013 0.119 3.388l-0.718 1.245c-0.794 1.374-2.133 2.087-2.993 1.592s-0.913-2.013-0.119-3.388l0.718-1.245c0.794-1.374 2.133-2.087 2.993-1.592z"></path><path fill="#999" d="M29.484 8.215c0.496 0.859-0.216 2.199-1.592 2.993l-1.245 0.718c-1.374 0.794-2.892 0.741-3.388-0.119s0.216-2.199 1.592-2.993l1.245-0.718c1.374-0.794 2.892-0.741 3.388 0.119z"></path><path fill="#999" d="M31.57 16c0 0.992-1.287 1.796-2.875 1.796h-1.437c-1.588 0-2.875-0.804-2.875-1.796s1.287-1.796 2.875-1.796h1.437c1.588 0 2.875 0.804 2.875 1.796z"></path><path fill="#999" d="M29.484 23.785c-0.496 0.859-2.013 0.913-3.388 0.119l-1.245-0.718c-1.374-0.794-2.087-2.133-1.592-2.993s2.013-0.913 3.388-0.119l1.245 0.718c1.374 0.794 2.087 2.133 1.592 2.993z"></path><path fill="#999" d="M23.785 29.484c-0.859 0.496-2.199-0.216-2.993-1.592l-0.718-1.245c-0.794-1.374-0.741-2.892 0.119-3.388s2.199 0.216 2.993 1.592l0.718 1.245c0.794 1.374 0.741 2.892-0.119 3.388z"></path><path fill="#999" d="M16 31.57c-0.992 0-1.796-1.287-1.796-2.875v-1.437c0-1.588 0.804-2.875 1.796-2.875s1.796 1.287 1.796 2.875v1.437c0 1.588-0.804 2.875-1.796 2.875z"></path><path fill="#999" d="M8.215 29.484c-0.859-0.496-0.913-2.013-0.119-3.388l0.718-1.245c0.794-1.374 2.133-2.087 2.993-1.592s0.913 2.013 0.119 3.388l-0.718 1.245c-0.794 1.374-2.133 2.087-2.993 1.592z"></path><path fill="#999" d="M2.516 23.785c-0.496-0.859 0.216-2.199 1.592-2.993l1.245-0.718c1.374-0.794 2.892-0.741 3.388 0.119s-0.216 2.199-1.592 2.993l-1.245 0.718c-1.374 0.794-2.892 0.741-3.388-0.119z"></path><path fill="#999" d="M0.43 16c0-0.992 1.287-1.796 2.875-1.796h1.437c1.588 0 2.875 0.804 2.875 1.796s-1.287 1.796-2.875 1.796h-1.437c-1.588 0-2.875-0.804-2.875-1.796z"></path><path fill="#999" d="M2.516 8.215c0.496-0.859 2.013-0.913 3.388-0.119l1.245 0.718c1.374 0.794 2.087 2.133 1.592 2.993s-2.013 0.913-3.388 0.119l-1.245-0.718c-1.374-0.794-2.087-2.133-1.592-2.993z"></path><path fill="#999" d="M8.215 2.516c0.859-0.496 2.199 0.216 2.993 1.592l0.718 1.245c0.794 1.374 0.741 2.892-0.119 3.388s-2.199-0.216-2.993-1.592l-0.718-1.245c-0.794-1.374-0.741-2.892 0.119-3.388z"></path></svg>'},2167:e=>{e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title>volume-off</title><path d="M27.397 16.001l4.134-4.144c0.625-0.627 0.625-1.641 0-2.267l-1.132-1.134c-0.625-0.626-1.638-0.626-2.263 0l-4.134 4.144-4.133-4.141c-0.625-0.626-1.638-0.626-2.263 0l-1.132 1.134c-0.625 0.626-0.625 1.641 0 2.267l4.134 4.142-4.131 4.142c-0.625 0.626-0.625 1.641 0 2.267l1.132 1.134c0.625 0.626 1.638 0.626 2.263 0l4.131-4.141 4.133 4.14c0.625 0.627 1.638 0.627 2.263 0l1.132-1.134c0.625-0.626 0.625-1.641 0-2.267l-4.134-4.141zM12.148 5.399l-7.146 5.603h-3.001c-1.479 0-2.001 0.539-2.001 2.001l-0 2.951 0 3.051c0 1.461 0.553 2.001 2.001 2.001h3.001l7.146 5.597c0.857 0.553 1.851 0.727 1.851-0.823v-19.556c-0-1.55-0.994-1.376-1.851-0.823z"></path></svg>'},6399:e=>{e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title>volume-on</title><path d="M26.107 2.991l-3.729 3.185c2.867 2.354 4.694 5.879 4.694 9.824s-1.827 7.47-4.694 9.824l3.729 3.185c3.612-3.226 5.893-7.852 5.893-13.009s-2.281-9.783-5.893-13.009zM19.861 8.326l-3.876 3.312c1.692 0.762 3.038 2.423 3.038 4.362s-1.346 3.6-3.038 4.362l3.876 3.312c2.379-1.756 4.028-4.535 4.028-7.674s-1.649-5.918-4.028-7.674zM12.143 5.399l-7.143 5.601h-3c-1.478 0-2 0.539-2 2v6c0 1.461 0.553 2 2 2h3l7.143 5.595c0.857 0.553 1.85 0.727 1.85-0.823v-19.55c0-1.55-0.993-1.376-1.85-0.823z"></path></svg>'}},n={};function i(e){var r=n[e];if(void 0!==r){if(void 0!==r.error)throw r.error;return r.exports}var s=n[e]={id:e,exports:{}};try{var a={id:e,module:s,factory:t[e],require:i};i.i.forEach((function(e){e(a)})),s=a.module,a.factory.call(s.exports,s,s.exports,a.require)}catch(e){throw s.error=e,e}return s.exports}i.m=t,i.c=n,i.i=[],i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.hu=e=>e+"."+i.h()+".hot-update.js",i.hmrF=()=>"main."+i.h()+".hot-update.json",i.h=()=>"1a4fd7a503152c0d9141",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},i.l=(t,n,r,s)=>{if(e[t])e[t].push(n);else{var a,o;if(void 0!==r)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var c=u[l];if(c.getAttribute("src")==t){a=c;break}}a||(o=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.src=t),e[t]=[n];var p=(n,i)=>{a.onerror=a.onload=null,clearTimeout(d);var r=e[t];if(delete e[t],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((e=>e(i))),n)return n(i)},d=setTimeout(p.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=p.bind(null,a.onerror),a.onload=p.bind(null,a.onload),o&&document.head.appendChild(a)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e,t,n,r,s={},a=i.c,o=[],u=[],l="idle";function c(e){l=e;for(var t=[],n=0;n<u.length;n++)t[n]=u[n].call(null,e);return Promise.all(t)}function p(e){if(0===t.length)return e();var n=t;return t=[],Promise.all(n).then((function(){return p(e)}))}function d(e){if("idle"!==l)throw new Error("check() is only allowed in idle status");return c("check").then(i.hmrM).then((function(r){return r?c("prepare").then((function(){var s=[];return t=[],n=[],Promise.all(Object.keys(i.hmrC).reduce((function(e,t){return i.hmrC[t](r.c,r.r,r.m,e,n,s),e}),[])).then((function(){return p((function(){return e?m(e):c("ready").then((function(){return s}))}))}))})):c(f()?"ready":"idle").then((function(){return null}))}))}function h(e){return"ready"!==l?Promise.resolve().then((function(){throw new Error("apply() is only allowed in ready status")})):m(e)}function m(e){e=e||{},f();var t=n.map((function(t){return t(e)}));n=void 0;var i=t.map((function(e){return e.error})).filter(Boolean);if(i.length>0)return c("abort").then((function(){throw i[0]}));var s=c("dispose");t.forEach((function(e){e.dispose&&e.dispose()}));var a,o=c("apply"),u=function(e){a||(a=e)},l=[];return t.forEach((function(e){if(e.apply){var t=e.apply(u);if(t)for(var n=0;n<t.length;n++)l.push(t[n])}})),Promise.all([s,o]).then((function(){return a?c("fail").then((function(){throw a})):r?m(e).then((function(e){return l.forEach((function(t){e.indexOf(t)<0&&e.push(t)})),e})):c("idle").then((function(){return l}))}))}function f(){if(r)return n||(n=[]),Object.keys(i.hmrI).forEach((function(e){r.forEach((function(t){i.hmrI[e](t,n)}))})),r=void 0,!0}i.hmrD=s,i.i.push((function(m){var f,v,g,y,b=m.module,x=function(n,i){var r=a[i];if(!r)return n;var s=function(t){if(r.hot.active){if(a[t]){var s=a[t].parents;-1===s.indexOf(i)&&s.push(i)}else o=[i],e=t;-1===r.children.indexOf(t)&&r.children.push(t)}else console.warn("[HMR] unexpected require("+t+") from disposed module "+i),o=[];return n(t)},u=function(e){return{configurable:!0,enumerable:!0,get:function(){return n[e]},set:function(t){n[e]=t}}};for(var d in n)Object.prototype.hasOwnProperty.call(n,d)&&"e"!==d&&Object.defineProperty(s,d,u(d));return s.e=function(e){return function(e){switch(l){case"ready":return c("prepare"),t.push(e),p((function(){return c("ready")})),e;case"prepare":return t.push(e),e;default:return e}}(n.e(e))},s}(m.require,m.id);b.hot=(f=m.id,v=b,y={_acceptedDependencies:{},_acceptedErrorHandlers:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:g=e!==f,_requireSelf:function(){o=v.parents.slice(),e=g?void 0:f,i(f)},active:!0,accept:function(e,t,n){if(void 0===e)y._selfAccepted=!0;else if("function"==typeof e)y._selfAccepted=e;else if("object"==typeof e&&null!==e)for(var i=0;i<e.length;i++)y._acceptedDependencies[e[i]]=t||function(){},y._acceptedErrorHandlers[e[i]]=n;else y._acceptedDependencies[e]=t||function(){},y._acceptedErrorHandlers[e]=n},decline:function(e){if(void 0===e)y._selfDeclined=!0;else if("object"==typeof e&&null!==e)for(var t=0;t<e.length;t++)y._declinedDependencies[e[t]]=!0;else y._declinedDependencies[e]=!0},dispose:function(e){y._disposeHandlers.push(e)},addDisposeHandler:function(e){y._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=y._disposeHandlers.indexOf(e);t>=0&&y._disposeHandlers.splice(t,1)},invalidate:function(){switch(this._selfInvalidated=!0,l){case"idle":n=[],Object.keys(i.hmrI).forEach((function(e){i.hmrI[e](f,n)})),c("ready");break;case"ready":Object.keys(i.hmrI).forEach((function(e){i.hmrI[e](f,n)}));break;case"prepare":case"check":case"dispose":case"apply":(r=r||[]).push(f)}},check:d,apply:h,status:function(e){if(!e)return l;u.push(e)},addStatusHandler:function(e){u.push(e)},removeStatusHandler:function(e){var t=u.indexOf(e);t>=0&&u.splice(t,1)},data:s[f]},e=void 0,y),b.parents=o,b.children=[],o=[],m.require=x})),i.hmrC={},i.hmrI={}})(),(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e,t,n,r,s=i.hmrS_jsonp=i.hmrS_jsonp||{179:0},a={};function o(e){return new Promise(((t,n)=>{a[e]=t;var r=i.p+i.hu(e),s=new Error;i.l(r,(t=>{if(a[e]){a[e]=void 0;var i=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;s.message="Loading hot update chunk "+e+" failed.\n("+i+": "+r+")",s.name="ChunkLoadError",s.type=i,s.request=r,n(s)}}))}))}function u(a){function o(e){for(var t=[e],n={},r=t.map((function(e){return{chain:[e],id:e}}));r.length>0;){var s=r.pop(),a=s.id,o=s.chain,l=i.c[a];if(l&&(!l.hot._selfAccepted||l.hot._selfInvalidated)){if(l.hot._selfDeclined)return{type:"self-declined",chain:o,moduleId:a};if(l.hot._main)return{type:"unaccepted",chain:o,moduleId:a};for(var c=0;c<l.parents.length;c++){var p=l.parents[c],d=i.c[p];if(d){if(d.hot._declinedDependencies[a])return{type:"declined",chain:o.concat([p]),moduleId:a,parentId:p};-1===t.indexOf(p)&&(d.hot._acceptedDependencies[a]?(n[p]||(n[p]=[]),u(n[p],[a])):(delete n[p],t.push(p),r.push({chain:o.concat([p]),id:p})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];-1===e.indexOf(i)&&e.push(i)}}i.f&&delete i.f.jsonpHmr,e=void 0;var l={},c=[],p={},d=function(e){console.warn("[HMR] unexpected require("+e.id+") to disposed module")};for(var h in t)if(i.o(t,h)){var m,f=t[h],v=!1,g=!1,y=!1,b="";switch((m=f?o(h):{type:"disposed",moduleId:h}).chain&&(b="\nUpdate propagation: "+m.chain.join(" -> ")),m.type){case"self-declined":a.onDeclined&&a.onDeclined(m),a.ignoreDeclined||(v=new Error("Aborted because of self decline: "+m.moduleId+b));break;case"declined":a.onDeclined&&a.onDeclined(m),a.ignoreDeclined||(v=new Error("Aborted because of declined dependency: "+m.moduleId+" in "+m.parentId+b));break;case"unaccepted":a.onUnaccepted&&a.onUnaccepted(m),a.ignoreUnaccepted||(v=new Error("Aborted because "+h+" is not accepted"+b));break;case"accepted":a.onAccepted&&a.onAccepted(m),g=!0;break;case"disposed":a.onDisposed&&a.onDisposed(m),y=!0;break;default:throw new Error("Unexception type "+m.type)}if(v)return{error:v};if(g)for(h in p[h]=f,u(c,m.outdatedModules),m.outdatedDependencies)i.o(m.outdatedDependencies,h)&&(l[h]||(l[h]=[]),u(l[h],m.outdatedDependencies[h]));y&&(u(c,[m.moduleId]),p[h]=d)}t=void 0;for(var x,k=[],w=0;w<c.length;w++){var C=c[w],I=i.c[C];I&&(I.hot._selfAccepted||I.hot._main)&&p[C]!==d&&!I.hot._selfInvalidated&&k.push({module:C,require:I.hot._requireSelf,errorHandler:I.hot._selfAccepted})}return{dispose:function(){var e;n.forEach((function(e){delete s[e]})),n=void 0;for(var t,r=c.slice();r.length>0;){var a=r.pop(),o=i.c[a];if(o){var u={},p=o.hot._disposeHandlers;for(w=0;w<p.length;w++)p[w].call(null,u);for(i.hmrD[a]=u,o.hot.active=!1,delete i.c[a],delete l[a],w=0;w<o.children.length;w++){var d=i.c[o.children[w]];d&&(e=d.parents.indexOf(a))>=0&&d.parents.splice(e,1)}}}for(var h in l)if(i.o(l,h)&&(o=i.c[h]))for(x=l[h],w=0;w<x.length;w++)t=x[w],(e=o.children.indexOf(t))>=0&&o.children.splice(e,1)},apply:function(e){for(var t in p)i.o(p,t)&&(i.m[t]=p[t]);for(var n=0;n<r.length;n++)r[n](i);for(var s in l)if(i.o(l,s)){var o=i.c[s];if(o){x=l[s];for(var u=[],d=[],h=[],m=0;m<x.length;m++){var f=x[m],v=o.hot._acceptedDependencies[f],g=o.hot._acceptedErrorHandlers[f];if(v){if(-1!==u.indexOf(v))continue;u.push(v),d.push(g),h.push(f)}}for(var y=0;y<u.length;y++)try{u[y].call(null,x)}catch(t){if("function"==typeof d[y])try{d[y](t,{moduleId:s,dependencyId:h[y]})}catch(n){a.onErrored&&a.onErrored({type:"accept-error-handler-errored",moduleId:s,dependencyId:h[y],error:n,originalError:t}),a.ignoreErrored||(e(n),e(t))}else a.onErrored&&a.onErrored({type:"accept-errored",moduleId:s,dependencyId:h[y],error:t}),a.ignoreErrored||e(t)}}}for(var b=0;b<k.length;b++){var w=k[b],C=w.module;try{w.require(C)}catch(t){if("function"==typeof w.errorHandler)try{w.errorHandler(t,{moduleId:C,module:i.c[C]})}catch(n){a.onErrored&&a.onErrored({type:"self-accept-error-handler-errored",moduleId:C,error:n,originalError:t}),a.ignoreErrored||(e(n),e(t))}else a.onErrored&&a.onErrored({type:"self-accept-errored",moduleId:C,error:t}),a.ignoreErrored||e(t)}}return c}}}self.webpackHotUpdate=(e,n,s)=>{for(var o in n)i.o(n,o)&&(t[o]=n[o]);s&&r.push(s),a[e]&&(a[e](),a[e]=void 0)},i.hmrI.jsonp=function(e,s){t||(t={},r=[],n=[],s.push(u)),i.o(t,e)||(t[e]=i.m[e])},i.hmrC.jsonp=function(a,l,c,p,d,h){d.push(u),e={},n=l,t=c.reduce((function(e,t){return e[t]=!1,e}),{}),r=[],a.forEach((function(t){i.o(s,t)&&void 0!==s[t]&&(p.push(o(t)),e[t]=!0)})),i.f&&(i.f.jsonpHmr=function(t,n){e&&!i.o(e,t)&&i.o(s,t)&&void 0!==s[t]&&(n.push(o(t)),e[t]=!0)})},i.hmrM=()=>{if("undefined"==typeof fetch)throw new Error("No browser support: need fetch API");return fetch(i.p+i.hmrF()).then((e=>{if(404!==e.status){if(!e.ok)throw new Error("Failed to fetch update manifest "+e.statusText);return e.json()}}))}})(),i(1560)})();